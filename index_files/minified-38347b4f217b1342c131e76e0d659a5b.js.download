/*

 Video.js 7.10.2 <http://videojs.com/>
 Copyright Brightcove, Inc. <https://www.brightcove.com/>
 Available under Apache License Version 2.0
 <https://github.com/videojs/video.js/blob/master/LICENSE>

 Includes vtt.js <https://github.com/mozilla/vtt.js>
 Available under Apache License Version 2.0
 <https://github.com/mozilla/vtt.js/blob/master/LICENSE>

 slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 Copyright (c) 2014 David Bj√∂rklund
 Available under the MIT license
 <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 Programatically add the following
 @name @videojs/vhs-utils @version 2.2.1 @license MIT  @name m3u8-parser @version 4.5.0 @license Apache-2.0  @name mpd-parser @version 0.14.0 @license Apache-2.0  @name @videojs/http-streaming @version 2.2.4 @license Apache-2.0  @name pkcs7 @version 1.0.4 @license Apache-2.0  @name aes-decrypter @version 3.1.0 @license Apache-2.0 */
(function(G,N){"object"===typeof exports&&"undefined"!==typeof module?module.exports=N(require("global/window"),require("global/document")):"function"===typeof define&&define.amd?define(["global/window","global/document"],N):(G=G||self,G.videojs=N(G.window,G.document))})(this,function(G,N){function xb(n){var e="info",d=function(){for(var a=arguments.length,b=Array(a),g=0;g<a;g++)b[g]=arguments[g];c("log",e,b)};var c=rk(n,d);d.createLogger=function(a){return xb(n+": "+a)};d.levels={all:"debug|log|warn|error",
off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e};d.level=function(a){if("string"===typeof a){if(!d.levels.hasOwnProperty(a))throw Error('"'+a+'" in not a valid log level');e=a}return e};d.history=function(){return db?[].concat(db):[]};d.history.filter=function(a){return(db||[]).filter(function(b){return(new RegExp(".*"+a+".*")).test(b[0])})};d.history.clear=function(){db&&(db.length=0)};d.history.disable=function(){null!==db&&(db.length=0,db=null)};
d.history.enable=function(){null===db&&(db=[])};d.error=function(){for(var a=arguments.length,b=Array(a),g=0;g<a;g++)b[g]=arguments[g];return c("error",e,b)};d.warn=function(){for(var a=arguments.length,b=Array(a),g=0;g<a;g++)b[g]=arguments[g];return c("warn",e,b)};d.debug=function(){for(var a=arguments.length,b=Array(a),g=0;g<a;g++)b[g]=arguments[g];return c("debug",e,b)};return d}function ha(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n["default"]:n}function ma(n,
e){return e={exports:{}},n(e,e.exports),e.exports}function Ka(n,e){yg(n).forEach(function(d){return e(n[d],d)})}function Ga(n,e,d){void 0===d&&(d=0);return yg(n).reduce(function(c,a){return e(c,n[a],a)},d)}function ja(n){for(var e=arguments.length,d=Array(1<e?e-1:0),c=1;c<e;c++)d[c-1]=arguments[c];if(Object.assign)return Tc.apply(void 0,[n].concat(d));d.forEach(function(a){a&&Ka(a,function(b,g){n[g]=b})});return n}function Wa(n){return!!n&&"object"===typeof n}function Nb(n){return Wa(n)&&"[object Object]"===
sk.call(n)&&n.constructor===Object}function Qa(n,e){return n&&e?"function"===typeof G.getComputedStyle?(n=G.getComputedStyle(n))?n.getPropertyValue(e)||n[e]:"":"":""}function Uc(n){if(0<=n.indexOf(" "))throw Error("class has illegal whitespace characters");}function Tb(){return N===G.document}function Ob(n){return Wa(n)&&1===n.nodeType}function dc(){try{return G.parent!==G.self}catch(n){return!0}}function rc(n){return function(e,d){if("string"!==typeof e||!e.trim())return N[n](null);"string"===typeof d&&
d.trim()&&(d=N.querySelector(d));d=Ob(d)?d:N;return d[n]&&d[n](e)}}function xa(n,e,d,c){void 0===n&&(n="div");void 0===e&&(e={});void 0===d&&(d={});var a=N.createElement(n);Object.getOwnPropertyNames(e).forEach(function(b){var g=e[b];-1!==b.indexOf("aria-")||"role"===b||"type"===b?(pa.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+(b+" to "+g+".")),a.setAttribute(b,g)):
"textContent"===b?Ub(a,g):a[b]!==g&&(a[b]=g)});Object.getOwnPropertyNames(d).forEach(function(b){a.setAttribute(b,d[b])});c&&we(a,c);return a}function Ub(n,e){"undefined"===typeof n.textContent?n.innerText=e:n.textContent=e;return n}function rb(n,e){e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}function Pb(n,e){Uc(e);return n.classList?n.classList.contains(e):(new RegExp("(^|\\s)"+e+"($|\\s)")).test(n.className)}function sb(n,e){n.classList?n.classList.add(e):Pb(n,e)||(n.className=
(n.className+" "+e).trim());return n}function Vb(n,e){n.classList?n.classList.remove(e):(Uc(e),n.className=n.className.split(/\s+/).filter(function(d){return d!==e}).join(" "));return n}function sc(n,e,d){var c=Pb(n,e);"function"===typeof d&&(d=d(n,e));"boolean"!==typeof d&&(d=!c);if(d!==c)return d?sb(n,e):Vb(n,e),n}function xd(n,e){Object.getOwnPropertyNames(e).forEach(function(d){var c=e[d];null===c||"undefined"===typeof c||!1===c?n.removeAttribute(d):n.setAttribute(d,!0===c?"":c)})}function X(n){var e=
{};if(n&&n.attributes&&0<n.attributes.length)for(var d=n.attributes,c=d.length-1;0<=c;c--){var a=d[c].name,b=d[c].value;if("boolean"===typeof n[a]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+a+","))b=null!==b?!0:!1;e[a]=b}return e}function va(){N.body.focus();N.onselectstart=function(){return!1}}function ib(){N.onselectstart=function(){return!0}}function Aa(n){if(n&&n.getBoundingClientRect&&n.parentNode){var e=n.getBoundingClientRect(),d={};"bottom height left right top width".split(" ").forEach(function(c){void 0!==
e[c]&&(d[c]=e[c])});d.height||(d.height=parseFloat(Qa(n,"height")));d.width||(d.width=parseFloat(Qa(n,"width")));return d}}function yb(n){if(!n||n&&!n.offsetParent)return{left:0,top:0,width:0,height:0};var e=n.offsetWidth,d=n.offsetHeight,c=0,a=0;do c+=n.offsetLeft,a+=n.offsetTop,n=n.offsetParent;while(n);return{left:c,top:a,width:e,height:d}}function tb(n,e){var d={},c=yb(e.target);n=yb(n);var a=n.width,b=n.height,g=e.offsetY-(n.top-c.top);c=e.offsetX-(n.left-c.left);e.changedTouches&&(c=e.changedTouches[0].pageX-
n.left,g=e.changedTouches[0].pageY+n.top);d.y=1-Math.max(0,Math.min(1,g/b));d.x=Math.max(0,Math.min(1,c/a));return d}function zg(n){return Wa(n)&&3===n.nodeType}function xe(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n}function Ag(n){"function"===typeof n&&(n=n());return(Array.isArray(n)?n:[n]).map(function(e){"function"===typeof e&&(e=e());if(Ob(e)||zg(e))return e;if("string"===typeof e&&/\S/.test(e))return N.createTextNode(e)}).filter(function(e){return e})}function we(n,e){Ag(e).forEach(function(d){return n.appendChild(d)});
return n}function Bg(n,e){return we(xe(n),e)}function tc(n){return void 0===n.button&&void 0===n.buttons||0===n.button&&void 0===n.buttons||"mouseup"===n.type&&0===n.button&&0===n.buttons?!0:0!==n.button||1!==n.buttons?!1:!0}function ye(n,e){e&&(ze=e);G.setTimeout(tk,n)}function Ae(){Cg=!0;G.removeEventListener("load",Ae)}function Dg(n,e){if(Xa.has(n)){var d=Xa.get(n);0===d.handlers[e].length&&(delete d.handlers[e],n.removeEventListener?n.removeEventListener(e,d.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+
e,d.dispatcher));0>=Object.getOwnPropertyNames(d.handlers).length&&(delete d.handlers,delete d.dispatcher,delete d.disabled);if(0===Object.getOwnPropertyNames(d).length)Xa["delete"](n)}}function Be(n,e,d,c){d.forEach(function(a){n(e,a,c)})}function yd(n){function e(){return!0}function d(){return!1}if(n.fixed_)return n;if(!n||!n.isPropagationStopped){var c=n||G.event;n={};for(var a in c)"layerX"!==a&&"layerY"!==a&&"keyLocation"!==a&&"webkitMovementX"!==a&&"webkitMovementY"!==a&&("returnValue"===a&&
c.preventDefault||(n[a]=c[a]));n.target||(n.target=n.srcElement||N);n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement);n.preventDefault=function(){c.preventDefault&&c.preventDefault();n.returnValue=!1;c.returnValue=!1;n.defaultPrevented=!0};n.defaultPrevented=!1;n.stopPropagation=function(){c.stopPropagation&&c.stopPropagation();n.cancelBubble=!0;c.cancelBubble=!0;n.isPropagationStopped=e};n.isPropagationStopped=d;n.stopImmediatePropagation=function(){c.stopImmediatePropagation&&
c.stopImmediatePropagation();n.isImmediatePropagationStopped=e;n.stopPropagation()};n.isImmediatePropagationStopped=d;if(null!==n.clientX&&void 0!==n.clientX){a=N.documentElement;var b=N.body;n.pageX=n.clientX+(a&&a.scrollLeft||b&&b.scrollLeft||0)-(a&&a.clientLeft||b&&b.clientLeft||0);n.pageY=n.clientY+(a&&a.scrollTop||b&&b.scrollTop||0)-(a&&a.clientTop||b&&b.clientTop||0)}n.which=n.charCode||n.keyCode;null!==n.button&&void 0!==n.button&&(n.button=n.button&1?0:n.button&4?1:n.button&2?2:0)}n.fixed_=
!0;return n}function jb(n,e,d){if(Array.isArray(e))return Be(jb,n,e,d);Xa.has(n)||Xa.set(n,{});var c=Xa.get(n);c.handlers||(c.handlers={});c.handlers[e]||(c.handlers[e]=[]);d.guid||(d.guid=Wb++);c.handlers[e].push(d);c.dispatcher||(c.disabled=!1,c.dispatcher=function(a,b){if(!c.disabled){a=yd(a);var g=c.handlers[a.type];if(g){g=g.slice(0);for(var l=0,k=g.length;l<k&&!a.isImmediatePropagationStopped();l++)try{g[l].call(n,a,b)}catch(f){pa.error(f)}}}});1===c.handlers[e].length&&(n.addEventListener?
(d=!1,uk()&&-1<vk.indexOf(e)&&(d={passive:!0}),n.addEventListener(e,c.dispatcher,d)):n.attachEvent&&n.attachEvent("on"+e,c.dispatcher))}function Ra(n,e,d){if(Xa.has(n)){var c=Xa.get(n);if(c.handlers){if(Array.isArray(e))return Be(Ra,n,e,d);if(void 0===e)for(var a in c.handlers)Object.prototype.hasOwnProperty.call(c.handlers||{},a)&&(e=n,d=a,c.handlers[d]=[],Dg(e,d));else if(a=c.handlers[e]){if(!d)c.handlers[e]=[];else if(d.guid)for(c=0;c<a.length;c++)a[c].guid===d.guid&&a.splice(c--,1);Dg(n,e)}}}}
function uc(n,e,d){var c=Xa.has(n)?Xa.get(n):{},a=n.parentNode||n.ownerDocument;"string"===typeof e?e={type:e,target:n}:e.target||(e.target=n);e=yd(e);c.dispatcher&&c.dispatcher.call(n,e,d);if(a&&!e.isPropagationStopped()&&!0===e.bubbles)uc.call(null,a,e,d);else if(!a&&!e.defaultPrevented&&e.target&&e.target[e.type]&&(Xa.has(e.target)||Xa.set(e.target,{}),n=Xa.get(e.target),e.target[e.type])){n.disabled=!0;if("function"===typeof e.target[e.type])e.target[e.type]();n.disabled=!1}return!e.defaultPrevented}
function zd(n,e,d){if(Array.isArray(e))return Be(zd,n,e,d);var c=function b(){Ra(n,e,b);d.apply(this,arguments)};c.guid=d.guid=d.guid||Wb++;jb(n,e,c)}function Eg(n,e,d){var c=function b(){Ra(n,e,b);d.apply(this,arguments)};c.guid=d.guid=d.guid||Wb++;jb(n,e,c)}function Ce(n,e){void 0===e&&(e={});if(e=e.eventBusKey){if(!n[e].nodeName)throw Error('The eventBusKey "'+e+'" does not refer to an element.');n.eventBusEl_=n[e]}else n.eventBusEl_=xa("span",{className:"vjs-event-bus"});ja(n,wk);n.eventedCallbacks&&
n.eventedCallbacks.forEach(function(d){d()});n.on("dispose",function(){n.off();G.setTimeout(function(){n.eventBusEl_=null},0)});return n}function Fg(n,e){ja(n,xk);n.state=ja({},n.state,e);if("function"===typeof n.handleStateChanged&&ec(n))n.on("statechanged",n.handleStateChanged);return n}function ya(){for(var n={},e=arguments.length,d=Array(e),c=0;c<e;c++)d[c]=arguments[c];d.forEach(function(a){a&&Ka(a,function(b,g){Nb(b)?(Nb(n[g])||(n[g]={}),n[g]=ya(n[g],b)):n[g]=b})});return n}function Gg(n,e,
d,c){var a=d.length-1;if("number"!==typeof c||0>c||c>a)throw Error("Failed to execute '"+n+"' on 'TimeRanges': The index provided ("+c+") is non-numeric or out of bounds (0-"+a+").");return d[c][e]}function De(n){return void 0===n||0===n.length?{length:0,start:function(){throw Error("This TimeRanges object is empty");},end:function(){throw Error("This TimeRanges object is empty");}}:{length:n.length,start:Gg.bind(null,"start",0,n),end:Gg.bind(null,"end",1,n)}}function fc(n,e){return Array.isArray(n)?
De(n):void 0===n||void 0===e?De():De([[n,e]])}function Hg(n,e){var d=0;if(!e)return 0;n&&n.length||(n=fc(0,0));for(var c=0;c<n.length;c++){var a=n.start(c);var b=n.end(c);b>e&&(b=e);d+=b-a}return d/e}function Ya(n){if(n instanceof Ya)return n;"number"===typeof n?this.code=n:"string"===typeof n?this.message=n:Wa(n)&&("number"===typeof n.code&&(this.code=n.code),ja(this,n));this.message||(this.message=Ya.defaultMessages[this.code]||"")}function Vc(n){return void 0!==n&&null!==n&&"function"===typeof n.then}
function gc(n){Vc(n)&&n.then(null,function(e){})}function yk(n){for(var e in n)if(n.hasOwnProperty(e))return!1;return!0}function Ig(n,e,d){var c=n,a=zk.call(e);"[object Function]"===a||"function"===typeof e&&"[object RegExp]"!==a||"undefined"!==typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)?(d=e,"string"===typeof n&&(c={uri:n})):c=Tc({},e,{uri:n});c.callback=d;return c}function zb(n,e,d){e=Ig(n,e,d);return Jg(e)}function Jg(n){function e(u){clearTimeout(q);
u instanceof Error||(u=Error(""+(u||"Unknown XMLHttpRequest Error")));u.statusCode=0;var y=r;c||(c=!0,n.callback(u,y,void 0))}function d(){if(!g){clearTimeout(q);var u=n.useXDR&&void 0===a.status?200:1223===a.status?204:a.status;var y=r,B=null;if(0!==u){if(a.response)y=a.response;else if(!(y=a.responseText))a:{try{if("document"===a.responseType){y=a.responseXML;break a}var I=a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName;if(""===a.responseType&&!I){y=a.responseXML;break a}}catch(M){}y=
null}if(p)try{y=JSON.parse(y)}catch(M){}y={body:y,statusCode:u,method:k,headers:{},url:l,rawRequest:a};a.getAllResponseHeaders&&(y.headers=Ak(a.getAllResponseHeaders()))}else B=Error("Internal XMLHttpRequest Error");u=y.body;c||(c=!0,n.callback(B,y,u))}}if("undefined"===typeof n.callback)throw Error("callback argument missing");var c=!1,a=n.xhr||null;a||(a=n.cors||n.useXDR?new zb.XDomainRequest:new zb.XMLHttpRequest);var b,g,l=a.url=n.uri||n.url,k=a.method=n.method||"GET",f=n.body||n.data,h=a.headers=
n.headers||{},m=!!n.sync,p=!1,q,r={body:void 0,headers:{},statusCode:0,method:k,url:l,rawRequest:a};"json"in n&&!1!==n.json&&(p=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==k&&"HEAD"!==k&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),f=JSON.stringify(!0===n.json?f:n.json)));a.onreadystatechange=function(){4===a.readyState&&setTimeout(d,0)};a.onload=d;a.onerror=e;a.onprogress=function(){};a.onabort=function(){g=!0};a.ontimeout=e;a.open(k,l,!m,n.username,
n.password);m||(a.withCredentials=!!n.withCredentials);!m&&0<n.timeout&&(q=setTimeout(function(){if(!g){g=!0;a.abort("timeout");var u=Error("XMLHttpRequest timeout");u.code="ETIMEDOUT";e(u)}},n.timeout));if(a.setRequestHeader)for(b in h)h.hasOwnProperty(b)&&a.setRequestHeader(b,h[b]);else if(n.headers&&!yk(n.headers))throw Error("Headers cannot be set on an XDomainRequest object");"responseType"in n&&(a.responseType=n.responseType);"beforeSend"in n&&"function"===typeof n.beforeSend&&n.beforeSend(a);
a.send(f||null);return a}function Bk(){}function kb(n,e){this.name="ParsingError";this.code=n.code;this.message=e||n.message}function Ee(n){n=n.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);if(!n)return null;if(n[3]){var e=n[3].replace(":","");return 3600*(n[1]|0)+60*(n[2]|0)+(e|0)+(n[4]|0)/1E3}return 59<n[1]?3600*(n[1]|0)+60*(n[2]|0)+(n[4]|0)/1E3:60*(n[1]|0)+(n[2]|0)+(n[4]|0)/1E3}function Wc(){this.values=Fe(null)}function Xc(n,e,d,c){n=c?n.split(c):[n];for(var a in n)"string"===typeof n[a]&&(c=
n[a].split(d),2===c.length&&e(c[0],c[1]))}function Ck(n,e,d){function c(){var g=Ee(n);if(null===g)throw new kb(kb.Errors.BadTimeStamp,"Malformed timestamp: "+b);n=n.replace(/^[^\sa-zA-Z-]+/,"");return g}function a(){n=n.replace(/^\s+/,"")}var b=n;a();e.startTime=c();a();if("--\x3e"!==n.substr(0,3))throw new kb(kb.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+b);n=n.substr(3);a();e.endTime=c();a();(function(g,l){var k=new Wc;Xc(g,function(f,h){switch(f){case "region":for(var m=
d.length-1;0<=m;m--)if(d[m].id===h){k.set(f,d[m].region);break}break;case "vertical":k.alt(f,h,["rl","lr"]);break;case "line":h=h.split(",");m=h[0];k.integer(f,m);k.percent(f,m)?k.set("snapToLines",!1):null;k.alt(f,m,["auto"]);2===h.length&&k.alt("lineAlign",h[1],["start","center","end"]);break;case "position":h=h.split(",");k.percent(f,h[0]);2===h.length&&k.alt("positionAlign",h[1],["start","center","end"]);break;case "size":k.percent(f,h);break;case "align":k.alt(f,h,["start","center","end","left",
"right"])}},/:/,/\s/);l.region=k.get("region",null);l.vertical=k.get("vertical","");try{l.line=k.get("line","auto")}catch(f){}l.lineAlign=k.get("lineAlign","start");l.snapToLines=k.get("snapToLines",!0);l.size=k.get("size",100);try{l.align=k.get("align","center")}catch(f){l.align=k.get("align","middle")}try{l.position=k.get("position","auto")}catch(f){l.position=k.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=k.get("positionAlign",{start:"start",left:"start",
center:"center",middle:"center",end:"end",right:"end"},l.align)})(n,e)}function Kg(n,e){function d(){if(!e)return null;var m=e.match(/^([^<]*)(<[^>]*>?)?/);m=m[1]?m[1]:m[2];e=e.substr(m.length);return m}function c(m){Ge.innerHTML=m;m=Ge.textContent;Ge.textContent="";return m}function a(m,p){var q=Dk[m];if(!q)return null;q=n.document.createElement(q);(m=Ek[m])&&p&&(q[m]=p.trim());return q}for(var b=n.document.createElement("div"),g=b,l,k=[];null!==(l=d());)if("\x3c"===l[0])if("/"===l[1])k.length&&
k[k.length-1]===l.substr(2).replace("\x3e","")&&(k.pop(),g=g.parentNode);else{var f=Ee(l.substr(1,l.length-2));if(f){var h=n.document.createProcessingInstruction("timestamp",f);g.appendChild(h)}else if(l=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))!(h=a(l[1],l[3]))||Lg[h.localName]&&Lg[h.localName]!==g.localName||(l[2]&&(f=l[2].split("."),f.forEach(function(m){var p=/^bg_/.test(m);m=p?m.slice(3):m;Mg.hasOwnProperty(m)&&(h.style[p?"background-color":"color"]=Mg[m])}),h.className=f.join(" ")),
k.push(l[1]),g.appendChild(h),g=h)}else g.appendChild(n.document.createTextNode(c(l)));return b}function Fk(n){for(var e=0;e<Ng.length;e++){var d=Ng[e];if(n>=d[0]&&n<=d[1])return!0}return!1}function Gk(n){function e(g,l){for(var k=l.childNodes.length-1;0<=k;k--)g.push(l.childNodes[k])}function d(g){if(!g||!g.length)return null;var l=g.pop(),k=l.textContent||l.innerText;if(k)return(l=k.match(/^.*(\n|\r)/))?(g.length=0,l[0]):k;if("ruby"===l.tagName)return d(g);if(l.childNodes)return e(g,l),d(g)}var c=
[],a="";if(!n||!n.childNodes)return"ltr";for(e(c,n);a=d(c);)for(var b=0;b<a.length;b++)if(n=a.charCodeAt(b),Fk(n))return"rtl";return"ltr"}function He(){}function Ad(n,e,d){this.cue=e;this.cueDiv=Kg(n,e.text);var c={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(c,this.cueDiv);this.div=
n.document.createElement("div");c={direction:Gk(this.cueDiv),writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===e.align?"center":e.align,font:d.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(c);this.div.appendChild(this.cueDiv);n=0;switch(e.positionAlign){case "start":n=e.position;break;case "center":n=e.position-e.size/2;break;case "end":n=e.position-e.size}""===e.vertical?this.applyStyles({left:this.formatStyle(n,
"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(n,"%"),height:this.formatStyle(e.size,"%")});this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}function Za(n){if(n.div){var e=n.div.offsetHeight;var d=n.div.offsetWidth;var c=n.div.offsetTop;var a=(a=n.div.childNodes)&&
(a=a[0])&&a.getClientRects&&a.getClientRects();n=n.div.getBoundingClientRect();var b=a?Math.max(a[0]&&a[0].height||0,n.height/a.length):0}this.left=n.left;this.right=n.right;this.top=n.top||c;this.height=n.height||e;this.bottom=n.bottom||c+(n.height||e);this.width=n.width||d;this.lineHeight=void 0!==b?b:n.lineHeight}function vc(){}function Ie(n){return"string"!==typeof n?!1:Hk[n.toLowerCase()]?n.toLowerCase():!1}function Og(n,e,d){this.hasBeenReset=!1;var c="",a=!1,b=n,g=e,l=d,k=null,f="",h=!0,m=
"auto",p="start",q="auto",r="auto",u=100,y="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return c},set:function(B){c=""+B}},pauseOnExit:{enumerable:!0,get:function(){return a},set:function(B){a=!!B}},startTime:{enumerable:!0,get:function(){return b},set:function(B){if("number"!==typeof B)throw new TypeError("Start time must be set to a number.");b=B;this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return g},set:function(B){if("number"!==typeof B)throw new TypeError("End time must be set to a number.");
g=B;this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return l},set:function(B){l=""+B;this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return k},set:function(B){k=B;this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return f},set:function(B){B="string"!==typeof B?!1:Ik[B.toLowerCase()]?B.toLowerCase():!1;if(!1===B)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");f=B;this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return h},
set:function(B){h=!!B;this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return m},set:function(B){if("number"!==typeof B&&"auto"!==B)throw new SyntaxError("Line: an invalid number or illegal string was specified.");m=B;this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return p},set:function(B){(B=Ie(B))?(p=B,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return q},set:function(B){if(0>B||100<
B)throw Error("Position must be between 0 and 100.");q=B;this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return r},set:function(B){(B=Ie(B))?(r=B,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return u},set:function(B){if(0>B||100<B)throw Error("Size must be between 0 and 100.");u=B;this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return y},set:function(B){B=Ie(B);if(!B)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");
y=B;this.hasBeenReset=!0}}});this.displayState=void 0}function Yc(n){return"number"===typeof n&&0<=n&&100>=n}function Jk(n,e,d){n.setTimeout(function(){return hc(e,ic[e.type],d,n)},1)}function Kk(n,e){n.forEach(function(d){return d.setTech&&d.setTech(e)})}function Pg(n,e,d,c){void 0===c&&(c=null);var a="call"+Ba(d);a=n.reduce(Je(a),c);e=(c=a===Bd)?null:e[d](a);for(a=n.length-1;0<=a;a--){var b=n[a];if(b[d])b[d](c,e)}return e}function Je(n){return function(e,d){return e===Bd?Bd:d[n]?d[n](e):e}}function Lk(n,
e){var d=Ke[n.id()],c=null;if(void 0===d||null===d)return c=e(n),Ke[n.id()]=[[e,c]],c;for(var a=0;a<d.length;a++){var b=d[a];b[0]===e&&(c=b[1])}null===c&&(c=e(n),d.push([e,c]));return c}function hc(n,e,d,c,a,b){void 0===n&&(n={});void 0===e&&(e=[]);void 0===a&&(a=[]);void 0===b&&(b=!1);var g=e[0],l=e.slice(1);if("string"===typeof g)hc(n,ic[g],d,c,a,b);else if(g){var k=Lk(c,g);if(!k.setSource)return a.push(k),hc(n,l,d,c,a,b);k.setSource(ja({},n),function(f,h){if(f)return hc(n,l,d,c,a,b);a.push(k);
hc(h,n.type===h.type?l:ic[h.type],d,c,a,b)})}else l.length?hc(n,l,d,c,a,b):b?d(n,a):hc(n,ic["*"],d,c,a,!0)}function Qg(n){if(!n.type){var e=Cd(n.src);e&&(n.type=e)}return n}function Le(n,e){if(4===n.length)n=n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else if(7===n.length)n=n.slice(1);else throw Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+e+")"}function wc(n,e){void 0===
e&&(e=n);return Me(n,e)}function Rg(n,e){e&&(n=e(n));if(n&&"none"!==n)return n}function K(n,e,d){var c=K.getPlayer(n);if(c)return e&&pa.warn('Player "'+n+'" is already initialised. Options will not be applied.'),d&&c.ready(d),c;var a="string"===typeof n?Xb("#"+Sg(n)):n;if(!Ob(a))throw new TypeError("The element or ID supplied is not valid. (videojs)");a.ownerDocument.defaultView&&a.ownerDocument.body.contains(a)||pa.warn("The element supplied is not included in the DOM");e=e||{};K.hooks("beforesetup").forEach(function(b){b=
b(a,ya(e));!Wa(b)||Array.isArray(b)?pa.error("please return an object in beforesetup hooks"):e=ya(e,b)});c=new (U.getComponent("Player"))(a,e,d);K.hooks("setup").forEach(function(b){return b(c)});return c}function Tg(n){return n&&"object"===typeof n&&"default"in n?n:{"default":n}}function Ug(){}function Mk(n,e,d,c,a){function b(fa){var ta=fa.slice(1,-1);if(ta in d)return d[ta];if("#"===ta.charAt(0))return fa=parseInt(ta.substr(1).replace("x","0x")),65535<fa?(fa-=65536,fa=String.fromCharCode(55296+
(fa>>10),56320+(fa&1023))):fa=String.fromCharCode(fa),fa;a.error("entity not found:"+fa);return fa}function g(fa){if(fa>q){var ta=n.substring(q,fa).replace(/&#?\w+;/g,b);m&&l(q);c.characters(ta,0,fa-q);q=fa}}function l(fa,ta){for(;fa>=f&&(ta=h.exec(n));)k=ta.index,f=k+ta[0].length,m.lineNumber++;m.columnNumber=fa-k+1}var k=0,f=0,h=/.*(?:\r\n?|\n)|.*$/g,m=c.locator;e=[{currentNSMap:e}];for(var p={},q=0;;){try{var r=n.indexOf("\x3c",q);if(0>r){if(!n.substr(q).match(/^\s*$/)){var u=c.doc,y=u.createTextNode(n.substr(q));
u.appendChild(y);c.currentElement=y}break}r>q&&g(r);switch(n.charAt(r+1)){case "/":var B=n.indexOf("\x3e",r+3),I=n.substring(r+2,B),M=e.pop();0>B?(I=n.substring(r+2).replace(/[\s<].*/,""),a.error("end tag name: "+I+" is not complete:"+M.tagName),B=r+1+I.length):I.match(/\s</)&&(I=I.replace(/[\s<].*/,""),a.error("end tag name: "+I+" maybe not complete"),B=r+1+I.length);var L=M.localNSMap,S=M.tagName==I;if(S||M.tagName&&M.tagName.toLowerCase()==I.toLowerCase()){c.endElement(M.uri,M.localName,I);if(L)for(var P in L)c.endPrefixMapping(P);
S||a.fatalError("end tag name: "+I+" is not match the current start tagName:"+M.tagName)}else e.push(M);B++;break;case "?":m&&l(r);B=Nk(n,r,c);break;case "!":m&&l(r);B=Ok(n,r,c,a);break;default:m&&l(r);var T=new Vg,ca=e[e.length-1].currentNSMap;B=Pk(n,r,T,ca,b,a);var da=T.length;!T.closed&&Qk(n,B,T.tagName,p)&&(T.closed=!0,d.nbsp||a.warning("unclosed xml attribute"));if(m&&da){for(var na=Wg(m,{}),W=0;W<da;W++){var qa=T[W];l(qa.offset);qa.locator=Wg(m,{})}c.locator=na;Xg(T,c,ca)&&e.push(T);c.locator=
m}else Xg(T,c,ca)&&e.push(T);"http://www.w3.org/1999/xhtml"!==T.uri||T.closed?B++:B=Rk(n,B,T.tagName,b,c)}}catch(fa){a.error("element parse error: "+fa),B=-1}B>q?q=B:g(Math.max(r,q)+1)}}function Wg(n,e){e.lineNumber=n.lineNumber;e.columnNumber=n.columnNumber;return e}function Pk(n,e,d,c,a,b){for(var g,l,k=++e,f=0;;){var h=n.charAt(k);switch(h){case "\x3d":if(1===f)g=n.slice(e,k),f=3;else if(2===f)f=3;else throw Error("attribute equal must after attrName");break;case "'":case '"':if(3===f||1===f)if(1===
f&&(b.warning('attribute value must after "\x3d"'),g=n.slice(e,k)),e=k+1,k=n.indexOf(h,e),0<k)l=n.slice(e,k).replace(/&#?\w+;/g,a),d.add(g,l,e-1),f=5;else throw Error("attribute value no end '"+h+"' match");else if(4==f)l=n.slice(e,k).replace(/&#?\w+;/g,a),d.add(g,l,e),b.warning('attribute "'+g+'" missed start quot('+h+")!!"),e=k+1,f=5;else throw Error('attribute value must after "\x3d"');break;case "/":switch(f){case 0:d.setTagName(n.slice(e,k));case 5:case 6:case 7:f=7,d.closed=!0;case 4:case 1:case 2:break;
default:throw Error("attribute invalid close char('/')");}break;case "":return b.error("unexpected end of input"),0==f&&d.setTagName(n.slice(e,k)),k;case "\x3e":switch(f){case 0:d.setTagName(n.slice(e,k));case 5:case 6:case 7:break;case 4:case 1:l=n.slice(e,k),"/"===l.slice(-1)&&(d.closed=!0,l=l.slice(0,-1));case 2:2===f&&(l=g);4==f?(b.warning('attribute "'+l+'" missed quot(")!!'),d.add(g,l.replace(/&#?\w+;/g,a),e)):("http://www.w3.org/1999/xhtml"===c[""]&&l.match(/^(?:disabled|checked|selected)$/i)||
b.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),d.add(l,l,e));break;case 3:throw Error("attribute value missed!!");}return k;case "\u0080":h=" ";default:if(" ">=h)switch(f){case 0:d.setTagName(n.slice(e,k));f=6;break;case 1:g=n.slice(e,k);f=2;break;case 4:l=n.slice(e,k).replace(/&#?\w+;/g,a),b.warning('attribute "'+l+'" missed quot(")!!'),d.add(g,l,e);case 5:f=6}else switch(f){case 2:"http://www.w3.org/1999/xhtml"===c[""]&&g.match(/^(?:disabled|checked|selected)$/i)||b.warning('attribute "'+
g+'" missed value!! "'+g+'" instead2!!');d.add(g,g,e);e=k;f=1;break;case 5:b.warning('attribute space is required"'+g+'"!!');case 6:f=1;e=k;break;case 3:f=4;e=k;break;case 7:throw Error("elements closed character '/' and '\x3e' must be connected to");}}k++}}function Xg(n,e,d){for(var c=n.tagName,a=null,b=n.length;b--;){var g=n[b],l=g.qName,k=g.value,f=l.indexOf(":");if(0<f){var h=g.prefix=l.slice(0,f);f=l.slice(f+1);h="xmlns"===h&&f}else f=l,h="xmlns"===l&&"";g.localName=f;if(!1!==h){if(null==a){a=
{};f=void 0;l=d;var m=d={};for(f in l)m[f]=l[f]}d[h]=a[h]=k;g.uri="http://www.w3.org/2000/xmlns/";e.startPrefixMapping(h,k)}}for(b=n.length;b--;)if(g=n[b],h=g.prefix)"xml"===h&&(g.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==h&&(g.uri=d[h||""]);f=c.indexOf(":");0<f?(h=n.prefix=c.slice(0,f),f=n.localName=c.slice(f+1)):(h=null,f=n.localName=c);b=n.uri=d[h||""];e.startElement(b,f,c,n);if(n.closed){if(e.endElement(b,f,c),a)for(h in a)e.endPrefixMapping(h)}else return n.currentNSMap=d,n.localNSMap=
a,!0}function Rk(n,e,d,c,a){if(/^(?:script|textarea)$/i.test(d)){var b=n.indexOf("\x3c/"+d+"\x3e",e);n=n.substring(e+1,b);if(/[&<]/.test(n)){if(/^script$/i.test(d))return a.characters(n,0,n.length),b;n=n.replace(/&#?\w+;/g,c);a.characters(n,0,n.length);return b}}return e+1}function Qk(n,e,d,c){var a=c[d];null==a&&(a=n.lastIndexOf("\x3c/"+d+"\x3e"),a<e&&(a=n.lastIndexOf("\x3c/"+d)),c[d]=a);return a<e}function Ok(n,e,d,c){switch(n.charAt(e+2)){case "-":if("-"===n.charAt(e+3)){var a=n.indexOf("--\x3e",
e+4);if(a>e)return d.comment(n,e+4,a-e-4),a+3;c.error("Unclosed comment")}break;default:if("CDATA["==n.substr(e+3,6))return a=n.indexOf("]]\x3e",e+9),d.startCDATA(),d.characters(n,e+9,a-e-9),d.endCDATA(),a+3;a:{c=[];a=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;a.lastIndex=e;for(a.exec(n);e=a.exec(n);)if(c.push(e),e[1]){a=c;break a}a=void 0}var b=a.length;if(1<b&&/!doctype/i.test(a[0][0]))return n=a[1][0],e=3<b&&/^public$/i.test(a[2][0])&&a[3][0],c=4<b&&a[4][0],a=a[b-1],d.startDTD(n,e&&e.replace(/^(['"])(.*?)\1$/,
"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),d.endDTD(),a.index+a[0].length}return-1}function Nk(n,e,d){var c=n.indexOf("?\x3e",e);return c&&(n=n.substring(e,c).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/))?(d.processingInstruction(n[1],n[2]),c+2):-1}function Vg(n){}function Dd(n,e){n.__proto__=e;return n}function Zc(n,e){for(var d in n)e[d]=n[d]}function eb(n,e){var d=n.prototype;if(Object.create){var c=Object.create(e.prototype);d.__proto__=c}d instanceof e||(c=function(){},c.prototype=e.prototype,c=new c,
Zc(d,c),n.prototype=d=c);d.constructor!=n&&("function"!=typeof n&&console.error("unknow Class:"+n),d.constructor=n)}function xc(n,e){if(e instanceof Error)var d=e;else d=this,Error.call(this,La[n]),this.message=La[n],Error.captureStackTrace&&Error.captureStackTrace(this,xc);d.code=n;e&&(this.message=this.message+": "+e);return d}function Yb(){}function $c(n,e){this._node=n;this._refresh=e;Ne(this)}function Ne(n){var e=n._node._inc||n._node.ownerDocument._inc;if(n._inc!=e){var d=n._refresh(n._node);
Yg(n,"length",d.length);Zc(d,n);n._inc=e}}function Ed(){}function Zg(n,e){for(var d=n.length;d--;)if(n[d]===e)return d}function $g(n,e,d,c){c?e[Zg(e,c)]=d:e[e.length++]=d;n&&(d.ownerElement=n,e=n.ownerDocument)&&(c&&ah(e,n,c),e&&e._inc++,"http://www.w3.org/2000/xmlns/"==d.namespaceURI&&(n._nsMap[d.prefix?d.localName:""]=d.value))}function bh(n,e,d){var c=Zg(e,d);if(0<=c){for(var a=e.length-1;c<a;)e[c]=e[++c];e.length=a;n&&(e=n.ownerDocument)&&(ah(e,n,d),d.ownerElement=null)}else throw xc(Sk,Error(n.tagName+
"@"+d));}function ch(n){this._features={};if(n)for(var e in n)this._features=n[e]}function $a(){}function dh(n){return"\x3c"==n&&"\x26lt;"||"\x3e"==n&&"\x26gt;"||"\x26"==n&&"\x26amp;"||'"'==n&&"\x26quot;"||"\x26#"+n.charCodeAt()+";"}function Fd(n,e){if(e(n))return!0;if(n=n.firstChild){do if(Fd(n,e))return!0;while(n=n.nextSibling)}}function ad(){}function ah(n,e,d,c){n&&n._inc++;"http://www.w3.org/2000/xmlns/"==d.namespaceURI&&delete e._nsMap[d.prefix?d.localName:""]}function Oe(n,e,d){if(n&&n._inc)if(n._inc++,
n=e.childNodes,d)n[n.length++]=d;else{e=e.firstChild;for(d=0;e;)n[d++]=e,e=e.nextSibling;n.length=d}}function eh(n,e){var d=e.previousSibling,c=e.nextSibling;d?d.nextSibling=c:n.firstChild=c;c?c.previousSibling=d:n.lastChild=d;Oe(n.ownerDocument,n);return e}function fh(n,e,d){var c=e.parentNode;c&&c.removeChild(e);if(e.nodeType===Qb){c=e.firstChild;if(null==c)return e;var a=e.lastChild}else c=a=e;var b=d?d.previousSibling:n.lastChild;c.previousSibling=b;a.nextSibling=d;b?b.nextSibling=c:n.firstChild=
c;null==d?n.lastChild=a:d.previousSibling=a;do c.parentNode=n;while(c!==a&&(c=c.nextSibling));Oe(n.ownerDocument||n,n);e.nodeType==Qb&&(e.firstChild=e.lastChild=null);return e}function yc(){this._nsMap={}}function Gd(){}function bd(){}function Pe(){}function Qe(){}function Re(){}function Se(){}function gh(){}function hh(){}function Te(){}function Hd(){}function Ue(){}function ih(){}function jh(n,e){var d=[],c=9==this.nodeType?this.documentElement:this,a=c.prefix,b=c.namespaceURI;if(b&&null==a&&(a=
c.lookupPrefix(b),null==a))var g=[{namespace:b,prefix:null}];zc(this,d,n,e,g);return d.join("")}function kh(n,e,d){e=n.prefix||"";n=n.namespaceURI;if(!e&&!n||"xml"===e&&"http://www.w3.org/XML/1998/namespace"===n||"http://www.w3.org/2000/xmlns/"==n)return!1;for(var c=d.length;c--;){var a=d[c];if(a.prefix==e)return a.namespace!=n}return!0}function zc(n,e,d,c,a){if(c)if(n=c(n)){if("string"==typeof n){e.push(n);return}}else return;switch(n.nodeType){case Gb:a||(a=[]);var b=n.attributes,g=b.length,l=n.firstChild,
k=n.tagName;d="http://www.w3.org/1999/xhtml"===n.namespaceURI||d;e.push("\x3c",k);for(var f=0;f<g;f++){var h=b.item(f);"xmlns"==h.prefix?a.push({prefix:h.localName,namespace:h.value}):"xmlns"==h.nodeName&&a.push({prefix:"",namespace:h.value})}for(f=0;f<g;f++){h=b.item(f);if(kh(h,d,a)){var m=h.prefix||"",p=h.namespaceURI;e.push(m?" xmlns:"+m:" xmlns",'\x3d"',p,'"');a.push({prefix:m,namespace:p})}zc(h,e,d,c,a)}kh(n,d,a)&&(m=n.prefix||"",p=n.namespaceURI,e.push(m?" xmlns:"+m:" xmlns",'\x3d"',p,'"'),
a.push({prefix:m,namespace:p}));if(l||d&&!/^(?:meta|link|img|br|hr|input)$/i.test(k)){e.push("\x3e");if(d&&/^script$/i.test(k))for(;l;)l.data?e.push(l.data):zc(l,e,d,c,a),l=l.nextSibling;else for(;l;)zc(l,e,d,c,a),l=l.nextSibling;e.push("\x3c/",k,"\x3e")}else e.push("/\x3e");break;case lh:case Qb:for(l=n.firstChild;l;)zc(l,e,d,c,a),l=l.nextSibling;break;case Ac:return e.push(" ",n.name,'\x3d"',n.value.replace(/[<&"]/g,dh),'"');case Id:return e.push(n.data.replace(/[<&]/g,dh));case mh:return e.push("\x3c![CDATA[",
n.data,"]]\x3e");case nh:return e.push("\x3c!--",n.data,"--\x3e");case oh:d=n.publicId;c=n.systemId;e.push("\x3c!DOCTYPE ",n.name);d?(e.push(' PUBLIC "',d),c&&"."!=c&&e.push('" "',c),e.push('"\x3e')):c&&"."!=c?e.push(' SYSTEM "',c,'"\x3e'):((n=n.internalSubset)&&e.push(" [",n,"]"),e.push("\x3e"));break;case ph:return e.push("\x3c?",n.target," ",n.data,"?\x3e");case qh:return e.push("\x26",n.nodeName,";");default:e.push("??",n.nodeName)}}function rh(n,e,d){switch(e.nodeType){case Gb:var c=e.cloneNode(!1);
c.ownerDocument=n;case Qb:break;case Ac:d=!0}c||(c=e.cloneNode(!1));c.ownerDocument=n;c.parentNode=null;if(d)for(e=e.firstChild;e;)c.appendChild(rh(n,e,d)),e=e.nextSibling;return c}function Ve(n,e,d){var c=new e.constructor;for(b in e){var a=e[b];"object"!=typeof a&&a!=c[b]&&(c[b]=a)}e.childNodes&&(c.childNodes=new Yb);c.ownerDocument=n;switch(c.nodeType){case Gb:var b=e.attributes;var g=c.attributes=new Ed;a=b.length;g._ownerElement=c;for(g=0;g<a;g++)c.setAttributeNode(Ve(n,b.item(g),!0));break;
case Ac:d=!0}if(d)for(e=e.firstChild;e;)c.appendChild(Ve(n,e,d)),e=e.nextSibling;return c}function Yg(n,e,d){n[e]=d}function sh(n,e){return function(d){var c=this;if(e){if(Bc&&!d)return d=e.toString().replace(/^function.+?{/,"").slice(0,-1),d=th(d),this[We]=new Bc(d),Tk(this[We],d),this[We];var a={postMessage:function(b){c.onmessage&&setTimeout(function(){c.onmessage({data:b,target:a})})}};e.call(a);this.postMessage=function(b){setTimeout(function(){a.onmessage({data:b,target:c})})};this.isThisThread=
!0}else return new Bc(n)}}function th(n){try{return Cc.createObjectURL(new Blob([n],{type:"application/javascript"}))}catch(d){var e=new Uk;e.append(n);return Cc.createObjectURL(e.getBlob(type))}}function Tk(n,e){if(n&&e){var d=n.terminate;n.objURL=e;n.terminate=function(){n.objURL&&Cc.revokeObjectURL(n.objURL);d.call(n)}}}function Zb(){}G=G&&Object.prototype.hasOwnProperty.call(G,"default")?G["default"]:G;N=N&&Object.prototype.hasOwnProperty.call(N,"default")?N["default"]:N;var db=[],rk=function(n,
e){return function(d,c,a){c=e.levels[c];var b=new RegExp("^("+c+")$");"log"!==d&&a.unshift(d.toUpperCase()+":");a.unshift(n+":");if(db){db.push([].concat(a));var g=db.length-1E3;db.splice(0,0<g?g:0)}if(G.console&&((g=G.console[d])||"debug"!==d||(g=G.console.info||G.console.log),g&&c&&b.test(d)))g[Array.isArray(a)?"apply":"call"](G.console,a)}},pa=xb("VIDEOJS"),uh=pa.createLogger,Tc=ma(function(n){function e(){n.exports=e=Object.assign||function(d){for(var c=1;c<arguments.length;c++){var a=arguments[c],
b;for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&(d[b]=a[b])}return d};return e.apply(this,arguments)}n.exports=e}),sk=Object.prototype.toString,yg=function(n){return Wa(n)?Object.keys(n):[]},Xb=rc("querySelector"),vh=rc("querySelectorAll"),wh=Object.freeze({__proto__:null,isReal:Tb,isEl:Ob,isInFrame:dc,createEl:xa,textContent:Ub,prependTo:rb,hasClass:Pb,addClass:sb,removeClass:Vb,toggleClass:sc,setAttributes:xd,getAttributes:X,getAttribute:function(n,e){return n.getAttribute(e)},setAttribute:function(n,
e,d){n.setAttribute(e,d)},removeAttribute:function(n,e){n.removeAttribute(e)},blockTextSelection:va,unblockTextSelection:ib,getBoundingClientRect:Aa,findPosition:yb,getPointerPosition:tb,isTextNode:zg,emptyEl:xe,normalizeContent:Ag,appendContent:we,insertContent:Bg,isSingleLeftClick:tc,$:Xb,$$:vh}),Cg=!1,ze,tk=function(){if(Tb()&&!1!==ze.options.autoSetup){var n=Array.prototype.slice.call(N.getElementsByTagName("video")),e=Array.prototype.slice.call(N.getElementsByTagName("audio")),d=Array.prototype.slice.call(N.getElementsByTagName("video-js"));
if((n=n.concat(e,d))&&0<n.length)for(e=0,d=n.length;e<d;e++){var c=n[e];if(c&&c.getAttribute)void 0===c.player&&null!==c.getAttribute("data-setup")&&ze(c);else{ye(1);break}}else Cg||ye(1)}};Tb()&&("complete"===N.readyState?Ae():G.addEventListener("load",Ae));var xh=function(n){var e=N.createElement("style");e.className=n;return e},yh=function(n,e){n.styleSheet?n.styleSheet.cssText=e:n.textContent=e},Wb=3,zh;G.WeakMap||(zh=function(){function n(){this.vdata="vdata"+Math.floor(G.performance&&G.performance.now()||
Date.now());this.data={}}var e=n.prototype;e.set=function(d,c){var a=d[this.vdata]||Wb++;d[this.vdata]||(d[this.vdata]=a);this.data[a]=c;return this};e.get=function(d){var c=d[this.vdata];if(c)return this.data[c];pa("We have no data for this element",d)};e.has=function(d){return d[this.vdata]in this.data};e["delete"]=function(d){var c=d[this.vdata];c&&(delete this.data[c],delete d[this.vdata])};return n}());var Xa=G.WeakMap?new WeakMap:new zh,Jd,uk=function(){if("boolean"!==typeof Jd){Jd=!1;try{var n=
Object.defineProperty({},"passive",{get:function(){Jd=!0}});G.addEventListener("test",null,n);G.removeEventListener("test",null,n)}catch(e){}}return Jd},vk=["touchstart","touchmove"],Vk=Object.freeze({__proto__:null,fixEvent:yd,on:jb,off:Ra,trigger:uc,one:zd,any:Eg}),oa=function(n,e,d){e.guid||(e.guid=Wb++);n=e.bind(n);n.guid=d?d+"_"+e.guid:e.guid;return n},jc=function(n,e){var d=G.performance.now();return function(){var c=G.performance.now();c-d>=e&&(n.apply(void 0,arguments),d=c)}},Wk=function(n,
e,d,c){void 0===c&&(c=G);var a,b=function(){var g=this,l=arguments,k=function(){k=a=null;d||n.apply(g,l)};!a&&d&&n.apply(g,l);c.clearTimeout(a);a=c.setTimeout(k,e)};b.cancel=function(){c.clearTimeout(a);a=null};return b},Ma=function(){};Ma.prototype.allowedEvents_={};Ma.prototype.on=function(n,e){var d=this.addEventListener;this.addEventListener=function(){};jb(this,n,e);this.addEventListener=d};Ma.prototype.addEventListener=Ma.prototype.on;Ma.prototype.off=function(n,e){Ra(this,n,e)};Ma.prototype.removeEventListener=
Ma.prototype.off;Ma.prototype.one=function(n,e){var d=this.addEventListener;this.addEventListener=function(){};zd(this,n,e);this.addEventListener=d};Ma.prototype.any=function(n,e){var d=this.addEventListener;this.addEventListener=function(){};Eg(this,n,e);this.addEventListener=d};Ma.prototype.trigger=function(n){var e=n.type||n;"string"===typeof n&&(n={type:e});n=yd(n);if(this.allowedEvents_[e]&&this["on"+e])this["on"+e](n);uc(this,n)};Ma.prototype.dispatchEvent=Ma.prototype.trigger;var cd;Ma.prototype.queueTrigger=
function(n){var e=this;cd||(cd=new Map);var d=n.type||n,c=cd.get(this);c||(c=new Map,cd.set(this,c));var a=c.get(d);c["delete"](d);G.clearTimeout(a);a=G.setTimeout(function(){0===c.size&&(c=null,cd["delete"](e));e.trigger(n)},0);c.set(d,a)};var ec=function(n){return n instanceof Ma||!!n.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"===typeof n[e]})},Xk=function(n,e){ec(n)?e():(n.eventedCallbacks||(n.eventedCallbacks=[]),n.eventedCallbacks.push(e))},Ah=function(n){return"string"===
typeof n&&/\S/.test(n)||Array.isArray(n)&&!!n.length},Xe=function(n){if(!n.nodeName&&!ec(n))throw Error("Invalid target; must be a DOM node or evented object.");},Bh=function(n){if(!Ah(n))throw Error("Invalid event type; must be a non-empty string or array.");},Ch=function(n){if("function"!==typeof n)throw Error("Invalid listener; must be a function.");},Ye=function(n,e){var d=3>e.length||e[0]===n||e[0]===n.eventBusEl_;if(d){var c=n.eventBusEl_;3<=e.length&&e.shift();var a=e[0];e=e[1]}else c=e[0],
a=e[1],e=e[2];Xe(c);Bh(a);Ch(e);e=oa(n,e);return{isTargetingSelf:d,target:c,type:a,listener:e}},kc=function(n,e,d,c){Xe(n);if(n.nodeName)Vk[e](n,d,c);else n[e](d,c)},wk={on:function(){for(var n=this,e=arguments.length,d=Array(e),c=0;c<e;c++)d[c]=arguments[c];e=Ye(this,d);d=e.isTargetingSelf;var a=e.target,b=e.type,g=e.listener;kc(a,"on",b,g);if(!d){var l=function(){return n.off(a,b,g)};l.guid=g.guid;e=function(){return n.off("dispose",l)};e.guid=g.guid;kc(this,"on","dispose",l);kc(a,"on","dispose",
e)}},one:function(){for(var n=this,e=arguments.length,d=Array(e),c=0;c<e;c++)d[c]=arguments[c];e=Ye(this,d);var a=e.target,b=e.type,g=e.listener;e.isTargetingSelf?kc(a,"one",b,g):(e=function k(){n.off(a,b,k);for(var f=arguments.length,h=Array(f),m=0;m<f;m++)h[m]=arguments[m];g.apply(null,h)},e.guid=g.guid,kc(a,"one",b,e))},any:function(){for(var n=this,e=arguments.length,d=Array(e),c=0;c<e;c++)d[c]=arguments[c];e=Ye(this,d);var a=e.target,b=e.type,g=e.listener;e.isTargetingSelf?kc(a,"any",b,g):(e=
function k(){n.off(a,b,k);for(var f=arguments.length,h=Array(f),m=0;m<f;m++)h[m]=arguments[m];g.apply(null,h)},e.guid=g.guid,kc(a,"any",b,e))},off:function(n,e,d){!n||Ah(n)?Ra(this.eventBusEl_,n,e):(Xe(n),Bh(e),Ch(d),d=oa(this,d),this.off("dispose",d),n.nodeName?(Ra(n,e,d),Ra(n,"dispose",d)):ec(n)&&(n.off(e,d),n.off("dispose",d)))},trigger:function(n,e){return uc(this.eventBusEl_,n,e)}},xk={state:{},setState:function(n){var e=this;"function"===typeof n&&(n=n());var d;Ka(n,function(c,a){e.state[a]!==
c&&(d=d||{},d[a]={from:e.state[a],to:c});e.state[a]=c});d&&ec(this)&&this.trigger({changes:d,type:"statechanged"});return d}},Kd=function(n){return"string"!==typeof n?n:n.replace(/./,function(e){return e.toLowerCase()})},Ba=function(n){return"string"!==typeof n?n:n.replace(/./,function(e){return e.toUpperCase()})},Yk=function(n,e){return Ba(n)===Ba(e)},Zk=function(){function n(){this.map_={}}var e=n.prototype;e.has=function(d){return d in this.map_};e["delete"]=function(d){var c=this.has(d);delete this.map_[d];
return c};e.set=function(d,c){this.set_[d]=c;return this};e.forEach=function(d,c){for(var a in this.map_)d.call(c,this.map_[a],a,this)};return n}(),$k=G.Map?G.Map:Zk,al=function(){function n(){this.set_={}}var e=n.prototype;e.has=function(d){return d in this.set_};e["delete"]=function(d){var c=this.has(d);delete this.set_[d];return c};e.add=function(d){this.set_[d]=1;return this};e.forEach=function(d,c){for(var a in this.set_)d.call(c,a,a,this)};return n}(),Ze=G.Set?G.Set:al,U=function(){function n(d,
c,a){this.player_=!d&&this.play?d=this:d;this.isDisposed_=!1;this.parentComponent_=null;this.options_=ya({},this.options_);c=this.options_=ya(this.options_,c);this.id_=c.id||c.el&&c.el.id;this.id_||(this.id_=(d&&d.id&&d.id()||"no_player")+"_component_"+Wb++);this.name_=c.name||null;c.el?this.el_=c.el:!1!==c.createEl&&(this.el_=this.createEl());!1!==c.evented&&Ce(this,{eventBusKey:this.el_?"el_":null});Fg(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_=
{};this.setTimeoutIds_=new Ze;this.setIntervalIds_=new Ze;this.rafIds_=new Ze;this.namedRafs_=new $k;this.clearingTimersOnDispose_=!1;!1!==c.initChildren&&this.initChildren();this.ready(a);!1!==c.reportTouchActivity&&this.enableTouchActivity()}var e=n.prototype;e.dispose=function(){if(!this.isDisposed_){this.trigger({type:"dispose",bubbles:!1});this.isDisposed_=!0;if(this.children_)for(var d=this.children_.length-1;0<=d;d--)this.children_[d].dispose&&this.children_[d].dispose();this.parentComponent_=
this.childNameIndex_=this.childIndex_=this.children_=null;if(this.el_){this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_);if(Xa.has(this.el_))Xa["delete"](this.el_);this.el_=null}this.player_=null}};e.isDisposed=function(){return!!this.isDisposed_};e.player=function(){return this.player_};e.options=function(d){return d?this.options_=ya(this.options_,d):this.options_};e.el=function(){return this.el_};e.createEl=function(d,c,a){return xa(d,c,a)};e.localize=function(d,c,a){void 0===a&&(a=
d);var b=this.player_.language&&this.player_.language(),g=this.player_.languages&&this.player_.languages(),l=g&&g[b];b=b&&b.split("-")[0];g=g&&g[b];l&&l[d]?a=l[d]:g&&g[d]&&(a=g[d]);c&&(a=a.replace(/\{(\d+)\}/g,function(k,f){var h=f=c[f-1];"undefined"===typeof f&&(h=k);return h}));return a};e.contentEl=function(){return this.contentEl_||this.el_};e.id=function(){return this.id_};e.name=function(){return this.name_};e.children=function(){return this.children_};e.getChildById=function(d){return this.childIndex_[d]};
e.getChild=function(d){if(d)return this.childNameIndex_[d]};e.getDescendant=function(){for(var d=arguments.length,c=Array(d),a=0;a<d;a++)c[a]=arguments[a];c=c.reduce(function(b,g){return b.concat(g)},[]);d=this;for(a=0;a<c.length;a++)if(d=d.getChild(c[a]),!d||!d.getChild)return;return d};e.addChild=function(d,c,a){void 0===c&&(c={});void 0===a&&(a=this.children_.length);if("string"===typeof d){var b=Ba(d);d=c.componentClass||b;c.name=b;var g=n.getComponent(d);if(!g)throw Error("Component "+d+" does not exist");
if("function"!==typeof g)return null;c=new g(this.player_||this,c)}else c=d;c.parentComponent_&&c.parentComponent_.removeChild(c);this.children_.splice(a,0,c);c.parentComponent_=this;"function"===typeof c.id&&(this.childIndex_[c.id()]=c);if(b=b||c.name&&Ba(c.name()))this.childNameIndex_[b]=c,this.childNameIndex_[Kd(b)]=c;"function"===typeof c.el&&c.el()&&(b=null,this.children_[a+1]&&(this.children_[a+1].el_?b=this.children_[a+1].el_:Ob(this.children_[a+1])&&(b=this.children_[a+1])),this.contentEl().insertBefore(c.el(),
b));return c};e.removeChild=function(d){"string"===typeof d&&(d=this.getChild(d));if(d&&this.children_){for(var c=!1,a=this.children_.length-1;0<=a;a--)if(this.children_[a]===d){c=!0;this.children_.splice(a,1);break}c&&(d.parentComponent_=null,this.childIndex_[d.id()]=null,this.childNameIndex_[Ba(d.name())]=null,this.childNameIndex_[Kd(d.name())]=null,(c=d.el())&&c.parentNode===this.contentEl()&&this.contentEl().removeChild(d.el()))}};e.initChildren=function(){var d=this,c=this.options_.children;
if(c){var a=this.options_,b=n.getComponent("Tech");var g=Array.isArray(c)?c:Object.keys(c);g.concat(Object.keys(this.options_).filter(function(l){return!g.some(function(k){return"string"===typeof k?l===k:l===k.name})})).map(function(l){if("string"===typeof l){var k=l;l=c[k]||d.options_[k]||{}}else k=l.name;return{name:k,opts:l}}).filter(function(l){return(l=n.getComponent(l.opts.componentClass||Ba(l.name)))&&!b.isTech(l)}).forEach(function(l){var k=l.name;l=l.opts;void 0!==a[k]&&(l=a[k]);!1!==l&&
(!0===l&&(l={}),l.playerOptions=d.options_.playerOptions,(l=d.addChild(k,l))&&(d[k]=l))})}};e.buildCSSClass=function(){return""};e.ready=function(d,c){void 0===c&&(c=!1);d&&(this.isReady_?c?d.call(this):this.setTimeout(d,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(d)))};e.triggerReady=function(){this.isReady_=!0;this.setTimeout(function(){var d=this.readyQueue_;this.readyQueue_=[];d&&0<d.length&&d.forEach(function(c){c.call(this)},this);this.trigger("ready")},1)};e.$=function(d,
c){return Xb(d,c||this.contentEl())};e.$$=function(d,c){return vh(d,c||this.contentEl())};e.hasClass=function(d){return Pb(this.el_,d)};e.addClass=function(d){sb(this.el_,d)};e.removeClass=function(d){Vb(this.el_,d)};e.toggleClass=function(d,c){sc(this.el_,d,c)};e.show=function(){this.removeClass("vjs-hidden")};e.hide=function(){this.addClass("vjs-hidden")};e.lockShowing=function(){this.addClass("vjs-lock-showing")};e.unlockShowing=function(){this.removeClass("vjs-lock-showing")};e.getAttribute=function(d){return this.el_.getAttribute(d)};
e.setAttribute=function(d,c){this.el_.setAttribute(d,c)};e.removeAttribute=function(d){this.el_.removeAttribute(d)};e.width=function(d,c){return this.dimension("width",d,c)};e.height=function(d,c){return this.dimension("height",d,c)};e.dimensions=function(d,c){this.width(d,!0);this.height(c)};e.dimension=function(d,c,a){if(void 0!==c){if(null===c||c!==c)c=0;-1!==(""+c).indexOf("%")||-1!==(""+c).indexOf("px")?this.el_.style[d]=c:this.el_.style[d]="auto"===c?"":c+"px";a||this.trigger("componentresize")}else{if(!this.el_)return 0;
c=this.el_.style[d];a=c.indexOf("px");return-1!==a?parseInt(c.slice(0,a),10):parseInt(this.el_["offset"+Ba(d)],10)}};e.currentDimension=function(d){if("width"!==d&&"height"!==d)throw Error("currentDimension only accepts width or height value");var c=Qa(this.el_,d);c=parseFloat(c);if(0===c||isNaN(c))d="offset"+Ba(d),c=this.el_[d];return c};e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};e.currentWidth=function(){return this.currentDimension("width")};
e.currentHeight=function(){return this.currentDimension("height")};e.focus=function(){this.el_.focus()};e.blur=function(){this.el_.blur()};e.handleKeyDown=function(d){this.player_&&(d.stopPropagation(),this.player_.handleKeyDown(d))};e.handleKeyPress=function(d){this.handleKeyDown(d)};e.emitTapEvents=function(){var d=0,c=null,a;this.on("touchstart",function(g){1===g.touches.length&&(c={pageX:g.touches[0].pageX,pageY:g.touches[0].pageY},d=G.performance.now(),a=!0)});this.on("touchmove",function(g){if(1<
g.touches.length)a=!1;else if(c){var l=g.touches[0].pageX-c.pageX;g=g.touches[0].pageY-c.pageY;10<Math.sqrt(l*l+g*g)&&(a=!1)}});var b=function(){a=!1};this.on("touchleave",b);this.on("touchcancel",b);this.on("touchend",function(g){c=null;!0===a&&200>G.performance.now()-d&&(g.preventDefault(),this.trigger("tap"))})};e.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var d=oa(this.player(),this.player().reportUserActivity),c;this.on("touchstart",function(){d();this.clearInterval(c);
c=this.setInterval(d,250)});var a=function(b){d();this.clearInterval(c)};this.on("touchmove",d);this.on("touchend",a);this.on("touchcancel",a)}};e.setTimeout=function(d,c){var a=this;d=oa(this,d);this.clearTimersOnDispose_();var b=G.setTimeout(function(){if(a.setTimeoutIds_.has(b))a.setTimeoutIds_["delete"](b);d()},c);this.setTimeoutIds_.add(b);return b};e.clearTimeout=function(d){this.setTimeoutIds_.has(d)&&(this.setTimeoutIds_["delete"](d),G.clearTimeout(d));return d};e.setInterval=function(d,c){d=
oa(this,d);this.clearTimersOnDispose_();d=G.setInterval(d,c);this.setIntervalIds_.add(d);return d};e.clearInterval=function(d){this.setIntervalIds_.has(d)&&(this.setIntervalIds_["delete"](d),G.clearInterval(d));return d};e.requestAnimationFrame=function(d){var c=this;if(!this.supportsRaf_)return this.setTimeout(d,1E3/60);this.clearTimersOnDispose_();d=oa(this,d);var a=G.requestAnimationFrame(function(){if(c.rafIds_.has(a))c.rafIds_["delete"](a);d()});this.rafIds_.add(a);return a};e.requestNamedAnimationFrame=
function(d,c){var a=this;if(!this.namedRafs_.has(d)){this.clearTimersOnDispose_();c=oa(this,c);var b=this.requestAnimationFrame(function(){c();if(a.namedRafs_.has(d))a.namedRafs_["delete"](d)});this.namedRafs_.set(d,b);return d}};e.cancelNamedAnimationFrame=function(d){this.namedRafs_.has(d)&&(this.cancelAnimationFrame(this.namedRafs_.get(d)),this.namedRafs_["delete"](d))};e.cancelAnimationFrame=function(d){if(!this.supportsRaf_)return this.clearTimeout(d);this.rafIds_.has(d)&&(this.rafIds_["delete"](d),
G.cancelAnimationFrame(d));return d};e.clearTimersOnDispose_=function(){var d=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(c){var a=c[1];d[c[0]].forEach(function(b,g){return d[a](g)})});d.clearingTimersOnDispose_=!1}))};n.registerComponent=function(d,c){if("string"!==typeof d||!d)throw Error('Illegal component name, "'+
d+'"; must be a non-empty string.');var a=n.getComponent("Tech");a=a&&a.isTech(c);var b=n===c||n.prototype.isPrototypeOf(c.prototype);if(a||!b)throw Error('Illegal component, "'+d+'"; '+(a?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");d=Ba(d);n.components_||(n.components_={});a=n.getComponent("Player");if("Player"===d&&a&&a.players){var g=a.players;a=Object.keys(g);if(g&&0<a.length&&a.map(function(l){return g[l]}).every(Boolean))throw Error("Can not register Player component after player has been created.");
}n.components_[d]=c;return n.components_[Kd(d)]=c};n.getComponent=function(d){if(d&&n.components_)return n.components_[d]};return n}();U.prototype.supportsRaf_="function"===typeof G.requestAnimationFrame&&"function"===typeof G.cancelAnimationFrame;U.registerComponent("Component",U);var ia=function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n};ma(function(n){function e(d){"@babel/helpers - typeof";n.exports="function"===typeof Symbol&&
"symbol"===typeof Symbol.iterator?e=function(c){return typeof c}:e=function(c){return c&&"function"===typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c};return e(d)}n.exports=e});ma(function(n){function e(d){n.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)};return e(d)}n.exports=e});var Z=function(n,e){n.prototype=Object.create(e.prototype);n.prototype.constructor=n;n.__proto__=e},Na=G.navigator&&G.navigator.userAgent||
"",Dh=/AppleWebKit\/([\d.]+)/i.exec(Na),bl=Dh?parseFloat(Dh.pop()):null,Eh=/iPod/i.test(Na),cl=function(){var n=Na.match(/OS (\d+)_/i);return n&&n[1]?n[1]:null}(),$b=/Android/i.test(Na),$e=function(){var n=Na.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!n)return null;var e=n[1]&&parseFloat(n[1]),d=n[2]&&parseFloat(n[2]);return e&&d?parseFloat(n[1]+"."+n[2]):e?e:null}(),Fh=$b&&5>$e&&537>bl,Gh=/Firefox/i.test(Na),dd=/Edg/i.test(Na),Rb=!dd&&(/Chrome/i.test(Na)||/CriOS/i.test(Na)),Hh=function(){var n=
Na.match(/(Chrome|CriOS)\/(\d+)/);return n&&n[2]?parseFloat(n[2]):null}(),ed=function(){var n=/MSIE\s(\d+)\.\d/.exec(Na);n=n&&parseFloat(n[1]);!n&&/Trident\/7.0/i.test(Na)&&/rv:11.0/.test(Na)&&(n=11);return n}(),af=/Safari/i.test(Na)&&!Rb&&!$b&&!dd,Ih=/Windows/i.test(Na),Dc=Tb()&&("ontouchstart"in G||G.navigator.maxTouchPoints||G.DocumentTouch&&G.document instanceof G.DocumentTouch),bf=/iPad/i.test(Na)||af&&Dc&&!/iPhone/i.test(Na),cf=/iPhone/i.test(Na)&&!bf,Ab=cf||bf||Eh,Ld=(af||Ab)&&!Rb,dl=Object.freeze({__proto__:null,
IS_IPOD:Eh,IOS_VERSION:cl,IS_ANDROID:$b,ANDROID_VERSION:$e,IS_NATIVE_ANDROID:Fh,IS_FIREFOX:Gh,IS_EDGE:dd,IS_CHROME:Rb,CHROME_VERSION:Hh,IE_VERSION:ed,IS_SAFARI:af,IS_WINDOWS:Ih,TOUCH_ENABLED:Dc,IS_IPAD:bf,IS_IPHONE:cf,IS_IOS:Ab,IS_ANY_SAFARI:Ld}),df={prefixed:!0},Md=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror fullscreen".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror -webkit-full-screen".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror -moz-full-screen".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError -ms-fullscreen".split(" ")],Jh=Md[0],Nd=0;for(;Nd<Md.length;Nd++)if(Md[Nd][1]in N){var Od=Md[Nd];break}if(Od){for(var Pd=0;Pd<Od.length;Pd++)df[Jh[Pd]]=Od[Pd];df.prefixed=Od[0]!==Jh[0]}Ya.prototype.code=0;Ya.prototype.message="";Ya.prototype.status=
null;Ya.errorTypes="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");Ya.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",
5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Ec=0;Ec<Ya.errorTypes.length;Ec++)Ya[Ya.errorTypes[Ec]]=Ec,Ya.prototype[Ya.errorTypes[Ec]]=Ec;var ef=function(n){return"kind label language id inBandMetadataTrackDispatchType mode src".split(" ").reduce(function(e,d,c){n[d]&&(e[d]=n[d]);return e},{cues:n.cues&&Array.prototype.map.call(n.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})},Kh={textTracksToJson:function(n){var e=n.$$("track"),
d=Array.prototype.map.call(e,function(c){return c.track});return Array.prototype.map.call(e,function(c){var a=ef(c.track);c.src&&(a.src=c.src);return a}).concat(Array.prototype.filter.call(n.textTracks(),function(c){return-1===d.indexOf(c)}).map(ef))},jsonToTextTracks:function(n,e){n.forEach(function(d){var c=e.addRemoteTextTrack(d).track;!d.src&&d.cues&&d.cues.forEach(function(a){return c.addCue(a)})});return e.textTracks()},trackToJson_:ef},ka=ma(function(n,e){function d(l){if(l&&"object"===typeof l){var k=
l.which||l.keyCode||l.charCode;k&&(l=k)}if("number"===typeof l)return b[l];l=String(l);if((k=c[l.toLowerCase()])||(k=a[l.toLowerCase()]))return k;if(1===l.length)return l.charCodeAt(0)}d.isEventKey=function(l,k){if(l&&"object"===typeof l){l=l.which||l.keyCode||l.charCode;if(null===l||void 0===l)return!1;if("string"===typeof k){var f=c[k.toLowerCase()];if(f||(f=a[k.toLowerCase()]))return f===l}else if("number"===typeof k)return k===l;return!1}};e=n.exports=d;var c=e.code=e.codes={backspace:8,tab:9,
enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"\x3d":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=e.aliases={windows:91,"\u21e7":16,"\u2325":18,
"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(n=97;123>n;n++)c[String.fromCharCode(n)]=n-32;for(n=48;58>n;n++)c[n-48]=n;for(n=1;13>n;n++)c["f"+n]=n+111;for(n=0;10>n;n++)c["numpad "+n]=n+96;var b=e.names=e.title={};for(n in c)b[c[n]]=n;for(var g in a)c[g]=a[g]}),Fc=function(n){function e(c,a){c=n.call(this,c,a)||this;c.opened_=c.hasBeenOpened_=c.hasBeenFilled_=!1;c.closeable(!c.options_.uncloseable);
c.content(c.options_.content);c.contentEl_=xa("div",{className:"vjs-modal-dialog-content"},{role:"document"});c.descEl_=xa("p",{className:"vjs-modal-dialog-description vjs-control-text",id:c.el().getAttribute("aria-describedby")});Ub(c.descEl_,c.description());c.el_.appendChild(c.descEl_);c.el_.appendChild(c.contentEl_);return c}Z(e,n);var d=e.prototype;d.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description",
"aria-hidden":"true","aria-label":this.label(),role:"dialog"})};d.dispose=function(){this.previouslyActiveEl_=this.descEl_=this.contentEl_=null;n.prototype.dispose.call(this)};d.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+n.prototype.buildCSSClass.call(this)};d.label=function(){return this.localize(this.options_.label||"Modal Window")};d.description=function(){var c=this.options_.description||this.localize("This is a modal window.");this.closeable()&&(c+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button."));
return c};d.open=function(){if(!this.opened_){var c=this.player();this.trigger("beforemodalopen");this.opened_=!0;(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill();this.wasPlaying_=!c.paused();this.options_.pauseOnOpen&&this.wasPlaying_&&c.pause();this.on("keydown",this.handleKeyDown);this.hadControls_=c.controls();c.controls(!1);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=!0}};d.opened=
function(c){if("boolean"===typeof c)this[c?"open":"close"]();return this.opened_};d.close=function(){if(this.opened_){var c=this.player();this.trigger("beforemodalclose");this.opened_=!1;this.wasPlaying_&&this.options_.pauseOnOpen&&c.play();this.off("keydown",this.handleKeyDown);this.hadControls_&&c.controls(!0);this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();this.options_.temporary&&this.dispose()}};d.closeable=function(c){if("boolean"===
typeof c){c=this.closeable_=!!c;var a=this.getChild("closeButton");if(c&&!a){var b=this.contentEl_;this.contentEl_=this.el_;a=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=b;this.on(a,"close",this.close)}!c&&a&&(this.off(a,"close",this.close),this.removeChild(a),a.dispose())}return this.closeable_};d.fill=function(){this.fillWith(this.content())};d.fillWith=function(c){var a=this.contentEl(),b=a.parentNode,g=a.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=
!0;b.removeChild(a);this.empty();Bg(a,c);this.trigger("modalfill");g?b.insertBefore(a,g):b.appendChild(a);(c=this.getChild("closeButton"))&&b.appendChild(c.el_)};d.empty=function(){this.trigger("beforemodalempty");xe(this.contentEl());this.trigger("modalempty")};d.content=function(c){"undefined"!==typeof c&&(this.content_=c);return this.content_};d.conditionalFocus_=function(){var c=N.activeElement,a=this.player_.el_;this.previouslyActiveEl_=null;if(a.contains(c)||a===c)this.previouslyActiveEl_=c,
this.focus()};d.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)};d.handleKeyDown=function(c){c.stopPropagation();if(ka.isEventKey(c,"Escape")&&this.closeable())c.preventDefault(),this.close();else if(ka.isEventKey(c,"Tab")){for(var a=this.focusableEls_(),b=this.el_.querySelector(":focus"),g,l=0;l<a.length;l++)if(b===a[l]){g=l;break}N.activeElement===this.el_&&(g=0);c.shiftKey&&0===g?(a[a.length-1].focus(),c.preventDefault()):c.shiftKey||
g!==a.length-1||(a[0].focus(),c.preventDefault())}};d.focusableEls_=function(){var c=this.el_.querySelectorAll("*");return Array.prototype.filter.call(c,function(a){return(a instanceof G.HTMLAnchorElement||a instanceof G.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof G.HTMLInputElement||a instanceof G.HTMLSelectElement||a instanceof G.HTMLTextAreaElement||a instanceof G.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof G.HTMLIFrameElement||a instanceof G.HTMLObjectElement||a instanceof
G.HTMLEmbedElement||a.hasAttribute("tabindex")&&-1!==a.getAttribute("tabindex")||a.hasAttribute("contenteditable")})};return e}(U);Fc.prototype.options_={pauseOnOpen:!0,temporary:!0};U.registerComponent("ModalDialog",Fc);var Gc=function(n){function e(c){void 0===c&&(c=[]);var a=n.call(this)||this;a.tracks_=[];Object.defineProperty(ia(a),"length",{get:function(){return this.tracks_.length}});for(var b=0;b<c.length;b++)a.addTrack(c[b]);return a}Z(e,n);var d=e.prototype;d.addTrack=function(c){var a=
this.tracks_.length;""+a in this||Object.defineProperty(this,a,{get:function(){return this.tracks_[a]}});-1===this.tracks_.indexOf(c)&&(this.tracks_.push(c),this.trigger({track:c,type:"addtrack",target:this}))};d.removeTrack=function(c){for(var a,b=0,g=this.length;b<g;b++)if(this[b]===c){a=this[b];a.off&&a.off();this.tracks_.splice(b,1);break}a&&this.trigger({track:a,type:"removetrack",target:this})};d.getTrackById=function(c){for(var a=null,b=0,g=this.length;b<g;b++){var l=this[b];if(l.id===c){a=
l;break}}return a};return e}(Ma);Gc.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var el in Gc.prototype.allowedEvents_)Gc.prototype["on"+el]=null;var ff=function(n,e){for(var d=0;d<n.length;d++)Object.keys(n[d]).length&&e.id!==n[d].id&&(n[d].enabled=!1)},fl=function(n){function e(c){void 0===c&&(c=[]);for(var a=c.length-1;0<=a;a--)if(c[a].enabled){ff(c,c[a]);break}c=n.call(this,c)||this;c.changing_=!1;return c}Z(e,n);var d=e.prototype;d.addTrack=function(c){var a=
this;c.enabled&&ff(this,c);n.prototype.addTrack.call(this,c);c.addEventListener&&(c.enabledChange_=function(){a.changing_||(a.changing_=!0,ff(a,c),a.changing_=!1,a.trigger("change"))},c.addEventListener("enabledchange",c.enabledChange_))};d.removeTrack=function(c){n.prototype.removeTrack.call(this,c);c.removeEventListener&&c.enabledChange_&&(c.removeEventListener("enabledchange",c.enabledChange_),c.enabledChange_=null)};return e}(Gc),gf=function(n,e){for(var d=0;d<n.length;d++)Object.keys(n[d]).length&&
e.id!==n[d].id&&(n[d].selected=!1)},gl=function(n){function e(c){void 0===c&&(c=[]);for(var a=c.length-1;0<=a;a--)if(c[a].selected){gf(c,c[a]);break}c=n.call(this,c)||this;c.changing_=!1;Object.defineProperty(ia(c),"selectedIndex",{get:function(){for(var b=0;b<this.length;b++)if(this[b].selected)return b;return-1},set:function(){}});return c}Z(e,n);var d=e.prototype;d.addTrack=function(c){var a=this;c.selected&&gf(this,c);n.prototype.addTrack.call(this,c);c.addEventListener&&(c.selectedChange_=function(){a.changing_||
(a.changing_=!0,gf(a,c),a.changing_=!1,a.trigger("change"))},c.addEventListener("selectedchange",c.selectedChange_))};d.removeTrack=function(c){n.prototype.removeTrack.call(this,c);c.removeEventListener&&c.selectedChange_&&(c.removeEventListener("selectedchange",c.selectedChange_),c.selectedChange_=null)};return e}(Gc),Lh=function(n){function e(){return n.apply(this,arguments)||this}Z(e,n);var d=e.prototype;d.addTrack=function(c){var a=this;n.prototype.addTrack.call(this,c);this.queueChange_||(this.queueChange_=
function(){return a.queueTrigger("change")});this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return a.trigger("selectedlanguagechange")});c.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(c.kind)&&c.addEventListener("modechange",this.triggerSelectedlanguagechange_)};d.removeTrack=function(c){n.prototype.removeTrack.call(this,c);c.removeEventListener&&(this.queueChange_&&c.removeEventListener("modechange",this.queueChange_),
this.selectedlanguagechange_&&c.removeEventListener("modechange",this.triggerSelectedlanguagechange_))};return e}(Gc),hl=function(){function n(d){void 0===d&&(d=[]);this.trackElements_=[];Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var c=0,a=d.length;c<a;c++)this.addTrackElement_(d[c])}var e=n.prototype;e.addTrackElement_=function(d){var c=this.trackElements_.length;""+c in this||Object.defineProperty(this,c,{get:function(){return this.trackElements_[c]}});
-1===this.trackElements_.indexOf(d)&&this.trackElements_.push(d)};e.getTrackElementByTrack_=function(d){for(var c,a=0,b=this.trackElements_.length;a<b;a++)if(d===this.trackElements_[a].track){c=this.trackElements_[a];break}return c};e.removeTrackElement_=function(d){for(var c=0,a=this.trackElements_.length;c<a;c++)if(d===this.trackElements_[c]){this.trackElements_[c].track&&"function"===typeof this.trackElements_[c].track.off&&this.trackElements_[c].track.off();"function"===typeof this.trackElements_[c].off&&
this.trackElements_[c].off();this.trackElements_.splice(c,1);break}};return n}(),Mh=function(){function n(d){n.prototype.setCues_.call(this,d);Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=n.prototype;e.setCues_=function(d){var c=this.length||0,a=0,b=d.length;this.cues_=d;this.length_=d.length;d=function(g){""+g in this||Object.defineProperty(this,""+g,{get:function(){return this.cues_[g]}})};if(c<b)for(a=c;a<b;a++)d.call(this,a)};e.getCueById=function(d){for(var c=
null,a=0,b=this.length;a<b;a++){var g=this[a];if(g.id===d){c=g;break}}return c};return n}(),il={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},jl={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},kl={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Nh={disabled:"disabled",hidden:"hidden",
showing:"showing"},hf=function(n){function e(d){void 0===d&&(d={});var c=n.call(this)||this;var a={id:d.id||"vjs_track_"+Wb++,kind:d.kind||"",label:d.label||"",language:d.language||""};d=function(g){Object.defineProperty(ia(c),g,{get:function(){return a[g]},set:function(){}})};for(var b in a)d(b);return c}Z(e,n);return e}(Ma),jf=function(n){var e="protocol hostname port pathname search hash host".split(" "),d=N.createElement("a");d.href=n;var c=""===d.host&&"file:"!==d.protocol;if(c){var a=N.createElement("div");
a.innerHTML='\x3ca href\x3d"'+n+'"\x3e\x3c/a\x3e';d=a.firstChild;a.setAttribute("style","display:none; position:absolute;");N.body.appendChild(a)}n={};for(var b=0;b<e.length;b++)n[e[b]]=d[e[b]];"http:"===n.protocol&&(n.host=n.host.replace(/:80$/,""));"https:"===n.protocol&&(n.host=n.host.replace(/:443$/,""));n.protocol||(n.protocol=G.location.protocol);c&&N.body.removeChild(a);return n},Oh=function(n){if(!n.match(/^https?:\/\//)){var e=N.createElement("div");e.innerHTML='\x3ca href\x3d"'+n+'"\x3ex\x3c/a\x3e';
n=e.firstChild.href}return n},kf=function(n){return"string"===typeof n&&(n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(n))?n.pop().toLowerCase():""},Qd=function(n,e){void 0===e&&(e=G.location);n=jf(n);return(":"===n.protocol?e.protocol:n.protocol)+n.host!==e.protocol+e.host},ll=Object.freeze({__proto__:null,parseUrl:jf,getAbsoluteURL:Oh,getFileExtension:kf,isCrossOrigin:Qd}),zk=Object.prototype.toString,Ak=function(n){var e={};if(!n)return e;n.trim().split("\n").forEach(function(d){var c=
d.indexOf(":"),a=d.slice(0,c).trim().toLowerCase();d=d.slice(c+1).trim();"undefined"===typeof e[a]?e[a]=d:Array.isArray(e[a])?e[a].push(d):e[a]=[e[a],d]});return e};zb.XMLHttpRequest=G.XMLHttpRequest||Bk;zb.XDomainRequest="withCredentials"in new zb.XMLHttpRequest?zb.XMLHttpRequest:G.XDomainRequest;(function(n,e){for(var d=0;d<n.length;d++)e(n[d])})("get put post patch head delete".split(" "),function(n){zb["delete"===n?"del":n]=function(e,d,c){d=Ig(e,d,c);d.method=n.toUpperCase();return Jg(d)}});
zb["default"]=zb;var Ph=function(n,e){var d=new G.WebVTT.Parser(G,G.vttjs,G.WebVTT.StringDecoder()),c=[];d.oncue=function(a){e.addCue(a)};d.onparsingerror=function(a){c.push(a)};d.onflush=function(){e.trigger({type:"loadeddata",target:e})};d.parse(n);0<c.length&&(G.console&&G.console.groupCollapsed&&G.console.groupCollapsed("Text Track parsing errors for "+e.src),c.forEach(function(a){return pa.error(a)}),G.console&&G.console.groupEnd&&G.console.groupEnd());d.flush()},Qh=function(n,e){var d={uri:n};
if(n=Qd(n))d.cors=n;if(n="use-credentials"===e.tech_.crossOrigin())d.withCredentials=n;zb(d,oa(this,function(c,a,b){if(c)return pa.error(c,a);e.loaded_=!0;"function"!==typeof G.WebVTT?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],function(g){if("vttjserror"===g.type)pa.error("vttjs failed to load, stopping trying to process "+e.src);else return Ph(b,e)}):Ph(b,e)}))},fd=function(n){function e(c){void 0===c&&(c={});if(!c.tech)throw Error("A tech was not provided.");c=ya(c,{kind:kl[c.kind]||"subtitles",
language:c.language||c.srclang||""});var a=Nh[c.mode]||"disabled",b=c["default"];if("metadata"===c.kind||"chapters"===c.kind)a="hidden";var g=n.call(this,c)||this;g.tech_=c.tech;g.cues_=[];g.activeCues_=[];g.preload_=!1!==g.tech_.preloadTextTracks;var l=new Mh(g.cues_),k=new Mh(g.activeCues_),f=!1,h=oa(ia(g),function(){this.activeCues=this.activeCues;f&&(this.trigger("cuechange"),f=!1)});"disabled"!==a&&g.tech_.ready(function(){g.tech_.on("timeupdate",h)},!0);Object.defineProperties(ia(g),{"default":{get:function(){return b},
set:function(){}},mode:{get:function(){return a},set:function(m){var p=this;Nh[m]&&(a=m,this.preload_||"disabled"===a||0!==this.cues.length||Qh(this.src,this),"disabled"!==a?this.tech_.ready(function(){p.tech_.on("timeupdate",h)},!0):this.tech_.off("timeupdate",h),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?l:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return k;for(var m=this.tech_.currentTime(),p=[],q=0,r=this.cues.length;q<
r;q++){var u=this.cues[q];u.startTime<=m&&u.endTime>=m?p.push(u):u.startTime===u.endTime&&u.startTime<=m&&u.startTime+.5>=m&&p.push(u)}f=!1;if(p.length!==this.activeCues_.length)f=!0;else for(m=0;m<p.length;m++)-1===this.activeCues_.indexOf(p[m])&&(f=!0);this.activeCues_=p;k.setCues_(this.activeCues_);return k},set:function(){}}});c.src?(g.src=c.src,g.preload_||(g.loaded_=!0),(g.preload_||b||"subtitles"!==c.kind&&"captions"!==c.kind)&&Qh(g.src,ia(g))):g.loaded_=!0;return g}Z(e,n);var d=e.prototype;
d.addCue=function(c){var a=c;if(G.vttjs&&!(c instanceof G.vttjs.VTTCue)){a=new G.vttjs.VTTCue(c.startTime,c.endTime,c.text);for(var b in c)b in a||(a[b]=c[b]);a.id=c.id;a.originalCue_=c}c=this.tech_.textTracks();for(b=0;b<c.length;b++)c[b]!==this&&c[b].removeCue(a);this.cues_.push(a);this.cues.setCues_(this.cues_)};d.removeCue=function(c){for(var a=this.cues_.length;a--;){var b=this.cues_[a];if(b===c||b.originalCue_&&b.originalCue_===c){this.cues_.splice(a,1);this.cues.setCues_(this.cues_);break}}};
return e}(hf);fd.prototype.allowedEvents_={cuechange:"cuechange"};var Rh=function(n){function e(d){void 0===d&&(d={});var c=ya(d,{kind:jl[d.kind]||""});d=n.call(this,c)||this;var a=!1;Object.defineProperty(ia(d),"enabled",{get:function(){return a},set:function(b){"boolean"===typeof b&&b!==a&&(a=b,this.trigger("enabledchange"))}});c.enabled&&(d.enabled=c.enabled);d.loaded_=!0;return d}Z(e,n);return e}(hf),Sh=function(n){function e(d){void 0===d&&(d={});var c=ya(d,{kind:il[d.kind]||""});d=n.call(this,
c)||this;var a=!1;Object.defineProperty(ia(d),"selected",{get:function(){return a},set:function(b){"boolean"===typeof b&&b!==a&&(a=b,this.trigger("selectedchange"))}});c.selected&&(d.selected=c.selected);return d}Z(e,n);return e}(hf),Hc=function(n){function e(d){void 0===d&&(d={});var c=n.call(this)||this;var a=new fd(d);c.kind=a.kind;c.src=a.src;c.srclang=a.language;c.label=a.label;c["default"]=a["default"];Object.defineProperties(ia(c),{readyState:{get:function(){return b}},track:{get:function(){return a}}});
var b=0;a.addEventListener("loadeddata",function(){b=2;c.trigger({type:"load",target:ia(c)})});return c}Z(e,n);return e}(Ma);Hc.prototype.allowedEvents_={load:"load"};Hc.NONE=0;Hc.LOADING=1;Hc.LOADED=2;Hc.ERROR=3;var ub={audio:{ListClass:fl,TrackClass:Rh,capitalName:"Audio"},video:{ListClass:gl,TrackClass:Sh,capitalName:"Video"},text:{ListClass:Lh,TrackClass:fd,capitalName:"Text"}};Object.keys(ub).forEach(function(n){ub[n].getterName=n+"Tracks";ub[n].privateName=n+"Tracks_"});var Ic={remoteText:{ListClass:Lh,
TrackClass:fd,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:hl,TrackClass:Hc,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ab=Tc({},ub,Ic);Ic.names=Object.keys(Ic);ub.names=Object.keys(ub);ab.names=[].concat(Ic.names).concat(ub.names);var Fe=Object.create||function(){function n(){}return function(e){if(1!==arguments.length)throw Error("Object.create shim only accepts one parameter.");
n.prototype=e;return new n}}();kb.prototype=Fe(Error.prototype);kb.prototype.constructor=kb;kb.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};Wc.prototype={set:function(n,e){this.get(n)||""===e||(this.values[n]=e)},get:function(n,e,d){return d?this.has(n)?this.values[n]:e[d]:this.has(n)?this.values[n]:e},has:function(n){return n in this.values},alt:function(n,e,d){for(var c=0;c<d.length;++c)if(e===d[c]){this.set(n,e);break}},
integer:function(n,e){/^-?\d+$/.test(e)&&this.set(n,parseInt(e,10))},percent:function(n,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),0<=e&&100>=e)?(this.set(n,e),!0):!1}};var Ge=N.createElement("textarea"),Dk={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Mg={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},
Ek={v:"title",lang:"lang"},Lg={rt:"ruby"},Ng=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,
64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],
[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,
1114109]];He.prototype.applyStyles=function(n,e){e=e||this.div;for(var d in n)n.hasOwnProperty(d)&&(e.style[d]=n[d])};He.prototype.formatStyle=function(n,e){return 0===n?0:n+e};Ad.prototype=Fe(He.prototype);Ad.prototype.constructor=Ad;Za.prototype.move=function(n,e){e=void 0!==e?e:this.lineHeight;switch(n){case "+x":this.left+=e;this.right+=e;break;case "-x":this.left-=e;this.right-=e;break;case "+y":this.top+=e;this.bottom+=e;break;case "-y":this.top-=e,this.bottom-=e}};Za.prototype.overlaps=function(n){return this.left<
n.right&&this.right>n.left&&this.top<n.bottom&&this.bottom>n.top};Za.prototype.overlapsAny=function(n){for(var e=0;e<n.length;e++)if(this.overlaps(n[e]))return!0;return!1};Za.prototype.within=function(n){return this.top>=n.top&&this.bottom<=n.bottom&&this.left>=n.left&&this.right<=n.right};Za.prototype.overlapsOppositeAxis=function(n,e){switch(e){case "+x":return this.left<n.left;case "-x":return this.right>n.right;case "+y":return this.top<n.top;case "-y":return this.bottom>n.bottom}};Za.prototype.intersectPercentage=
function(n){return Math.max(0,Math.min(this.right,n.right)-Math.max(this.left,n.left))*Math.max(0,Math.min(this.bottom,n.bottom)-Math.max(this.top,n.top))/(this.height*this.width)};Za.prototype.toCSSCompatValues=function(n){return{top:this.top-n.top,bottom:n.bottom-this.bottom,left:this.left-n.left,right:n.right-this.right,height:this.height,width:this.width}};Za.getSimpleBoxPosition=function(n){var e=n.div?n.div.offsetHeight:n.tagName?n.offsetHeight:0,d=n.div?n.div.offsetWidth:n.tagName?n.offsetWidth:
0,c=n.div?n.div.offsetTop:n.tagName?n.offsetTop:0;n=n.div?n.div.getBoundingClientRect():n.tagName?n.getBoundingClientRect():n;return{left:n.left,right:n.right,top:n.top||c,height:n.height||e,bottom:n.bottom||c+(n.height||e),width:n.width||d}};vc.StringDecoder=function(){return{decode:function(n){if(!n)return"";if("string"!==typeof n)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(n))}}};vc.convertCueToDOMTree=function(n,e){return n&&e?Kg(n,e):null};vc.processCues=
function(n,e,d){if(!n||!e||!d)return null;for(;d.firstChild;)d.removeChild(d.firstChild);var c=n.document.createElement("div");c.style.position="absolute";c.style.left="0";c.style.right="0";c.style.top="0";c.style.bottom="0";c.style.margin="1.5%";d.appendChild(c);if(function(l){for(var k=0;k<l.length;k++)if(l[k].hasBeenReset||!l[k].displayState)return!0;return!1}(e)){var a=[],b=Za.getSimpleBoxPosition(c),g={font:Math.round(5*b.height)/100+"px sans-serif"};(function(){for(var l,k,f=0;f<e.length;f++){k=
e[f];l=new Ad(n,k,g);c.appendChild(l.div);var h=void 0,m=void 0,p=l,q=b,r=a,u=new Za(p),y=p.cue;if("number"===typeof y.line&&(y.snapToLines||0<=y.line&&100>=y.line))var B=y.line;else if(y.track&&y.track.textTrackList&&y.track.textTrackList.mediaElement){B=y.track;for(var I=B.textTrackList,M=0,L=0;L<I.length&&I[L]!==B;L++)"showing"===I[L].mode&&M++;B=-1*++M}else B=-1;I=[];if(y.snapToLines){switch(y.vertical){case "":I=["+y","-y"];m="height";break;case "rl":I=["+x","-x"];m="width";break;case "lr":I=
["-x","+x"],m="width"}M=u.lineHeight;L=M*Math.round(B);m=q[m]+M;var S=I[0];Math.abs(L)>m&&(L=(0>L?-1:1)*Math.ceil(m/M)*M);0>B&&(L+=""===y.vertical?q.height:q.width,I=I.reverse());u.move(S,L)}else{u=u.lineHeight/q.height*100;switch(y.lineAlign){case "center":B-=u/2;break;case "end":B-=u}switch(y.vertical){case "":p.applyStyles({top:p.formatStyle(B,"%")});break;case "rl":p.applyStyles({left:p.formatStyle(B,"%")});break;case "lr":p.applyStyles({right:p.formatStyle(B,"%")})}I=["+y","-x","+x","-y"];u=
new Za(p)}a:{y=u;u=I;m=new Za(y);B=1;for(I=0;I<u.length;I++){for(;y.overlapsOppositeAxis(q,u[I])||y.within(q)&&y.overlapsAny(r);)y.move(u[I]);if(y.within(q)){h=y;break a}M=y.intersectPercentage(q);B>M&&(h=new Za(y),B=M);y=new Za(m)}h=h||m}p.move(h.toCSSCompatValues(q));k.displayState=l.div;a.push(Za.getSimpleBoxPosition(l))}})()}else for(d=0;d<e.length;d++)c.appendChild(e[d].displayState)};vc.Parser=function(n,e,d){d||(d=e,e={});e||(e={});this.window=n;this.vttjs=e;this.state="INITIAL";this.buffer=
"";this.decoder=d||new TextDecoder("utf8");this.regionList=[]};vc.Parser.prototype={reportOrThrowError:function(n){if(n instanceof kb)this.onparsingerror&&this.onparsingerror(n);else throw n;},parse:function(n){function e(){for(var f=b.buffer,h=0;h<f.length&&"\r"!==f[h]&&"\n"!==f[h];)++h;var m=f.substr(0,h);"\r"===f[h]&&++h;"\n"===f[h]&&++h;b.buffer=f.substr(h);return m}function d(f){var h=new Wc;Xc(f,function(m,p){switch(m){case "id":h.set(m,p);break;case "width":h.percent(m,p);break;case "lines":h.integer(m,
p);break;case "regionanchor":case "viewportanchor":p=p.split(",");if(2!==p.length)break;var q=new Wc;q.percent("x",p[0]);q.percent("y",p[1]);if(!q.has("x")||!q.has("y"))break;h.set(m+"X",q.get("x"));h.set(m+"Y",q.get("y"));break;case "scroll":h.alt(m,p,["up"])}},/=/,/\s/);h.has("id")&&(f=new (b.vttjs.VTTRegion||b.window.VTTRegion),f.width=h.get("width",100),f.lines=h.get("lines",3),f.regionAnchorX=h.get("regionanchorX",0),f.regionAnchorY=h.get("regionanchorY",100),f.viewportAnchorX=h.get("viewportanchorX",
0),f.viewportAnchorY=h.get("viewportanchorY",100),f.scroll=h.get("scroll",""),b.onregion&&b.onregion(f),b.regionList.push({id:h.get("id"),region:f}))}function c(f){var h=new Wc;Xc(f,function(m,p){switch(m){case "MPEGT":h.integer(m+"S",p);break;case "LOCA":h.set(m+"L",Ee(p))}},/[^\d]:/,/,/);b.ontimestampmap&&b.ontimestampmap({MPEGTS:h.get("MPEGTS"),LOCAL:h.get("LOCAL")})}function a(f){f.match(/X-TIMESTAMP-MAP/)?Xc(f,function(h,m){switch(h){case "X-TIMESTAMP-MAP":c(m)}},/=/):Xc(f,function(h,m){switch(h){case "Region":d(m)}},
/:/)}var b=this;n&&(b.buffer+=b.decoder.decode(n,{stream:!0}));try{if("INITIAL"===b.state){if(!/\r\n|\n/.test(b.buffer))return this;var g=e();var l=g.match(/^WEBVTT([ \t].*)?$/);if(!l||!l[0])throw new kb(kb.Errors.BadSignature);b.state="HEADER"}for(n=!1;b.buffer;){if(!/\r\n|\n/.test(b.buffer))return this;n?n=!1:g=e();switch(b.state){case "HEADER":/:/.test(g)?a(g):g||(b.state="ID");continue;case "NOTE":g||(b.state="ID");continue;case "ID":if(/^NOTE($|[ \t])/.test(g)){b.state="NOTE";break}if(!g)continue;
b.cue=new (b.vttjs.VTTCue||b.window.VTTCue)(0,0,"");try{b.cue.align="center"}catch(f){b.cue.align="middle"}b.state="CUE";if(-1===g.indexOf("--\x3e")){b.cue.id=g;continue}case "CUE":try{Ck(g,b.cue,b.regionList)}catch(f){b.reportOrThrowError(f);b.cue=null;b.state="BADCUE";continue}b.state="CUETEXT";continue;case "CUETEXT":var k=-1!==g.indexOf("--\x3e");if(!g||k&&(n=!0)){b.oncue&&b.oncue(b.cue);b.cue=null;b.state="ID";continue}b.cue.text&&(b.cue.text+="\n");b.cue.text+=g.replace(/\u2028/g,"\n").replace(/u2029/g,
"\n");continue;case "BADCUE":g||(b.state="ID")}}}catch(f){b.reportOrThrowError(f);if("CUETEXT"===b.state&&b.cue&&b.oncue)b.oncue(b.cue);b.cue=null;b.state="INITIAL"===b.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{this.buffer+=this.decoder.decode();if(this.cue||"HEADER"===this.state)this.buffer+="\n\n",this.parse();if("INITIAL"===this.state)throw new kb(kb.Errors.BadSignature);}catch(n){this.reportOrThrowError(n)}this.onflush&&this.onflush();return this}};var Ik={"":1,lr:1,rl:1},Hk=
{start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};Og.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var ml={"":!0,up:!0},nl=function(){var n=100,e=3,d=0,c=100,a=0,b=100,g="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return n},set:function(l){if(!Yc(l))throw Error("Width must be between 0 and 100.");n=l}},lines:{enumerable:!0,get:function(){return e},set:function(l){if("number"!==typeof l)throw new TypeError("Lines must be set to a number.");
e=l}},regionAnchorY:{enumerable:!0,get:function(){return c},set:function(l){if(!Yc(l))throw Error("RegionAnchorX must be between 0 and 100.");c=l}},regionAnchorX:{enumerable:!0,get:function(){return d},set:function(l){if(!Yc(l))throw Error("RegionAnchorY must be between 0 and 100.");d=l}},viewportAnchorY:{enumerable:!0,get:function(){return b},set:function(l){if(!Yc(l))throw Error("ViewportAnchorY must be between 0 and 100.");b=l}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(l){if(!Yc(l))throw Error("ViewportAnchorX must be between 0 and 100.");
a=l}},scroll:{enumerable:!0,get:function(){return g},set:function(l){l="string"!==typeof l?!1:ml[l.toLowerCase()]?l.toLowerCase():!1;!1===l?console.warn("Scroll: an invalid or illegal string was specified."):g=l}}})},Th=ma(function(n){n=n.exports={WebVTT:vc,VTTCue:Og,VTTRegion:nl};G.vttjs=n;G.WebVTT=n.WebVTT;var e=n.VTTCue,d=n.VTTRegion,c=G.VTTCue,a=G.VTTRegion;n.shim=function(){G.VTTCue=e;G.VTTRegion=d};n.restore=function(){G.VTTCue=c;G.VTTRegion=a};G.VTTCue||n.shim()}),wa=function(n){function e(c,
a){void 0===c&&(c={});void 0===a&&(a=function(){});c.reportTouchActivity=!1;var b=n.call(this,null,c,a)||this;b.hasStarted_=!1;b.on("playing",function(){this.hasStarted_=!0});b.on("loadstart",function(){this.hasStarted_=!1});ab.names.forEach(function(g){g=ab[g];c&&c[g.getterName]&&(b[g.privateName]=c[g.getterName])});b.featuresProgressEvents||b.manualProgressOn();b.featuresTimeupdateEvents||b.manualTimeUpdatesOn();["Text","Audio","Video"].forEach(function(g){!1===c["native"+g+"Tracks"]&&(b["featuresNative"+
g+"Tracks"]=!1)});if(!1===c.nativeCaptions||!1===c.nativeTextTracks)b.featuresNativeTextTracks=!1;else if(!0===c.nativeCaptions||!0===c.nativeTextTracks)b.featuresNativeTextTracks=!0;b.featuresNativeTextTracks?b.featuresNativeTextTracks&&b.nativeTextTracks():b.emulateTextTracks();b.preloadTextTracks=!1!==c.preloadTextTracks;b.autoRemoteTextTracks_=new ab.text.ListClass;b.initTrackListeners();c.nativeControlsForTouch||b.emitTapEvents();b.constructor&&(b.name_=b.constructor.name||"Unknown Tech");return b}
Z(e,n);var d=e.prototype;d.triggerSourceset=function(c){var a=this;if(!this.isReady_)this.one("ready",function(){return a.setTimeout(function(){return a.triggerSourceset(c)},1)});this.trigger({src:c,type:"sourceset"})};d.manualProgressOn=function(){this.on("durationchange",this.onDurationChange);this.manualProgress=!0;this.one("ready",this.trackProgress)};d.manualProgressOff=function(){this.manualProgress=!1;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};d.trackProgress=
function(c){this.stopTrackingProgress();this.progressInterval=this.setInterval(oa(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress");this.bufferedPercent_=a;1===a&&this.stopTrackingProgress()}),500)};d.onDurationChange=function(c){this.duration_=this.duration()};d.buffered=function(){return fc(0,0)};d.bufferedPercent=function(){return Hg(this.buffered(),this.duration_)};d.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)};d.manualTimeUpdatesOn=
function(){this.manualTimeUpdates=!0;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};d.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};d.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},
250)};d.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};d.dispose=function(){this.clearTracks(ub.names);this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();n.prototype.dispose.call(this)};d.clearTracks=function(c){var a=this;c=[].concat(c);c.forEach(function(b){for(var g=a[b+"Tracks"]()||[],l=g.length;l--;){var k=g[l];"text"===b&&a.removeRemoteTextTrack(k);
g.removeTrack(k)}})};d.cleanupAutoTextTracks=function(){for(var c=this.autoRemoteTextTracks_||[],a=c.length;a--;)this.removeRemoteTextTrack(c[a])};d.reset=function(){};d.crossOrigin=function(){};d.setCrossOrigin=function(){};d.error=function(c){void 0!==c&&(this.error_=new Ya(c),this.trigger("error"));return this.error_};d.played=function(){return this.hasStarted_?fc(0,0):fc()};d.setScrubbing=function(){};d.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,
manuallyTriggered:!0})};d.initTrackListeners=function(){var c=this;ub.names.forEach(function(a){var b=function(){c.trigger(a+"trackchange")},g=c[ub[a].getterName]();g.addEventListener("removetrack",b);g.addEventListener("addtrack",b);c.on("dispose",function(){g.removeEventListener("removetrack",b);g.removeEventListener("addtrack",b)})})};d.addWebVttScript_=function(){var c=this;if(!G.WebVTT)if(N.body.contains(this.el()))if(!this.options_["vtt.js"]&&Nb(Th)&&0<Object.keys(Th).length)this.trigger("vttjsloaded");
else{var a=N.createElement("script");a.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";a.onload=function(){c.trigger("vttjsloaded")};a.onerror=function(){c.trigger("vttjserror")};this.on("dispose",function(){a.onload=null;a.onerror=null});G.WebVTT=!0;this.el().parentNode.appendChild(a)}else this.ready(this.addWebVttScript_)};d.emulateTextTracks=function(){var c=this,a=this.textTracks(),b=this.remoteTextTracks(),g=function(h){return a.addTrack(h.track)},l=function(h){return a.removeTrack(h.track)};
b.on("addtrack",g);b.on("removetrack",l);this.addWebVttScript_();var k=function(){return c.trigger("texttrackchange")},f=function(){k();for(var h=0;h<a.length;h++){var m=a[h];m.removeEventListener("cuechange",k);"showing"===m.mode&&m.addEventListener("cuechange",k)}};f();a.addEventListener("change",f);a.addEventListener("addtrack",f);a.addEventListener("removetrack",f);this.on("dispose",function(){b.off("addtrack",g);b.off("removetrack",l);a.removeEventListener("change",f);a.removeEventListener("addtrack",
f);a.removeEventListener("removetrack",f);for(var h=0;h<a.length;h++)a[h].removeEventListener("cuechange",k)})};d.nativeTextTracks=function(){var c=this,a=this.textTracks(),b=this.remoteTextTracks(),g=function(h){return a.addTrack(h.track)},l=function(h){return a.removeTrack(h.track)};b.on("addtrack",g);b.on("removetrack",l);var k=function(){return c.trigger("nativetexttrackchange")},f=function(){k();for(var h=0;h<a.length;h++){var m=a[h];m.removeEventListener("cuechange",k);"showing"===m.mode&&m.addEventListener("cuechange",
k)}};f();a.addEventListener("change",f);a.addEventListener("addtrack",f);a.addEventListener("removetrack",f);this.on("dispose",function(){b.off("addtrack",g);b.off("removetrack",l);a.removeEventListener("change",f);a.removeEventListener("addtrack",f);a.removeEventListener("removetrack",f);for(var h=0;h<a.length;h++)a[h].removeEventListener("cuechange",k)})};d.addTextTrack=function(c,a,b){if(!c)throw Error("TextTrack kind is required but was not provided");var g=void 0;void 0===g&&(g={});var l=this.textTracks();
g.kind=c;a&&(g.label=a);b&&(g.language=b);g.tech=this;c=new ab.text.TrackClass(g);l.addTrack(c);return c};d.createRemoteTextTrack=function(c){c=ya(c,{tech:this});return new Ic.remoteTextEl.TrackClass(c)};d.addRemoteTextTrack=function(c,a){var b=this;void 0===c&&(c={});var g=this.createRemoteTextTrack(c);!0!==a&&!1!==a&&(pa.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),a=!0);this.remoteTextTrackEls().addTrackElement_(g);
this.remoteTextTracks().addTrack(g.track);!0!==a&&this.ready(function(){return b.autoRemoteTextTracks_.addTrack(g.track)});return g};d.removeRemoteTextTrack=function(c){var a=this.remoteTextTrackEls().getTrackElementByTrack_(c);this.remoteTextTrackEls().removeTrackElement_(a);this.remoteTextTracks().removeTrack(c);this.autoRemoteTextTracks_.removeTrack(c)};d.getVideoPlaybackQuality=function(){return{}};d.requestPictureInPicture=function(){var c=this.options_.Promise||G.Promise;if(c)return c.reject()};
d.disablePictureInPicture=function(){return!0};d.setDisablePictureInPicture=function(){};d.setPoster=function(){};d.playsinline=function(){};d.setPlaysinline=function(){};d.overrideNativeAudioTracks=function(){};d.overrideNativeVideoTracks=function(){};d.canPlayType=function(){return""};e.canPlayType=function(){return""};e.canPlaySource=function(c,a){return e.canPlayType(c.type)};e.isTech=function(c){return c.prototype instanceof e||c instanceof e||c===e};e.registerTech=function(c,a){e.techs_||(e.techs_=
{});if(!e.isTech(a))throw Error("Tech "+c+" must be a Tech");if(!e.canPlayType)throw Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");c=Ba(c);e.techs_[c]=a;e.techs_[Kd(c)]=a;"Tech"!==c&&e.defaultTechOrder_.push(c);return a};e.getTech=function(c){if(c){if(e.techs_&&e.techs_[c])return e.techs_[c];c=Ba(c);if(G&&G.videojs&&G.videojs[c])return pa.warn("The "+c+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),
G.videojs[c]}};return e}(U);ab.names.forEach(function(n){var e=ab[n];wa.prototype[e.getterName]=function(){this[e.privateName]=this[e.privateName]||new e.ListClass;return this[e.privateName]}});wa.prototype.featuresVolumeControl=!0;wa.prototype.featuresMuteControl=!0;wa.prototype.featuresFullscreenResize=!1;wa.prototype.featuresPlaybackRate=!1;wa.prototype.featuresProgressEvents=!1;wa.prototype.featuresSourceset=!1;wa.prototype.featuresTimeupdateEvents=!1;wa.prototype.featuresNativeTextTracks=!1;
wa.withSourceHandlers=function(n){n.registerSourceHandler=function(e,d){var c=n.sourceHandlers;c||(c=n.sourceHandlers=[]);void 0===d&&(d=c.length);c.splice(d,0,e)};n.canPlayType=function(e){for(var d=n.sourceHandlers||[],c,a=0;a<d.length;a++)if(c=d[a].canPlayType(e))return c;return""};n.selectSourceHandler=function(e,d){for(var c=n.sourceHandlers||[],a,b=0;b<c.length;b++)if(a=c[b].canHandleSource(e,d))return c[b];return null};n.canPlaySource=function(e,d){var c=n.selectSourceHandler(e,d);return c?
c.canHandleSource(e,d):""};["seekable","seeking","duration"].forEach(function(e){var d=this[e];"function"===typeof d&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):d.apply(this,arguments)})},n.prototype);n.prototype.setSource=function(e){var d=n.selectSourceHandler(e,this.options_);d||(n.nativeSourceHandler?d=n.nativeSourceHandler:pa.error("No source handler found for the current source."));this.disposeSourceHandler();
this.off("dispose",this.disposeSourceHandler);d!==n.nativeSourceHandler&&(this.currentSource_=e);this.sourceHandler_=d.handleSource(e,this,this.options_);this.one("dispose",this.disposeSourceHandler)};n.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null);this.cleanupAutoTextTracks();this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};U.registerComponent("Tech",wa);wa.registerTech("Tech",
wa);wa.defaultTechOrder_=[];var ic={},Ke={},Bd={},ol={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},pl={setCurrentTime:1,setMuted:1,setVolume:1},Uh={play:1,pause:1},ql={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",
png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Cd=function(n){void 0===n&&(n="");n=kf(n);return ql[n.toLowerCase()]||""},rl=function(n,e){if(!e)return"";if(n.cache_.source.src===e&&n.cache_.source.type)return n.cache_.source.type;var d=n.cache_.sources.filter(function(a){return a.src===e});if(d.length)return d[0].type;n=n.$$("source");for(d=0;d<n.length;d++){var c=n[d];if(c.type&&c.src&&c.src===e)return c.type}return Cd(e)},sl=function d(e){if(Array.isArray(e)){var c=[];e.forEach(function(a){a=
d(a);Array.isArray(a)?c=c.concat(a):Wa(a)&&c.push(a)});e=c}else e="string"===typeof e&&e.trim()?[Qg({src:e})]:Wa(e)&&"string"===typeof e.src&&e.src&&e.src.trim()?[Qg(e)]:[];return e},tl=function(e){function d(c,a,b){var g=ya({createEl:!1},a);b=e.call(this,c,g,b)||this;if(a.playerOptions.sources&&0!==a.playerOptions.sources.length)c.src(a.playerOptions.sources);else for(g=0,a=a.playerOptions.techOrder;g<a.length;g++){var l=Ba(a[g]),k=wa.getTech(l);l||(k=U.getComponent(l));if(k&&k.isSupported()){c.loadTech_(l);
break}}return b}Z(d,e);return d}(U);U.registerComponent("MediaLoader",tl);var Rd=function(e){function d(a,b){a=e.call(this,a,b)||this;a.emitTapEvents();a.enable();return a}Z(d,e);var c=d.prototype;c.createEl=function(a,b,g){void 0===a&&(a="div");void 0===b&&(b={});void 0===g&&(g={});b=ja({innerHTML:'\x3cspan aria-hidden\x3d"true" class\x3d"vjs-icon-placeholder"\x3e\x3c/span\x3e',className:this.buildCSSClass(),tabIndex:0},b);"button"===a&&pa.error("Creating a ClickableComponent with an HTML element of "+
a+" is not supported; use a Button instead.");g=ja({role:"button"},g);this.tabIndex_=b.tabIndex;a=e.prototype.createEl.call(this,a,b,g);this.createControlTextEl(a);return a};c.dispose=function(){this.controlTextEl_=null;e.prototype.dispose.call(this)};c.createControlTextEl=function(a){this.controlTextEl_=xa("span",{className:"vjs-control-text"},{"aria-live":"polite"});a&&a.appendChild(this.controlTextEl_);this.controlText(this.controlText_,a);return this.controlTextEl_};c.controlText=function(a,b){void 0===
b&&(b=this.el());if(void 0===a)return this.controlText_||"Need Text";var g=this.localize(a);this.controlText_=a;Ub(this.controlTextEl_,g);this.nonIconControl||b.setAttribute("title",g)};c.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)};c.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),
this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))};c.disable=function(){this.enabled_=!1;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex");this.off("mouseover",this.handleMouseOver);this.off("mouseout",this.handleMouseOut);this.off(["tap","click"],this.handleClick);this.off("keydown",this.handleKeyDown)};c.handleClick=function(a){this.options_.clickHandler&&this.options_.clickHandler.call(this,
arguments)};c.handleKeyDown=function(a){ka.isEventKey(a,"Space")||ka.isEventKey(a,"Enter")?(a.preventDefault(),a.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,a)};return d}(U);U.registerComponent("ClickableComponent",Rd);var ul=function(e){function d(a,b){b=e.call(this,a,b)||this;b.update();a.on("posterchange",oa(ia(b),b.update));return b}Z(d,e);var c=d.prototype;c.dispose=function(){this.player().off("posterchange",this.update);e.prototype.dispose.call(this)};c.createEl=
function(){return xa("div",{className:"vjs-poster",tabIndex:-1})};c.update=function(a){a=this.player().poster();this.setSrc(a);a?this.show():this.hide()};c.setSrc=function(a){var b="";a&&(b='url("'+a+'")');this.el_.style.backgroundImage=b};c.handleClick=function(a){this.player_.controls()&&(a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length,!this.player_.tech(!0)||(ed||dd)&&a||this.player_.tech(!0).focus(),this.player_.paused()?gc(this.player_.play()):
this.player_.pause())};return d}(Rd);U.registerComponent("PosterImage",ul);var vl={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},wl=function(e){function d(a,b,g){b=e.call(this,
a,b,g)||this;var l=oa(ia(b),b.updateDisplay);a.on("loadstart",oa(ia(b),b.toggleDisplay));a.on("texttrackchange",l);a.on("nativetexttrackchange",l);a.on("loadedmetadata",oa(ia(b),b.preselectTrack));a.ready(oa(ia(b),function(){if(a.tech_&&a.tech_.featuresNativeTextTracks)this.hide();else{a.on("fullscreenchange",l);a.on("playerresize",l);G.addEventListener("orientationchange",l);a.on("dispose",function(){return G.removeEventListener("orientationchange",l)});for(var k=this.options_.playerOptions.tracks||
[],f=0;f<k.length;f++)this.player_.addRemoteTextTrack(k[f],!0);this.preselectTrack()}}));return b}Z(d,e);var c=d.prototype;c.preselectTrack=function(){for(var a={captions:1,subtitles:1,descriptions:1},b=this.player_.textTracks(),g=this.player_.cache_.selectedLanguage,l,k,f,h=0;h<b.length;h++){var m=b[h];g&&g.enabled&&g.language&&g.language===m.language&&m.kind in a?m.kind===g.kind?f=m:f||(f=m):g&&!g.enabled?k=l=f=null:m["default"]&&("descriptions"!==m.kind||l?m.kind in a&&!k&&(k=m):l=m)}f?f.mode=
"showing":k?k.mode="showing":l&&(l.mode="showing")};c.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()};c.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};c.clearDisplay=function(){"function"===typeof G.WebVTT&&G.WebVTT.processCues(G,[],this.el_)};c.updateDisplay=function(){var a=this.player_.textTracks(),b=this.options_.allowMultipleShowingTracks;
this.clearDisplay();if(b){b=[];for(var g=0;g<a.length;++g){var l=a[g];"showing"===l.mode&&b.push(l)}this.updateForTrack(b)}else{g=b=null;for(l=a.length;l--;){var k=a[l];"showing"===k.mode&&("descriptions"===k.kind?b=k:g=k)}g?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(g)):b&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(b))}};c.updateDisplayState=function(a){var b=this.player_.textTrackSettings.getValues();
a=a.activeCues;for(var g=a.length;g--;){var l=a[g];if(l){l=l.displayState;b.color&&(l.firstChild.style.color=b.color);if(b.textOpacity){var k=Le(b.color||"#fff",b.textOpacity);try{l.firstChild.style.color=k}catch(f){}}b.backgroundColor&&(l.firstChild.style.backgroundColor=b.backgroundColor);if(b.backgroundOpacity){k=Le(b.backgroundColor||"#000",b.backgroundOpacity);try{l.firstChild.style.backgroundColor=k}catch(f){}}if(b.windowColor)if(b.windowOpacity){k=Le(b.windowColor,b.windowOpacity);try{l.style.backgroundColor=
k}catch(f){}}else l.style.backgroundColor=b.windowColor;b.edgeStyle&&("dropshadow"===b.edgeStyle?l.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===b.edgeStyle?l.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===b.edgeStyle?l.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===b.edgeStyle&&(l.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222"));
b.fontPercent&&1!==b.fontPercent&&(k=G.parseFloat(l.style.fontSize),l.style.fontSize=k*b.fontPercent+"px",l.style.height="auto",l.style.top="auto");b.fontFamily&&"default"!==b.fontFamily&&("small-caps"===b.fontFamily?l.firstChild.style.fontVariant="small-caps":l.firstChild.style.fontFamily=vl[b.fontFamily])}}};c.updateForTrack=function(a){Array.isArray(a)||(a=[a]);if("function"===typeof G.WebVTT&&!a.every(function(f){return!f.activeCues})){for(var b=[],g=0;g<a.length;++g)for(var l=a[g],k=0;k<l.activeCues.length;++k)b.push(l.activeCues[k]);
G.WebVTT.processCues(G,b,this.el_);for(b=0;b<a.length;++b){g=a[b];for(l=0;l<g.activeCues.length;++l)k=g.activeCues[l].displayState,sb(k,"vjs-text-track-cue"),sb(k,"vjs-text-track-cue-"+(g.language?g.language:b));this.player_.textTrackSettings&&this.updateDisplayState(g)}}};return d}(U);U.registerComponent("TextTrackDisplay",wl);var xl=function(e){function d(){return e.apply(this,arguments)||this}Z(d,e);d.prototype.createEl=function(){var c=this.player_.isAudio();c=this.localize(c?"Audio Player":"Video Player");
c=xa("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[c])});var a=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});a.appendChild(c);return a};return d}(U);U.registerComponent("LoadingSpinner",xl);var Bb=function(e){function d(){return e.apply(this,arguments)||this}Z(d,e);var c=d.prototype;c.createEl=function(a,b,g){void 0===b&&(b={});void 0===g&&(g={});a="button";b=ja({innerHTML:'\x3cspan aria-hidden\x3d"true" class\x3d"vjs-icon-placeholder"\x3e\x3c/span\x3e',
className:this.buildCSSClass()},b);g=ja({type:"button"},g);a=U.prototype.createEl.call(this,a,b,g);this.createControlTextEl(a);return a};c.addChild=function(a,b){void 0===b&&(b={});pa.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead.");return U.prototype.addChild.call(this,a,b)};c.enable=function(){e.prototype.enable.call(this);this.el_.removeAttribute("disabled")};c.disable=function(){e.prototype.disable.call(this);
this.el_.setAttribute("disabled","disabled")};c.handleKeyDown=function(a){ka.isEventKey(a,"Space")||ka.isEventKey(a,"Enter")?a.stopPropagation():e.prototype.handleKeyDown.call(this,a)};return d}(Rd);U.registerComponent("Button",Bb);var Vh=function(e){function d(a,b){a=e.call(this,a,b)||this;a.mouseused_=!1;a.on("mousedown",a.handleMouseDown);return a}Z(d,e);var c=d.prototype;c.buildCSSClass=function(){return"vjs-big-play-button"};c.handleClick=function(a){var b=this.player_.play();if(this.mouseused_&&
a.clientX&&a.clientY)a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length,gc(b),!this.player_.tech(!0)||(ed||dd)&&a||this.player_.tech(!0).focus();else{var g=(a=this.player_.getChild("controlBar"))&&a.getChild("playToggle");g?(a=function(){return g.focus()},Vc(b)?b.then(a,function(){}):this.setTimeout(a,1)):this.player_.tech(!0).focus()}};c.handleKeyDown=function(a){this.mouseused_=!1;e.prototype.handleKeyDown.call(this,a)};c.handleMouseDown=function(a){this.mouseused_=
!0};return d}(Bb);Vh.prototype.controlText_="Play Video";U.registerComponent("BigPlayButton",Vh);var yl=function(e){function d(a,b){a=e.call(this,a,b)||this;a.controlText(b&&b.controlText||a.localize("Close"));return a}Z(d,e);var c=d.prototype;c.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)};c.handleClick=function(a){this.trigger({type:"close",bubbles:!1})};c.handleKeyDown=function(a){ka.isEventKey(a,"Esc")?(a.preventDefault(),a.stopPropagation(),this.trigger("click")):
e.prototype.handleKeyDown.call(this,a)};return d}(Bb);U.registerComponent("CloseButton",yl);var Wh=function(e){function d(a,b){void 0===b&&(b={});var g=e.call(this,a,b)||this;b.replay=void 0===b.replay||b.replay;g.on(a,"play",g.handlePlay);g.on(a,"pause",g.handlePause);if(b.replay)g.on(a,"ended",g.handleEnded);return g}Z(d,e);var c=d.prototype;c.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)};c.handleClick=function(a){this.player_.paused()?this.player_.play():
this.player_.pause()};c.handleSeeked=function(a){this.removeClass("vjs-ended");this.player_.paused()?this.handlePause(a):this.handlePlay(a)};c.handlePlay=function(a){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};c.handlePause=function(a){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};c.handleEnded=function(a){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");
this.one(this.player_,"seeked",this.handleSeeked)};return d}(Bb);Wh.prototype.controlText_="Play";U.registerComponent("PlayToggle",Wh);var Xh=function(e,d){e=0>e?0:e;var c=Math.floor(e%60),a=Math.floor(e/60%60),b=Math.floor(e/3600),g=Math.floor(d/60%60);d=Math.floor(d/3600);if(isNaN(e)||Infinity===e)b=a=c="-";b=0<b||0<d?b+":":"";return b+(((b||10<=g)&&10>a?"0"+a:a)+":")+(10>c?"0"+c:c)},Me=Xh,Jc=function(e){function d(a,b){b=e.call(this,a,b)||this;b.on(a,["timeupdate","ended"],b.updateContent);b.updateTextNode_();
return b}Z(d,e);var c=d.prototype;c.createEl=function(){var a=this.buildCSSClass(),b=e.prototype.createEl.call(this,"div",{className:a+" vjs-time-control vjs-control",innerHTML:'\x3cspan class\x3d"vjs-control-text" role\x3d"presentation"\x3e'+this.localize(this.labelText_)+"\u00a0\x3c/span\x3e"});this.contentEl_=xa("span",{className:a+"-display"},{"aria-live":"off",role:"presentation"});b.appendChild(this.contentEl_);return b};c.dispose=function(){this.textNode_=this.contentEl_=null;e.prototype.dispose.call(this)};
c.updateTextNode_=function(a){var b=this;void 0===a&&(a=0);a=wc(a);this.formattedTime_!==a&&(this.formattedTime_=a,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(b.contentEl_){var g=b.textNode_;b.textNode_=N.createTextNode(b.formattedTime_);b.textNode_&&(g?b.contentEl_.replaceChild(b.textNode_,g):b.contentEl_.appendChild(b.textNode_))}}))};c.updateContent=function(a){};return d}(U);Jc.prototype.labelText_="Time";Jc.prototype.controlText_="Time";U.registerComponent("TimeDisplay",
Jc);var lf=function(e){function d(){return e.apply(this,arguments)||this}Z(d,e);var c=d.prototype;c.buildCSSClass=function(){return"vjs-current-time"};c.updateContent=function(a){a=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateTextNode_(a)};return d}(Jc);lf.prototype.labelText_="Current Time";lf.prototype.controlText_="Current Time";U.registerComponent("CurrentTimeDisplay",lf);var mf=function(e){function d(a,
b){b=e.call(this,a,b)||this;b.on(a,"durationchange",b.updateContent);b.on(a,"loadstart",b.updateContent);b.on(a,"loadedmetadata",b.updateContent);return b}Z(d,e);var c=d.prototype;c.buildCSSClass=function(){return"vjs-duration"};c.updateContent=function(a){a=this.player_.duration();this.updateTextNode_(a)};return d}(Jc);mf.prototype.labelText_="Duration";mf.prototype.controlText_="Duration";U.registerComponent("DurationDisplay",mf);var zl=function(e){function d(){return e.apply(this,arguments)||this}
Z(d,e);d.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"\x3cdiv\x3e\x3cspan\x3e/\x3c/span\x3e\x3c/div\x3e"},{"aria-hidden":!0})};return d}(U);U.registerComponent("TimeDivider",zl);var nf=function(e){function d(a,b){b=e.call(this,a,b)||this;b.on(a,"durationchange",b.updateContent);return b}Z(d,e);var c=d.prototype;c.buildCSSClass=function(){return"vjs-remaining-time"};c.createEl=function(){var a=e.prototype.createEl.call(this);
a.insertBefore(xa("span",{},{"aria-hidden":!0},"-"),this.contentEl_);return a};c.updateContent=function(a){"number"===typeof this.player_.duration()&&(a=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(a))};return d}(Jc);nf.prototype.labelText_="Remaining Time";nf.prototype.controlText_="Remaining Time";U.registerComponent("RemainingTimeDisplay",nf);var Al=function(e){function d(a,b){a=e.call(this,a,b)||
this;a.updateShowing();a.on(a.player(),"durationchange",a.updateShowing);return a}Z(d,e);var c=d.prototype;c.createEl=function(){var a=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=xa("div",{className:"vjs-live-display",innerHTML:'\x3cspan class\x3d"vjs-control-text"\x3e'+this.localize("Stream Type")+"\u00a0\x3c/span\x3e"+this.localize("LIVE")},{"aria-live":"off"});a.appendChild(this.contentEl_);return a};c.dispose=function(){this.contentEl_=null;
e.prototype.dispose.call(this)};c.updateShowing=function(a){Infinity===this.player().duration()?this.show():this.hide()};return d}(U);U.registerComponent("LiveDisplay",Al);var Yh=function(e){function d(a,b){a=e.call(this,a,b)||this;a.updateLiveEdgeStatus();if(a.player_.liveTracker)a.on(a.player_.liveTracker,"liveedgechange",a.updateLiveEdgeStatus);return a}Z(d,e);var c=d.prototype;c.createEl=function(){var a=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});
this.textEl_=xa("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"});a.appendChild(this.textEl_);return a};c.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))};
c.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()};c.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus);this.textEl_=null;e.prototype.dispose.call(this)};return d}(Bb);Yh.prototype.controlText_="Seek to live, currently playing live";U.registerComponent("SeekToLive",Yh);var gd=function(e,d,c){e=Number(e);return Math.min(c,Math.max(d,isNaN(e)?d:e))},of=function(e){function d(a,b){a=e.call(this,a,b)||this;a.bar=
a.getChild(a.options_.barName);a.vertical(!!a.options_.vertical);a.enable();return a}Z(d,e);var c=d.prototype;c.enabled=function(){return this.enabled_};c.enable=function(){if(!this.enabled()){this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("keydown",this.handleKeyDown);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent)this.on(this.player_,this.playerEvent,this.update);this.removeClass("disabled");
this.setAttribute("tabindex",0);this.enabled_=!0}};c.disable=function(){if(this.enabled()){var a=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("keydown",this.handleKeyDown);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(a,"mousemove",this.handleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchmove",this.handleMouseMove);this.off(a,"touchend",this.handleMouseUp);
this.removeAttribute("tabindex");this.addClass("disabled");this.playerEvent&&this.off(this.player_,this.playerEvent,this.update);this.enabled_=!1}};c.createEl=function(a,b,g){void 0===b&&(b={});void 0===g&&(g={});b.className+=" vjs-slider";b=ja({tabIndex:0},b);g=ja({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},g);return e.prototype.createEl.call(this,a,b,g)};c.handleMouseDown=function(a){var b=this.bar.el_.ownerDocument;"mousedown"===a.type&&a.preventDefault();
"touchstart"!==a.type||Rb||a.preventDefault();va();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(b,"mousemove",this.handleMouseMove);this.on(b,"mouseup",this.handleMouseUp);this.on(b,"touchmove",this.handleMouseMove);this.on(b,"touchend",this.handleMouseUp);this.handleMouseMove(a)};c.handleMouseMove=function(a){};c.handleMouseUp=function(){var a=this.bar.el_.ownerDocument;ib();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(a,"mousemove",this.handleMouseMove);
this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchmove",this.handleMouseMove);this.off(a,"touchend",this.handleMouseUp);this.update()};c.update=function(){var a=this;if(this.el_&&this.bar){var b=this.getProgress();if(b===this.progress_)return b;this.progress_=b;this.requestNamedAnimationFrame("Slider#update",function(){var g=a.vertical()?"height":"width";a.bar.el().style[g]=(100*b).toFixed(2)+"%"});return b}};c.getProgress=function(){return Number(gd(this.getPercent(),0,1).toFixed(4))};c.calculateDistance=
function(a){a=tb(this.el_,a);return this.vertical()?a.y:a.x};c.handleKeyDown=function(a){ka.isEventKey(a,"Left")||ka.isEventKey(a,"Down")?(a.preventDefault(),a.stopPropagation(),this.stepBack()):ka.isEventKey(a,"Right")||ka.isEventKey(a,"Up")?(a.preventDefault(),a.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,a)};c.handleClick=function(a){a.stopPropagation();a.preventDefault()};c.vertical=function(a){if(void 0===a)return this.vertical_||!1;(this.vertical_=!!a)?this.addClass("vjs-slider-vertical"):
this.addClass("vjs-slider-horizontal")};return d}(U);U.registerComponent("Slider",of);var Bl=function(e){function d(a,b){b=e.call(this,a,b)||this;b.partEls_=[];b.on(a,"progress",b.update);return b}Z(d,e);var c=d.prototype;c.createEl=function(){var a=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),b=xa("span",{className:"vjs-control-text"}),g=xa("span",{textContent:this.localize("Loaded")}),l=N.createTextNode(": ");this.percentageEl_=xa("span",{className:"vjs-control-text-loaded-percentage",
textContent:"0%"});a.appendChild(b);b.appendChild(g);b.appendChild(l);b.appendChild(this.percentageEl_);return a};c.dispose=function(){this.percentageEl_=this.partEls_=null;e.prototype.dispose.call(this)};c.update=function(a){var b=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var g=b.player_.liveTracker,l=b.player_.buffered(),k=g&&g.isLive()?g.seekableEnd():b.player_.duration(),f=b.player_.bufferedEnd();g=b.partEls_;k=gd(f/k*100,0,100).toFixed(2)+"%";b.percent_!==k&&(b.el_.style.width=
k,Ub(b.percentageEl_,k),b.percent_=k);for(k=0;k<l.length;k++){var h=l.start(k),m=l.end(k),p=g[k];p||(p=b.el_.appendChild(xa()),g[k]=p);if(p.dataset.start!==h||p.dataset.end!==m)p.dataset.start=h,p.dataset.end=m,p.style.left=gd(h/f*100,0,100).toFixed(2)+"%",p.style.width=gd((m-h)/f*100,0,100).toFixed(2)+"%"}for(f=g.length;f>l.length;f--)b.el_.removeChild(g[f-1]);g.length=l.length})};return d}(U);U.registerComponent("LoadProgressBar",Bl);var Cl=function(e){function d(a,b){a=e.call(this,a,b)||this;a.update=
jc(oa(ia(a),a.update),30);return a}Z(d,e);var c=d.prototype;c.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})};c.update=function(a,b,g){var l=yb(this.el_),k=Aa(this.player_.el()),f=a.width*b;k&&l&&(b=a.left-k.left+f,a=a.width-f+(k.right-a.right),k=l.width/2,b<k?k+=k-b:a<k&&(k=a),0>k?k=0:k>l.width&&(k=l.width),this.el_.style.right="-"+k+"px",this.write(g))};c.write=function(a){Ub(this.el_,a)};c.updateTime=function(a,b,g,l){var k=
this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var f=k.player_.duration();if(k.player_.liveTracker&&k.player_.liveTracker.isLive()){f=k.player_.liveTracker.liveWindow();var h=f-b*f;f=(1>h?"":"-")+wc(h,f)}else f=wc(g,f);k.update(a,b,f);l&&l()})};return d}(U);U.registerComponent("TimeTooltip",Cl);var pf=function(e){function d(a,b){a=e.call(this,a,b)||this;a.update=jc(oa(ia(a),a.update),30);return a}Z(d,e);var c=d.prototype;c.createEl=function(){return e.prototype.createEl.call(this,
"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})};c.update=function(a,b){var g=this.getChild("timeTooltip");if(g){var l=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();g.updateTime(a,b,l)}};return d}(U);pf.prototype.options_={children:[]};Ab||$b||pf.prototype.options_.children.push("timeTooltip");U.registerComponent("PlayProgressBar",pf);var Zh=function(e){function d(a,b){a=e.call(this,a,b)||this;a.update=jc(oa(ia(a),a.update),30);
return a}Z(d,e);var c=d.prototype;c.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};c.update=function(a,b){var g=this,l=b*this.player_.duration();this.getChild("timeTooltip").updateTime(a,b,l,function(){g.el_.style.left=a.width*b+"px"})};return d}(U);Zh.prototype.options_={children:["timeTooltip"]};U.registerComponent("MouseTimeDisplay",Zh);var qf=function(e){function d(a,b){a=e.call(this,a,b)||this;a.setEventHandlers_();return a}Z(d,e);var c=d.prototype;
c.setEventHandlers_=function(){this.update_=oa(this,this.update);this.update=jc(this.update_,30);this.on(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker)this.on(this.player_.liveTracker,"liveedgechange",this.update);this.updateInterval=null;this.on(this.player_,["playing"],this.enableInterval_);this.on(this.player_,["ended","pause","waiting"],this.disableInterval_);if("hidden"in N&&"visibilityState"in N)this.on(N,"visibilitychange",this.toggleVisibility_)};
c.toggleVisibility_=function(a){N.hidden?this.disableInterval_(a):(this.enableInterval_(),this.update())};c.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))};c.disableInterval_=function(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&a&&"ended"!==a.type||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)};c.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},
{"aria-label":this.localize("Progress Bar")})};c.update=function(a){var b=this,g=e.prototype.update.call(this);this.requestNamedAnimationFrame("SeekBar#update",function(){var l=b.player_.ended()?b.player_.duration():b.getCurrentTime_(),k=b.player_.liveTracker,f=b.player_.duration();k&&k.isLive()&&(f=b.player_.liveTracker.liveCurrentTime());b.percent_!==g&&(b.el_.setAttribute("aria-valuenow",(100*g).toFixed(2)),b.percent_=g);if(b.currentTime_!==l||b.duration_!==f)b.el_.setAttribute("aria-valuetext",
b.localize("progress bar timing: currentTime\x3d{1} duration\x3d{2}",[wc(l,f),wc(f,f)],"{1} of {2}")),b.currentTime_=l,b.duration_=f;b.bar&&b.bar.update(Aa(b.el()),b.getProgress())});return g};c.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};c.getPercent=function(){var a=this.getCurrentTime_(),b=this.player_.liveTracker;b&&b.isLive()?(a=(a-b.seekableStart())/b.liveWindow(),b.atLiveEdge()&&(a=1)):a/=this.player_.duration();
return a};c.handleMouseDown=function(a){tc(a)&&(a.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,a))};c.handleMouseMove=function(a){if(tc(a)){var b=this.calculateDistance(a);var g=this.player_.liveTracker;if(g&&g.isLive()){if(.99<=b){g.seekToLiveEdge();return}a=g.seekableStart();var l=g.liveCurrentTime();b=a+b*g.liveWindow();b>=l&&(b=l);b<=a&&(b=a+.1);if(Infinity===b)return}else b*=this.player_.duration(),
b===this.player_.duration()&&(b-=.1);this.player_.currentTime(b)}};c.enable=function(){e.prototype.enable.call(this);var a=this.getChild("mouseTimeDisplay");a&&a.show()};c.disable=function(){e.prototype.disable.call(this);var a=this.getChild("mouseTimeDisplay");a&&a.hide()};c.handleMouseUp=function(a){e.prototype.handleMouseUp.call(this,a);a&&a.stopPropagation();this.player_.scrubbing(!1);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0});this.videoWasPlaying?gc(this.player_.play()):
this.update_()};c.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)};c.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)};c.handleAction=function(a){this.player_.paused()?this.player_.play():this.player_.pause()};c.handleKeyDown=function(a){ka.isEventKey(a,"Space")||ka.isEventKey(a,"Enter")?(a.preventDefault(),a.stopPropagation(),this.handleAction(a)):ka.isEventKey(a,"Home")?(a.preventDefault(),a.stopPropagation(),this.player_.currentTime(0)):ka.isEventKey(a,
"End")?(a.preventDefault(),a.stopPropagation(),this.player_.currentTime(this.player_.duration())):/^[0-9]$/.test(ka(a))?(a.preventDefault(),a.stopPropagation(),a=10*(ka.codes[ka(a)]-ka.codes["0"])/100,this.player_.currentTime(this.player_.duration()*a)):ka.isEventKey(a,"PgDn")?(a.preventDefault(),a.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):ka.isEventKey(a,"PgUp")?(a.preventDefault(),a.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,
a)};c.dispose=function(){this.disableInterval_();this.off(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker)this.on(this.player_.liveTracker,"liveedgechange",this.update);this.off(this.player_,["playing"],this.enableInterval_);this.off(this.player_,["ended","pause","waiting"],this.disableInterval_);"hidden"in N&&"visibilityState"in N&&this.off(N,"visibilitychange",this.toggleVisibility_);e.prototype.dispose.call(this)};return d}(of);qf.prototype.options_=
{children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};Ab||$b||qf.prototype.options_.children.splice(1,0,"mouseTimeDisplay");U.registerComponent("SeekBar",qf);var $h=function(e){function d(a,b){a=e.call(this,a,b)||this;a.handleMouseMove=jc(oa(ia(a),a.handleMouseMove),30);a.throttledHandleMouseSeek=jc(oa(ia(a),a.handleMouseSeek),30);a.enable();return a}Z(d,e);var c=d.prototype;c.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};
c.handleMouseMove=function(a){var b=this.getChild("seekBar");if(b){var g=b.getChild("playProgressBar"),l=b.getChild("mouseTimeDisplay");if(g||l){var k=b.el(),f=yb(k);a=tb(k,a).x;a=gd(a,0,1);l&&l.update(f,a);g&&g.update(f,b.getProgress())}}};c.handleMouseSeek=function(a){var b=this.getChild("seekBar");b&&b.handleMouseMove(a)};c.enabled=function(){return this.enabled_};c.disable=function(){this.children().forEach(function(a){return a.disable&&a.disable()});this.enabled()&&(this.off(["mousedown","touchstart"],
this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)};c.enable=function(){this.children().forEach(function(a){return a.enable&&a.enable()});this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)};c.handleMouseDown=function(a){var b=this.el_.ownerDocument,g=this.getChild("seekBar");g&&g.handleMouseDown(a);
this.on(b,"mousemove",this.throttledHandleMouseSeek);this.on(b,"touchmove",this.throttledHandleMouseSeek);this.on(b,"mouseup",this.handleMouseUp);this.on(b,"touchend",this.handleMouseUp)};c.handleMouseUp=function(a){var b=this.el_.ownerDocument,g=this.getChild("seekBar");g&&g.handleMouseUp(a);this.off(b,"mousemove",this.throttledHandleMouseSeek);this.off(b,"touchmove",this.throttledHandleMouseSeek);this.off(b,"mouseup",this.handleMouseUp);this.off(b,"touchend",this.handleMouseUp)};return d}(U);$h.prototype.options_=
{children:["seekBar"]};U.registerComponent("ProgressControl",$h);var ai=function(e){function d(a,b){b=e.call(this,a,b)||this;b.on(a,["enterpictureinpicture","leavepictureinpicture"],b.handlePictureInPictureChange);b.on(a,["disablepictureinpicturechanged","loadedmetadata"],b.handlePictureInPictureEnabledChange);b.disable();return b}Z(d,e);var c=d.prototype;c.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)};c.handlePictureInPictureEnabledChange=
function(){N.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()};c.handlePictureInPictureChange=function(a){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture");this.handlePictureInPictureEnabledChange()};c.handleClick=function(a){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()};return d}(Bb);ai.prototype.controlText_="Picture-in-Picture";
U.registerComponent("PictureInPictureToggle",ai);var bi=function(e){function d(a,b){b=e.call(this,a,b)||this;b.on(a,"fullscreenchange",b.handleFullscreenChange);!1===N[a.fsApi_.fullscreenEnabled]&&b.disable();return b}Z(d,e);var c=d.prototype;c.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)};c.handleFullscreenChange=function(a){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")};c.handleClick=function(a){this.player_.isFullscreen()?
this.player_.exitFullscreen():this.player_.requestFullscreen()};return d}(Bb);bi.prototype.controlText_="Fullscreen";U.registerComponent("FullscreenToggle",bi);var Dl=function(e,d){d.tech_&&!d.tech_.featuresVolumeControl&&e.addClass("vjs-hidden");e.on(d,"loadstart",function(){d.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},El=function(e){function d(){return e.apply(this,arguments)||this}Z(d,e);d.prototype.createEl=function(){return e.prototype.createEl.call(this,
"div",{className:"vjs-volume-level",innerHTML:'\x3cspan class\x3d"vjs-control-text"\x3e\x3c/span\x3e'})};return d}(U);U.registerComponent("VolumeLevel",El);var rf=function(e){function d(a,b){var g=e.call(this,a,b)||this;g.on("slideractive",g.updateLastVolume_);g.on(a,"volumechange",g.updateARIAAttributes);a.ready(function(){return g.updateARIAAttributes()});return g}Z(d,e);var c=d.prototype;c.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},
{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})};c.handleMouseDown=function(a){tc(a)&&e.prototype.handleMouseDown.call(this,a)};c.handleMouseMove=function(a){tc(a)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))};c.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)};c.getPercent=function(){return this.player_.muted()?0:this.player_.volume()};c.stepForward=function(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};c.stepBack=function(){this.checkMuted();
this.player_.volume(this.player_.volume()-.1)};c.updateARIAAttributes=function(a){a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a);this.el_.setAttribute("aria-valuetext",a+"%")};c.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())};c.updateLastVolume_=function(){var a=this,b=this.player_.volume();this.one("sliderinactive",function(){0===a.player_.volume()&&a.player_.lastVolume_(b)})};return d}(of);rf.prototype.options_={children:["volumeLevel"],
barName:"volumeLevel"};rf.prototype.playerEvent="volumechange";U.registerComponent("VolumeBar",rf);var ci=function(e){function d(a,b){void 0===b&&(b={});b.vertical=b.vertical||!1;if("undefined"===typeof b.volumeBar||Nb(b.volumeBar))b.volumeBar=b.volumeBar||{},b.volumeBar.vertical=b.vertical;var g=e.call(this,a,b)||this;Dl(ia(g),a);g.throttledHandleMouseMove=jc(oa(ia(g),g.handleMouseMove),30);g.on("mousedown",g.handleMouseDown);g.on("touchstart",g.handleMouseDown);g.on(g.volumeBar,["focus","slideractive"],
function(){g.volumeBar.addClass("vjs-slider-active");g.addClass("vjs-slider-active");g.trigger("slideractive")});g.on(g.volumeBar,["blur","sliderinactive"],function(){g.volumeBar.removeClass("vjs-slider-active");g.removeClass("vjs-slider-active");g.trigger("sliderinactive")});return g}Z(d,e);var c=d.prototype;c.createEl=function(){var a="vjs-volume-horizontal";this.options_.vertical&&(a="vjs-volume-vertical");return e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+
a})};c.handleMouseDown=function(a){a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove);this.on(a,"touchmove",this.throttledHandleMouseMove);this.on(a,"mouseup",this.handleMouseUp);this.on(a,"touchend",this.handleMouseUp)};c.handleMouseUp=function(a){a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove);this.off(a,"touchmove",this.throttledHandleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchend",this.handleMouseUp)};c.handleMouseMove=
function(a){this.volumeBar.handleMouseMove(a)};return d}(U);ci.prototype.options_={children:["volumeBar"]};U.registerComponent("VolumeControl",ci);var Fl=function(e,d){d.tech_&&!d.tech_.featuresMuteControl&&e.addClass("vjs-hidden");e.on(d,"loadstart",function(){d.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},di=function(e){function d(a,b){b=e.call(this,a,b)||this;Fl(ia(b),a);b.on(a,["loadstart","volumechange"],b.update);return b}Z(d,e);var c=d.prototype;c.buildCSSClass=
function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)};c.handleClick=function(a){a=this.player_.volume();var b=this.player_.lastVolume_();0===a?(this.player_.volume(.1>b?.1:b),this.player_.muted(!1)):this.player_.muted(this.player_.muted()?!1:!0)};c.update=function(a){this.updateIcon_();this.updateControlText_()};c.updateIcon_=function(){var a=this.player_.volume(),b=3;Ab&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted);0===a||this.player_.muted()?
b=0:.33>a?b=1:.67>a&&(b=2);for(a=0;4>a;a++)Vb(this.el_,"vjs-vol-"+a);sb(this.el_,"vjs-vol-"+b)};c.updateControlText_=function(){var a=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)};return d}(Bb);di.prototype.controlText_="Mute";U.registerComponent("MuteToggle",di);var ei=function(e){function d(a,b){void 0===b&&(b={});b.inline="undefined"!==typeof b.inline?b.inline:!0;if("undefined"===typeof b.volumeControl||Nb(b.volumeControl))b.volumeControl=
b.volumeControl||{},b.volumeControl.vertical=!b.inline;b=e.call(this,a,b)||this;b.on(a,["loadstart"],b.volumePanelState_);b.on(b.muteToggle,"keyup",b.handleKeyPress);b.on(b.volumeControl,"keyup",b.handleVolumeControlKeyUp);b.on("keydown",b.handleKeyPress);b.on("mouseover",b.handleMouseOver);b.on("mouseout",b.handleMouseOut);b.on(b.volumeControl,["slideractive"],b.sliderActive_);b.on(b.volumeControl,["sliderinactive"],b.sliderInactive_);return b}Z(d,e);var c=d.prototype;c.sliderActive_=function(){this.addClass("vjs-slider-active")};
c.sliderInactive_=function(){this.removeClass("vjs-slider-active")};c.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden");this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")};c.createEl=function(){var a="vjs-volume-panel-horizontal";this.options_.inline||(a="vjs-volume-panel-vertical");return e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+
a})};c.dispose=function(){this.handleMouseOut();e.prototype.dispose.call(this)};c.handleVolumeControlKeyUp=function(a){ka.isEventKey(a,"Esc")&&this.muteToggle.focus()};c.handleMouseOver=function(a){this.addClass("vjs-hover");jb(N,"keyup",oa(this,this.handleKeyPress))};c.handleMouseOut=function(a){this.removeClass("vjs-hover");Ra(N,"keyup",oa(this,this.handleKeyPress))};c.handleKeyPress=function(a){ka.isEventKey(a,"Esc")&&this.handleMouseOut()};return d}(U);ei.prototype.options_={children:["muteToggle",
"volumeControl"]};U.registerComponent("VolumePanel",ei);var sf=function(e){function d(a,b){a=e.call(this,a,b)||this;b&&(a.menuButton_=b.menuButton);a.focusedChild_=-1;a.on("keydown",a.handleKeyDown);a.boundHandleBlur_=oa(ia(a),a.handleBlur);a.boundHandleTapClick_=oa(ia(a),a.handleTapClick);return a}Z(d,e);var c=d.prototype;c.addEventListenerForItem=function(a){a instanceof U&&(this.on(a,"blur",this.boundHandleBlur_),this.on(a,["tap","click"],this.boundHandleTapClick_))};c.removeEventListenerForItem=
function(a){a instanceof U&&(this.off(a,"blur",this.boundHandleBlur_),this.off(a,["tap","click"],this.boundHandleTapClick_))};c.removeChild=function(a){"string"===typeof a&&(a=this.getChild(a));this.removeEventListenerForItem(a);e.prototype.removeChild.call(this,a)};c.addItem=function(a){(a=this.addChild(a))&&this.addEventListenerForItem(a)};c.createEl=function(){this.contentEl_=xa(this.options_.contentElType||"ul",{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var a=
e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});a.appendChild(this.contentEl_);jb(a,"click",function(b){b.preventDefault();b.stopImmediatePropagation()});return a};c.dispose=function(){this.boundHandleTapClick_=this.boundHandleBlur_=this.contentEl_=null;e.prototype.dispose.call(this)};c.handleBlur=function(a){var b=a.relatedTarget||N.activeElement;this.children().some(function(g){return g.el()===b})||(a=this.menuButton_)&&a.buttonPressed_&&b!==a.el().firstChild&&
a.unpressButton()};c.handleTapClick=function(a){if(this.menuButton_){this.menuButton_.unpressButton();var b=this.children();Array.isArray(b)&&(b=b.filter(function(g){return g.el()===a.target})[0])&&"CaptionSettingsMenuItem"!==b.name()&&this.menuButton_.focus()}};c.handleKeyDown=function(a){if(ka.isEventKey(a,"Left")||ka.isEventKey(a,"Down"))a.preventDefault(),a.stopPropagation(),this.stepForward();else if(ka.isEventKey(a,"Right")||ka.isEventKey(a,"Up"))a.preventDefault(),a.stopPropagation(),this.stepBack()};
c.stepForward=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1);this.focus(a)};c.stepBack=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-1);this.focus(a)};c.focus=function(a){void 0===a&&(a=0);var b=this.children().slice();b.length&&b[0].className&&/vjs-menu-title/.test(b[0].className)&&b.shift();0<b.length&&(0>a?a=0:a>=b.length&&(a=b.length-1),this.focusedChild_=a,b[a].el_.focus())};return d}(U);U.registerComponent("Menu",sf);var tf=function(e){function d(a,
b){void 0===b&&(b={});var g=e.call(this,a,b)||this;g.menuButton_=new Bb(a,b);g.menuButton_.controlText(g.controlText_);g.menuButton_.el_.setAttribute("aria-haspopup","true");a=Bb.prototype.buildCSSClass();g.menuButton_.el_.className=g.buildCSSClass()+" "+a;g.menuButton_.removeClass("vjs-control");g.addChild(g.menuButton_);g.update();g.enabled_=!0;g.on(g.menuButton_,"tap",g.handleClick);g.on(g.menuButton_,"click",g.handleClick);g.on(g.menuButton_,"keydown",g.handleKeyDown);g.on(g.menuButton_,"mouseenter",
function(){g.addClass("vjs-hover");g.menu.show();jb(N,"keyup",oa(ia(g),g.handleMenuKeyUp))});g.on("mouseleave",g.handleMouseLeave);g.on("keydown",g.handleSubmenuKeyDown);return g}Z(d,e);var c=d.prototype;c.update=function(){var a=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu));this.menu=a;this.addChild(a);this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()};c.createMenu=
function(){var a=new sf(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var b=xa("li",{className:"vjs-menu-title",innerHTML:Ba(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;b=new U(this.player_,{el:b});a.addItem(b)}if(this.items=this.createItems())for(b=0;b<this.items.length;b++)a.addItem(this.items[b]);return a};c.createItems=function(){};c.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};c.buildWrapperCSSClass=
function(){var a="vjs-menu-button";a=!0===this.options_.inline?a+"-inline":a+"-popup";var b=Bb.prototype.buildCSSClass();return"vjs-menu-button "+a+" "+b+" "+e.prototype.buildCSSClass.call(this)};c.buildCSSClass=function(){var a="vjs-menu-button";a=!0===this.options_.inline?a+"-inline":a+"-popup";return"vjs-menu-button "+a+" "+e.prototype.buildCSSClass.call(this)};c.controlText=function(a,b){void 0===b&&(b=this.menuButton_.el());return this.menuButton_.controlText(a,b)};c.dispose=function(){this.handleMouseLeave();
e.prototype.dispose.call(this)};c.handleClick=function(a){this.buttonPressed_?this.unpressButton():this.pressButton()};c.handleMouseLeave=function(a){this.removeClass("vjs-hover");Ra(N,"keyup",oa(this,this.handleMenuKeyUp))};c.focus=function(){this.menuButton_.focus()};c.blur=function(){this.menuButton_.blur()};c.handleKeyDown=function(a){ka.isEventKey(a,"Esc")||ka.isEventKey(a,"Tab")?(this.buttonPressed_&&this.unpressButton(),ka.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())):
!ka.isEventKey(a,"Up")&&!ka.isEventKey(a,"Down")||this.buttonPressed_||(a.preventDefault(),this.pressButton())};c.handleMenuKeyUp=function(a){(ka.isEventKey(a,"Esc")||ka.isEventKey(a,"Tab"))&&this.removeClass("vjs-hover")};c.handleSubmenuKeyPress=function(a){this.handleSubmenuKeyDown(a)};c.handleSubmenuKeyDown=function(a){if(ka.isEventKey(a,"Esc")||ka.isEventKey(a,"Tab"))this.buttonPressed_&&this.unpressButton(),ka.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())};c.pressButton=
function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Ab&&dc()||this.menu.focus())};c.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))};c.disable=function(){this.unpressButton();this.enabled_=!1;this.addClass("vjs-disabled");this.menuButton_.disable()};c.enable=function(){this.enabled_=!0;
this.removeClass("vjs-disabled");this.menuButton_.enable()};return d}(U);U.registerComponent("MenuButton",tf);var uf=function(e){function d(c,a){var b=a.tracks;c=e.call(this,c,a)||this;1>=c.items.length&&c.hide();if(!b)return ia(c);var g=oa(ia(c),c.update);b.addEventListener("removetrack",g);b.addEventListener("addtrack",g);c.player_.on("ready",g);c.player_.on("dispose",function(){b.removeEventListener("removetrack",g);b.removeEventListener("addtrack",g)});return c}Z(d,e);return d}(tf);U.registerComponent("TrackButton",
uf);var Gl="Tab Esc Up Down Right Left".split(" "),hd=function(e){function d(a,b){a=e.call(this,a,b)||this;a.selectable=b.selectable;a.isSelected_=b.selected||!1;a.multiSelectable=b.multiSelectable;a.selected(a.isSelected_);a.selectable?a.multiSelectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitemradio"):a.el_.setAttribute("role","menuitem");return a}Z(d,e);var c=d.prototype;c.createEl=function(a,b,g){this.nonIconControl=!0;return e.prototype.createEl.call(this,
"li",ja({className:"vjs-menu-item",innerHTML:'\x3cspan class\x3d"vjs-menu-item-text"\x3e'+this.localize(this.options_.label)+"\x3c/span\x3e",tabIndex:-1},b),g)};c.handleKeyDown=function(a){Gl.some(function(b){return ka.isEventKey(a,b)})||e.prototype.handleKeyDown.call(this,a)};c.handleClick=function(a){this.selected(!0)};c.selected=function(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),
this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))};return d}(Rd);U.registerComponent("MenuItem",hd);var id=function(e){function d(a,b){var g=b.track,l=a.textTracks();b.label=g.label||g.language||"Unknown";b.selected="showing"===g.mode;var k=e.call(this,a,b)||this;k.track=g;k.kinds=(b.kinds||[b.kind||k.track.kind]).filter(Boolean);var f=function(){for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];k.handleTracksChange.apply(ia(k),q)},h=function(){for(var p=
arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];k.handleSelectedLanguageChange.apply(ia(k),q)};a.on(["loadstart","texttrackchange","nativetexttrackchange"],f);l.addEventListener("change",f);l.addEventListener("selectedlanguagechange",h);k.on("dispose",function(){a.off(["loadstart","texttrackchange","nativetexttrackchange"],f);l.removeEventListener("change",f);l.removeEventListener("selectedlanguagechange",h)});if(void 0===l.onchange){var m;k.on(["tap","click"],function(){if("object"!==typeof G.Event)try{m=
new G.Event("change")}catch(p){}m||(m=N.createEvent("Event"),m.initEvent("change",!0,!0));l.dispatchEvent(m)})}k.handleTracksChange();return k}Z(d,e);var c=d.prototype;c.handleClick=function(a){var b=this.track,g=this.player_.textTracks();e.prototype.handleClick.call(this,a);if(g)for(a=0;a<g.length;a++){var l=g[a];-1!==this.kinds.indexOf(l.kind)&&(l===b?"showing"!==l.mode&&(l.mode="showing"):"disabled"!==l.mode&&(l.mode="disabled"))}};c.handleTracksChange=function(a){a="showing"===this.track.mode;
a!==this.isSelected_&&this.selected(a)};c.handleSelectedLanguageChange=function(a){"showing"===this.track.mode&&(a=this.player_.cache_.selectedLanguage,a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}))};c.dispose=function(){this.track=null;e.prototype.dispose.call(this)};return d}(hd);U.registerComponent("TextTrackMenuItem",id);var fi=function(e){function d(a,b){b.track={player:a,
kind:b.kind,kinds:b.kinds,"default":!1,mode:"disabled"};b.kinds||(b.kinds=[b.kind]);b.track.label=b.label?b.label:"off";b.selectable=!0;b.multiSelectable=!1;return e.call(this,a,b)||this}Z(d,e);var c=d.prototype;c.handleTracksChange=function(a){a=this.player().textTracks();for(var b=!0,g=0,l=a.length;g<l;g++){var k=a[g];if(-1<this.options_.kinds.indexOf(k.kind)&&"showing"===k.mode){b=!1;break}}b!==this.isSelected_&&this.selected(b)};c.handleSelectedLanguageChange=function(a){a=this.player().textTracks();
for(var b=!0,g=0,l=a.length;g<l;g++){var k=a[g];if(-1<["captions","descriptions","subtitles"].indexOf(k.kind)&&"showing"===k.mode){b=!1;break}}b&&(this.player_.cache_.selectedLanguage={enabled:!1})};return d}(id);U.registerComponent("OffTextTrackMenuItem",fi);var Kc=function(e){function d(c,a){void 0===a&&(a={});a.tracks=c.textTracks();return e.call(this,c,a)||this}Z(d,e);d.prototype.createItems=function(c,a){void 0===c&&(c=[]);void 0===a&&(a=id);var b;this.label_&&(b="off");c.push(new fi(this.player_,
{kinds:this.kinds_,kind:this.kind_,label:b}));this.hideThreshold_+=1;b=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var g=0;g<b.length;g++){var l=b[g];if(-1<this.kinds_.indexOf(l.kind)){var k=new a(this.player_,{track:l,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});k.addClass("vjs-"+l.kind+"-menu-item");c.push(k)}}return c};return d}(uf);U.registerComponent("TextTrackButton",Kc);var gi=function(e){function d(a,b){var g=b.track,l=b.cue,
k=a.currentTime();b.selectable=!0;b.multiSelectable=!1;b.label=l.text;b.selected=l.startTime<=k&&k<l.endTime;a=e.call(this,a,b)||this;a.track=g;a.cue=l;g.addEventListener("cuechange",oa(ia(a),a.update));return a}Z(d,e);var c=d.prototype;c.handleClick=function(a){e.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};c.update=function(a){a=this.cue;var b=this.player_.currentTime();this.selected(a.startTime<=b&&b<a.endTime)};return d}(hd);U.registerComponent("ChaptersTrackMenuItem",
gi);var vf=function(e){function d(a,b,g){return e.call(this,a,b,g)||this}Z(d,e);var c=d.prototype;c.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)};c.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)};c.update=function(a){this.track_&&(!a||"addtrack"!==a.type&&"removetrack"!==a.type)||this.setTrack(this.findChaptersTrack());e.prototype.update.call(this)};c.setTrack=function(a){if(this.track_!==a){this.updateHandler_||
(this.updateHandler_=this.update.bind(this));if(this.track_){var b=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);b&&b.removeEventListener("load",this.updateHandler_);this.track_=null}if(this.track_=a)this.track_.mode="hidden",(a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&a.addEventListener("load",this.updateHandler_)}};c.findChaptersTrack=function(){for(var a=this.player_.textTracks()||[],b=a.length-1;0<=b;b--){var g=a[b];if(g.kind===this.kind_)return g}};
c.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ba(this.kind_))};c.createMenu=function(){this.options_.title=this.getMenuCaption();return e.prototype.createMenu.call(this)};c.createItems=function(){var a=[];if(!this.track_)return a;var b=this.track_.cues;if(!b)return a;for(var g=0,l=b.length;g<l;g++){var k=new gi(this.player_,{track:this.track_,cue:b[g]});a.push(k)}return a};return d}(Kc);vf.prototype.kind_="chapters";vf.prototype.controlText_="Chapters";
U.registerComponent("ChaptersButton",vf);var wf=function(e){function d(a,b,g){b=e.call(this,a,b,g)||this;var l=a.textTracks(),k=oa(ia(b),b.handleTracksChange);l.addEventListener("change",k);b.on("dispose",function(){l.removeEventListener("change",k)});return b}Z(d,e);var c=d.prototype;c.handleTracksChange=function(a){a=this.player().textTracks();for(var b=!1,g=0,l=a.length;g<l;g++){var k=a[g];if(k.kind!==this.kind_&&"showing"===k.mode){b=!0;break}}b?this.disable():this.enable()};c.buildCSSClass=function(){return"vjs-descriptions-button "+
e.prototype.buildCSSClass.call(this)};c.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)};return d}(Kc);wf.prototype.kind_="descriptions";wf.prototype.controlText_="Audio Descriptions";U.registerComponent("DescriptionsButton",wf);var xf=function(e){function d(a,b,g){return e.call(this,a,b,g)||this}Z(d,e);var c=d.prototype;c.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)};c.buildWrapperCSSClass=
function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)};return d}(Kc);xf.prototype.kind_="subtitles";xf.prototype.controlText_="Subtitles";U.registerComponent("SubtitlesButton",xf);var yf=function(e){function d(c,a){a.track={player:c,kind:a.kind,label:a.kind+" settings",selectable:!1,"default":!1,mode:"disabled"};a.selectable=!1;a.name="CaptionSettingsMenuItem";c=e.call(this,c,a)||this;c.addClass("vjs-texttrack-settings");c.controlText(", opens "+a.kind+" settings dialog");
return c}Z(d,e);d.prototype.handleClick=function(c){this.player().getChild("textTrackSettings").open()};return d}(id);U.registerComponent("CaptionSettingsMenuItem",yf);var zf=function(e){function d(a,b,g){return e.call(this,a,b,g)||this}Z(d,e);var c=d.prototype;c.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)};c.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)};c.createItems=function(){var a=[];this.player().tech_&&
this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(a.push(new yf(this.player_,{kind:this.kind_})),this.hideThreshold_+=1);return e.prototype.createItems.call(this,a)};return d}(Kc);zf.prototype.kind_="captions";zf.prototype.controlText_="Captions";U.registerComponent("CaptionsButton",zf);var hi=function(e){function d(){return e.apply(this,arguments)||this}Z(d,e);d.prototype.createEl=function(c,a,b){var g='\x3cspan class\x3d"vjs-menu-item-text"\x3e'+this.localize(this.options_.label);
"captions"===this.options_.track.kind&&(g+='\n        \x3cspan aria-hidden\x3d"true" class\x3d"vjs-icon-placeholder"\x3e\x3c/span\x3e\n        \x3cspan class\x3d"vjs-control-text"\x3e '+this.localize("Captions")+"\x3c/span\x3e\n      ");return e.prototype.createEl.call(this,c,ja({innerHTML:g+"\x3c/span\x3e"},a),b)};return d}(id);U.registerComponent("SubsCapsMenuItem",hi);var Af=function(e){function d(a,b){void 0===b&&(b={});a=e.call(this,a,b)||this;a.label_="subtitles";-1<["en","en-us","en-ca","fr-ca"].indexOf(a.player_.language_)&&
(a.label_="captions");a.menuButton_.controlText(Ba(a.label_));return a}Z(d,e);var c=d.prototype;c.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)};c.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)};c.createItems=function(){var a=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(a.push(new yf(this.player_,{kind:this.label_})),this.hideThreshold_+=
1);return a=e.prototype.createItems.call(this,a,hi)};return d}(Kc);Af.prototype.kinds_=["captions","subtitles"];Af.prototype.controlText_="Subtitles";U.registerComponent("SubsCapsButton",Af);var ii=function(e){function d(a,b){var g=b.track,l=a.audioTracks();b.label=g.label||g.language||"Unknown";b.selected=g.enabled;var k=e.call(this,a,b)||this;k.track=g;k.addClass("vjs-"+g.kind+"-menu-item");var f=function(){for(var h=arguments.length,m=Array(h),p=0;p<h;p++)m[p]=arguments[p];k.handleTracksChange.apply(ia(k),
m)};l.addEventListener("change",f);k.on("dispose",function(){l.removeEventListener("change",f)});return k}Z(d,e);var c=d.prototype;c.createEl=function(a,b,g){var l='\x3cspan class\x3d"vjs-menu-item-text"\x3e'+this.localize(this.options_.label);"main-desc"===this.options_.track.kind&&(l+='\n        \x3cspan aria-hidden\x3d"true" class\x3d"vjs-icon-placeholder"\x3e\x3c/span\x3e\n        \x3cspan class\x3d"vjs-control-text"\x3e '+this.localize("Descriptions")+"\x3c/span\x3e\n      ");return e.prototype.createEl.call(this,
a,ja({innerHTML:l+"\x3c/span\x3e"},b),g)};c.handleClick=function(a){var b=this.player_.audioTracks();e.prototype.handleClick.call(this,a);for(a=0;a<b.length;a++){var g=b[a];g.enabled=g===this.track}};c.handleTracksChange=function(a){this.selected(this.track.enabled)};return d}(hd);U.registerComponent("AudioTrackMenuItem",ii);var ji=function(e){function d(a,b){void 0===b&&(b={});b.tracks=a.audioTracks();return e.call(this,a,b)||this}Z(d,e);var c=d.prototype;c.buildCSSClass=function(){return"vjs-audio-button "+
e.prototype.buildCSSClass.call(this)};c.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)};c.createItems=function(a){void 0===a&&(a=[]);this.hideThreshold_=1;for(var b=this.player_.audioTracks(),g=0;g<b.length;g++)a.push(new ii(this.player_,{track:b[g],selectable:!0,multiSelectable:!1}));return a};return d}(uf);ji.prototype.controlText_="Audio Track";U.registerComponent("AudioTrackButton",ji);var Bf=function(e){function d(a,b){var g=b.rate,l=parseFloat(g,
10);b.label=g;b.selected=1===l;b.selectable=!0;b.multiSelectable=!1;b=e.call(this,a,b)||this;b.label=g;b.rate=l;b.on(a,"ratechange",b.update);return b}Z(d,e);var c=d.prototype;c.handleClick=function(a){e.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};c.update=function(a){this.selected(this.player().playbackRate()===this.rate)};return d}(hd);Bf.prototype.contentElType="button";U.registerComponent("PlaybackRateMenuItem",Bf);var ki=function(e){function d(a,b){b=e.call(this,a,
b)||this;b.updateVisibility();b.updateLabel();b.on(a,"loadstart",b.updateVisibility);b.on(a,"ratechange",b.updateLabel);return b}Z(d,e);var c=d.prototype;c.createEl=function(){var a=e.prototype.createEl.call(this);this.labelEl_=xa("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});a.appendChild(this.labelEl_);return a};c.dispose=function(){this.labelEl_=null;e.prototype.dispose.call(this)};c.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)};c.buildWrapperCSSClass=
function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)};c.createMenu=function(){var a=new sf(this.player()),b=this.playbackRates();if(b)for(var g=b.length-1;0<=g;g--)a.addChild(new Bf(this.player(),{rate:b[g]+"x"}));return a};c.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};c.handleClick=function(a){a=this.player().playbackRate();for(var b=this.playbackRates(),g=b[0],l=0;l<b.length;l++)if(b[l]>a){g=b[l];break}this.player().playbackRate(g)};
c.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};c.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length};c.updateVisibility=function(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")};c.updateLabel=function(a){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+
"x")};return d}(tf);ki.prototype.controlText_="Playback Rate";U.registerComponent("PlaybackRateMenuButton",ki);var li=function(e){function d(){return e.apply(this,arguments)||this}Z(d,e);var c=d.prototype;c.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)};c.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return d}(U);U.registerComponent("Spacer",li);var Hl=function(e){function d(){return e.apply(this,arguments)||
this}Z(d,e);var c=d.prototype;c.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)};c.createEl=function(){var a=e.prototype.createEl.call(this,{className:this.buildCSSClass()});a.innerHTML="\u00a0";return a};return d}(li);U.registerComponent("CustomControlSpacer",Hl);var Sd=function(e){function d(){return e.apply(this,arguments)||this}Z(d,e);d.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};
return d}(U);Sd.prototype.options_={children:"playToggle volumePanel currentTimeDisplay timeDivider durationDisplay progressControl liveDisplay seekToLive remainingTimeDisplay customControlSpacer playbackRateMenuButton chaptersButton descriptionsButton subsCapsButton audioTrackButton fullscreenToggle".split(" ")};"exitPictureInPicture"in N&&Sd.prototype.options_.children.splice(Sd.prototype.options_.children.length-1,0,"pictureInPictureToggle");U.registerComponent("ControlBar",Sd);var mi=function(e){function d(a,
b){b=e.call(this,a,b)||this;b.on(a,"error",b.open);return b}Z(d,e);var c=d.prototype;c.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)};c.content=function(){var a=this.player().error();return a?this.localize(a.message):""};return d}(Fc);mi.prototype.options_=Tc({},Fc.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});U.registerComponent("ErrorDisplay",mi);var ni=["#000","Black"],oi=["#00F","Blue"],pi=["#0FF","Cyan"],qi=["#0F0","Green"],
ri=["#F0F","Magenta"],si=["#F00","Red"],ti=["#FFF","White"],ui=["#FF0","Yellow"],Cf=["1","Opaque"],Df=["0.5","Semi-Transparent"],vi=["0","Transparent"],lc={backgroundColor:{selector:".vjs-bg-color \x3e select",id:"captions-background-color-%s",label:"Color",options:[ni,ti,si,qi,oi,ui,ri,pi]},backgroundOpacity:{selector:".vjs-bg-opacity \x3e select",id:"captions-background-opacity-%s",label:"Transparency",options:[Cf,Df,vi]},color:{selector:".vjs-fg-color \x3e select",id:"captions-foreground-color-%s",
label:"Color",options:[ti,ni,si,qi,oi,ui,ri,pi]},edgeStyle:{selector:".vjs-edge-style \x3e select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family \x3e select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],
["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent \x3e select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity \x3e select",id:"captions-foreground-opacity-%s",
label:"Transparency",options:[Cf,Df]},windowColor:{selector:".vjs-window-color \x3e select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity \x3e select",id:"captions-window-opacity-%s",label:"Transparency",options:[vi,Df,Cf]}};lc.windowColor.options=lc.backgroundColor.options;var Il=function(e){function d(a,b){b.temporary=!1;var g=e.call(this,a,b)||this;g.updateDisplay=oa(ia(g),g.updateDisplay);g.fill();g.hasBeenOpened_=g.hasBeenFilled_=!0;g.endDialog=xa("p",
{className:"vjs-control-text",textContent:g.localize("End of dialog window.")});g.el().appendChild(g.endDialog);g.setDefaults();void 0===b.persistTextTrackSettings&&(g.options_.persistTextTrackSettings=g.options_.playerOptions.persistTextTrackSettings);g.on(g.$(".vjs-done-button"),"click",function(){g.saveSettings();g.close()});g.on(g.$(".vjs-default-button"),"click",function(){g.setDefaults();g.updateDisplay()});Ka(lc,function(l){g.on(g.$(l.selector),"change",g.updateDisplay)});g.options_.persistTextTrackSettings&&
g.restoreSettings();return g}Z(d,e);var c=d.prototype;c.dispose=function(){this.endDialog=null;e.prototype.dispose.call(this)};c.createElSelect_=function(a,b,g){var l=this;void 0===b&&(b="");void 0===g&&(g="label");a=lc[a];var k=a.id.replace("%s",this.id_),f=[b,k].join(" ").trim();return["\x3c"+g+' id\x3d"'+k+'" class\x3d"'+("label"===g?"vjs-label":"")+'"\x3e',this.localize(a.label),"\x3c/"+g+"\x3e",'\x3cselect aria-labelledby\x3d"'+f+'"\x3e'].concat(a.options.map(function(h){var m=k+"-"+h[1].replace(/\W+/g,
"");return['\x3coption id\x3d"'+m+'" value\x3d"'+h[0]+'" ','aria-labelledby\x3d"'+f+" "+m+'"\x3e',l.localize(h[1]),"\x3c/option\x3e"].join("")})).concat("\x3c/select\x3e").join("")};c.createElFgColor_=function(){var a="captions-text-legend-"+this.id_;return['\x3cfieldset class\x3d"vjs-fg-color vjs-track-setting"\x3e','\x3clegend id\x3d"'+a+'"\x3e',this.localize("Text"),"\x3c/legend\x3e",this.createElSelect_("color",a),'\x3cspan class\x3d"vjs-text-opacity vjs-opacity"\x3e',this.createElSelect_("textOpacity",
a),"\x3c/span\x3e\x3c/fieldset\x3e"].join("")};c.createElBgColor_=function(){var a="captions-background-"+this.id_;return['\x3cfieldset class\x3d"vjs-bg-color vjs-track-setting"\x3e','\x3clegend id\x3d"'+a+'"\x3e',this.localize("Background"),"\x3c/legend\x3e",this.createElSelect_("backgroundColor",a),'\x3cspan class\x3d"vjs-bg-opacity vjs-opacity"\x3e',this.createElSelect_("backgroundOpacity",a),"\x3c/span\x3e\x3c/fieldset\x3e"].join("")};c.createElWinColor_=function(){var a="captions-window-"+this.id_;
return['\x3cfieldset class\x3d"vjs-window-color vjs-track-setting"\x3e','\x3clegend id\x3d"'+a+'"\x3e',this.localize("Window"),"\x3c/legend\x3e",this.createElSelect_("windowColor",a),'\x3cspan class\x3d"vjs-window-opacity vjs-opacity"\x3e',this.createElSelect_("windowOpacity",a),"\x3c/span\x3e\x3c/fieldset\x3e"].join("")};c.createElColors_=function(){return xa("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};
c.createElFont_=function(){return xa("div",{className:"vjs-track-settings-font",innerHTML:['\x3cfieldset class\x3d"vjs-font-percent vjs-track-setting"\x3e',this.createElSelect_("fontPercent","","legend"),'\x3c/fieldset\x3e\x3cfieldset class\x3d"vjs-edge-style vjs-track-setting"\x3e',this.createElSelect_("edgeStyle","","legend"),'\x3c/fieldset\x3e\x3cfieldset class\x3d"vjs-font-family vjs-track-setting"\x3e',this.createElSelect_("fontFamily","","legend"),"\x3c/fieldset\x3e"].join("")})};c.createElControls_=
function(){var a=this.localize("restore all settings to the default values");return xa("div",{className:"vjs-track-settings-controls",innerHTML:['\x3cbutton type\x3d"button" class\x3d"vjs-default-button" title\x3d"'+a+'"\x3e',this.localize("Reset"),'\x3cspan class\x3d"vjs-control-text"\x3e '+a+"\x3c/span\x3e","\x3c/button\x3e",'\x3cbutton type\x3d"button" class\x3d"vjs-done-button"\x3e'+this.localize("Done")+"\x3c/button\x3e"].join("")})};c.content=function(){return[this.createElColors_(),this.createElFont_(),
this.createElControls_()]};c.label=function(){return this.localize("Caption Settings Dialog")};c.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};c.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};c.getValues=function(){var a=this;return Ga(lc,function(b,g,l){var k=a.$(g.selector);g=Rg(k.options[k.options.selectedIndex].value,g.parser);void 0!==g&&(b[l]=g);return b},{})};c.setValues=
function(a){var b=this;Ka(lc,function(g,l){var k=b.$(g.selector);l=a[l];g=g.parser;if(l)for(var f=0;f<k.options.length;f++)if(Rg(k.options[f].value,g)===l){k.selectedIndex=f;break}})};c.setDefaults=function(){var a=this;Ka(lc,function(b){var g=b.hasOwnProperty("default")?b["default"]:0;a.$(b.selector).selectedIndex=g})};c.restoreSettings=function(){try{var a=JSON.parse(G.localStorage.getItem("vjs-text-track-settings"))}catch(b){pa.warn(b)}a&&this.setValues(a)};c.saveSettings=function(){if(this.options_.persistTextTrackSettings){var a=
this.getValues();try{Object.keys(a).length?G.localStorage.setItem("vjs-text-track-settings",JSON.stringify(a)):G.localStorage.removeItem("vjs-text-track-settings")}catch(b){pa.warn(b)}}};c.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()};c.conditionalBlur_=function(){this.previouslyActiveEl_=null;var a=this.player_.controlBar,b=a&&a.subsCapsButton;a=a&&a.captionsButton;b?b.focus():a&&a.focus()};return d}(Fc);U.registerComponent("TextTrackSettings",Il);
var Jl=function(e){function d(a,b){var g=b.ResizeObserver||G.ResizeObserver;null===b.ResizeObserver&&(g=!1);var l=ya({createEl:!g,reportTouchActivity:!1},b);var k=e.call(this,a,l)||this;k.ResizeObserver=b.ResizeObserver||G.ResizeObserver;k.loadListener_=null;k.resizeObserver_=null;k.debouncedHandler_=Wk(function(){k.resizeHandler()},100,!1,ia(k));g?(k.resizeObserver_=new k.ResizeObserver(k.debouncedHandler_),k.resizeObserver_.observe(a.el())):(k.loadListener_=function(){if(k.el_&&k.el_.contentWindow){var f=
k.debouncedHandler_,h=k.unloadListener_=function(){Ra(this,"resize",f);Ra(this,"unload",h);h=null};jb(k.el_.contentWindow,"unload",h);jb(k.el_.contentWindow,"resize",f)}},k.one("load",k.loadListener_));return k}Z(d,e);var c=d.prototype;c.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})};c.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")};c.dispose=function(){this.debouncedHandler_&&
this.debouncedHandler_.cancel();this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect());this.loadListener_&&this.off("load",this.loadListener_);this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow);this.loadListener_=this.debouncedHandler_=this.resizeObserver=this.ResizeObserver=null;e.prototype.dispose.call(this)};return d}(U);U.registerComponent("ResizeManager",Jl);var Kl={trackingThreshold:30,
liveTolerance:15},Ll=function(e){function d(a,b){b=ya(Kl,b,{createEl:!1});a=e.call(this,a,b)||this;a.reset_();a.on(a.player_,"durationchange",a.handleDurationchange);if(ed&&"hidden"in N&&"visibilityState"in N)a.on(N,"visibilitychange",a.handleVisibilityChange);return a}Z(d,e);var c=d.prototype;c.handleVisibilityChange=function(){Infinity===this.player_.duration()&&(N.hidden?this.stopTracking():this.startTracking())};c.trackLive_=function(){var a=this.player_.seekable();if(a&&a.length){a=Number(G.performance.now().toFixed(4));
var b=-1===this.lastTime_?0:(a-this.lastTime_)/1E3;this.lastTime_=a;this.pastSeekEnd_=this.pastSeekEnd()+b;a=this.liveCurrentTime();b=this.player_.currentTime();b=this.player_.paused()||this.seekedBehindLive_||Math.abs(a-b)>this.options_.liveTolerance;this.timeupdateSeen_&&Infinity!==a||(b=!1);b!==this.behindLiveEdge_&&(this.behindLiveEdge_=b,this.trigger("liveedgechange"))}};c.handleDurationchange=function(){Infinity===this.player_.duration()&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&
this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())};c.startTracking=function(){if(!this.isTracking())if(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLive_),this.timeupdateSeen_)this.on(this.player_,"seeked",this.handleSeeked);else this.one(this.player_,"play",this.handlePlay),this.one(this.player_,
"timeupdate",this.handleFirstTimeupdate)};c.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0;this.on(this.player_,"seeked",this.handleSeeked)};c.handleSeeked=function(){var a=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.skipNextSeeked_?!1:2<a;this.skipNextSeeked_=!1;this.trackLive_()};c.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)};c.reset_=function(){this.lastTime_=-1;this.pastSeekEnd_=0;this.lastSeekEnd_=-1;this.behindLiveEdge_=
!0;this.skipNextSeeked_=this.seekedBehindLive_=this.timeupdateSeen_=!1;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.off(this.player_,["play","pause"],this.trackLive_);this.off(this.player_,"seeked",this.handleSeeked);this.off(this.player_,"play",this.handlePlay);this.off(this.player_,"timeupdate",this.handleFirstTimeupdate);this.off(this.player_,"timeupdate",this.seekToLiveEdge)};c.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))};
c.seekableEnd=function(){for(var a=this.player_.seekable(),b=[],g=a?a.length:0;g--;)b.push(a.end(g));return b.length?b.sort()[b.length-1]:Infinity};c.seekableStart=function(){for(var a=this.player_.seekable(),b=[],g=a?a.length:0;g--;)b.push(a.start(g));return b.length?b.sort()[0]:0};c.liveWindow=function(){var a=this.liveCurrentTime();return Infinity===a?Infinity:a-this.seekableStart()};c.isLive=function(){return this.isTracking()};c.atLiveEdge=function(){return!this.behindLiveEdge()};c.liveCurrentTime=
function(){return this.pastSeekEnd()+this.seekableEnd()};c.pastSeekEnd=function(){var a=this.seekableEnd();-1!==this.lastSeekEnd_&&a!==this.lastSeekEnd_&&(this.pastSeekEnd_=0);this.lastSeekEnd_=a;return this.pastSeekEnd_};c.behindLiveEdge=function(){return this.behindLiveEdge_};c.isTracking=function(){return"number"===typeof this.trackingInterval_};c.seekToLiveEdge=function(){this.seekedBehindLive_=!1;this.atLiveEdge()||(this.skipNextSeeked_=!0,this.player_.currentTime(this.liveCurrentTime()))};c.dispose=
function(){this.off(N,"visibilitychange",this.handleVisibilityChange);this.stopTracking();e.prototype.dispose.call(this)};return d}(U);U.registerComponent("LiveTracker",Ll);var Ef=function(e){var d=e.el();if(d.hasAttribute("src"))return e.triggerSourceset(d.src),!0;d=e.$$("source");var c=[],a="";if(!d.length)return!1;for(var b=0;b<d.length;b++){var g=d[b].src;g&&-1===c.indexOf(g)&&c.push(g)}if(!c.length)return!1;1===c.length&&(a=c[0]);e.triggerSourceset(a);return!0},Ml=Object.defineProperty({},"innerHTML",
{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var d=N.createElement(this.nodeName.toLowerCase());d.innerHTML=e;for(e=N.createDocumentFragment();d.childNodes.length;)e.appendChild(d.childNodes[0]);this.innerText="";G.Element.prototype.appendChild.call(this,e);return this.innerHTML}}),wi=function(e,d){for(var c={},a=0;a<e.length&&!((c=Object.getOwnPropertyDescriptor(e[a],d))&&c.set&&c.get);a++);c.enumerable=!0;c.configurable=!0;return c},xi=function(e){var d=e.el();if(!d.resetSourceWatch_){var c=
{},a=wi([e.el(),G.HTMLMediaElement.prototype,G.Element.prototype,Ml],"innerHTML"),b=function(g){return function(){for(var l=arguments.length,k=Array(l),f=0;f<l;f++)k[f]=arguments[f];l=g.apply(d,k);Ef(e);return l}};["append","appendChild","insertAdjacentHTML"].forEach(function(g){d[g]&&(c[g]=d[g],d[g]=b(c[g]))});Object.defineProperty(d,"innerHTML",ya(a,{set:b(a.set)}));d.resetSourceWatch_=function(){d.resetSourceWatch_=null;Object.keys(c).forEach(function(g){d[g]=c[g]});Object.defineProperty(d,"innerHTML",
a)};e.one("sourceset",d.resetSourceWatch_)}},Nl=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Oh(G.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){G.Element.prototype.setAttribute.call(this,"src",e);return e}}),Ol=function(e){if(e.featuresSourceset){var d=e.el();if(!d.resetSourceset_){var c=wi([e.el(),G.HTMLMediaElement.prototype,Nl],"src"),a=d.setAttribute,b=d.load;Object.defineProperty(d,"src",ya(c,{set:function(g){g=c.set.call(d,g);e.triggerSourceset(d.src);
return g}}));d.setAttribute=function(g,l){l=a.call(d,g,l);/src/i.test(g)&&e.triggerSourceset(d.src);return l};d.load=function(){var g=b.call(d);Ef(e)||(e.triggerSourceset(""),xi(e));return g};d.currentSrc?e.triggerSourceset(d.currentSrc):Ef(e)||xi(e);d.resetSourceset_=function(){d.resetSourceset_=null;d.load=b;d.setAttribute=a;Object.defineProperty(d,"src",c);d.resetSourceWatch_&&d.resetSourceWatch_()}}}},Ff=function(e,d,c,a){void 0===a&&(a=!0);var b=function(l){return Object.defineProperty(e,d,{value:l,
enumerable:!0,writable:!0})},g={configurable:!0,enumerable:!0,get:function(){var l=c();b(l);return l}};a&&(g.set=b);return Object.defineProperty(e,d,g)},ba=function(e){function d(a,b){b=e.call(this,a,b)||this;var g=a.source,l=!1;g&&(b.el_.currentSrc!==g.src||a.tag&&3===a.tag.initNetworkState_)?b.setSource(g):b.handleLateInit_(b.el_);a.enableSourceset&&b.setupSourcesetHandling_();if(b.el_.hasChildNodes()){var k=b.el_.childNodes,f=k.length;for(g=[];f--;){var h=k[f];"track"===h.nodeName.toLowerCase()&&
(b.featuresNativeTextTracks?(b.remoteTextTrackEls().addTrackElement_(h),b.remoteTextTracks().addTrack(h.track),b.textTracks().addTrack(h.track),l||b.el_.hasAttribute("crossorigin")||!Qd(h.src)||(l=!0)):g.push(h))}for(k=0;k<g.length;k++)b.el_.removeChild(g[k])}b.proxyNativeTracks_();b.featuresNativeTextTracks&&l&&pa.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading.");b.restoreMetadataTracksInIOSNativePlayer_();
(Dc||cf||Fh)&&!0===a.nativeControlsForTouch&&b.setControls(!0);b.proxyWebkitFullscreen_();b.triggerReady();return b}Z(d,e);var c=d.prototype;c.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_();d.disposeMediaElement(this.el_);this.options_=null;e.prototype.dispose.call(this)};c.setupSourcesetHandling_=function(){Ol(this)};c.restoreMetadataTracksInIOSNativePlayer_=function(){var a=this.textTracks(),b,g=function(){b=[];for(var k=0;k<a.length;k++){var f=a[k];"metadata"===
f.kind&&b.push({track:f,storedMode:f.mode})}};g();a.addEventListener("change",g);this.on("dispose",function(){return a.removeEventListener("change",g)});var l=function f(){for(var h=0;h<b.length;h++){var m=b[h];"disabled"===m.track.mode&&m.track.mode!==m.storedMode&&(m.track.mode=m.storedMode)}a.removeEventListener("change",f)};this.on("webkitbeginfullscreen",function(){a.removeEventListener("change",g);a.removeEventListener("change",l);a.addEventListener("change",l)});this.on("webkitendfullscreen",
function(){a.removeEventListener("change",g);a.addEventListener("change",g);a.removeEventListener("change",l)})};c.overrideNative_=function(a,b){var g=this;if(b===this["featuresNative"+a+"Tracks"]){var l=a.toLowerCase();this[l+"TracksListeners_"]&&Object.keys(this[l+"TracksListeners_"]).forEach(function(k){g.el()[l+"Tracks"].removeEventListener(k,g[l+"TracksListeners_"][k])});this["featuresNative"+a+"Tracks"]=!b;this[l+"TracksListeners_"]=null;this.proxyNativeTracksForType_(l)}};c.overrideNativeAudioTracks=
function(a){this.overrideNative_("Audio",a)};c.overrideNativeVideoTracks=function(a){this.overrideNative_("Video",a)};c.proxyNativeTracksForType_=function(a){var b=this,g=ub[a],l=this.el()[g.getterName],k=this[g.getterName]();if(this["featuresNative"+g.capitalName+"Tracks"]&&l&&l.addEventListener){var f={change:function(m){m={type:"change",target:k,currentTarget:k,srcElement:k};k.trigger(m);"text"===a&&b[Ic.remoteText.getterName]().trigger(m)},addtrack:function(m){k.addTrack(m.track)},removetrack:function(m){k.removeTrack(m.track)}},
h=function(){for(var m=[],p=0;p<k.length;p++){for(var q=!1,r=0;r<l.length;r++)if(l[r]===k[p]){q=!0;break}q||m.push(k[p])}for(;m.length;)k.removeTrack(m.shift())};this[g.getterName+"Listeners_"]=f;Object.keys(f).forEach(function(m){var p=f[m];l.addEventListener(m,p);b.on("dispose",function(q){return l.removeEventListener(m,p)})});this.on("loadstart",h);this.on("dispose",function(m){return b.off("loadstart",h)})}};c.proxyNativeTracks_=function(){var a=this;ub.names.forEach(function(b){a.proxyNativeTracksForType_(b)})};
c.createEl=function(){var a=this.options_.tag;if(!a||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(a){var b=a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(b,a);d.disposeMediaElement(a);a=b}else a=N.createElement("video"),b=this.options_.tag&&X(this.options_.tag),b=ya({},b),Dc&&!0===this.options_.nativeControlsForTouch||delete b.controls,xd(a,ja(b,{id:this.options_.techId,"class":"vjs-tech"}));a.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&
a.setAttribute("preload",this.options_.preload);void 0!==this.options_.disablePictureInPicture&&(a.disablePictureInPicture=this.options_.disablePictureInPicture);b=["loop","muted","playsinline","autoplay"];for(var g=0;g<b.length;g++){var l=b[g],k=this.options_[l];"undefined"!==typeof k&&(k?a.setAttribute(l,l):a.removeAttribute(l),a[l]=k)}return a};c.handleLateInit_=function(a){if(0!==a.networkState&&3!==a.networkState)if(0===a.readyState){var b=!1,g=function(){b=!0};this.on("loadstart",g);var l=function(){b||
this.trigger("loadstart")};this.on("loadedmetadata",l);this.ready(function(){this.off("loadstart",g);this.off("loadedmetadata",l);b||this.trigger("loadstart")})}else{var k=["loadstart"];k.push("loadedmetadata");2<=a.readyState&&k.push("loadeddata");3<=a.readyState&&k.push("canplay");4<=a.readyState&&k.push("canplaythrough");this.ready(function(){k.forEach(function(f){this.trigger(f)},this)})}};c.setScrubbing=function(a){this.isScrubbing_=a};c.setCurrentTime=function(a){try{this.isScrubbing_&&this.el_.fastSeek&&
Ld?this.el_.fastSeek(a):this.el_.currentTime=a}catch(b){pa(b,"Video is not ready. (Video.js)")}};c.duration=function(){var a=this;return Infinity===this.el_.duration&&$b&&Rb&&0===this.el_.currentTime?(this.on("timeupdate",function g(){0<a.el_.currentTime&&(Infinity===a.el_.duration&&a.trigger("durationchange"),a.off("timeupdate",g))}),NaN):this.el_.duration||NaN};c.width=function(){return this.el_.offsetWidth};c.height=function(){return this.el_.offsetHeight};c.proxyWebkitFullscreen_=function(){var a=
this;if("webkitDisplayingFullscreen"in this.el_){var b=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},g=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",b),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",g);this.on("dispose",function(){a.off("webkitbeginfullscreen",g);a.off("webkitendfullscreen",b)})}};c.supportsFullScreen=function(){if("function"===
typeof this.el_.webkitEnterFullScreen){var a=G.navigator&&G.navigator.userAgent||"";if(/Android/.test(a)||!/Chrome|Mac OS X 10.5/.test(a))return!0}return!1};c.enterFullScreen=function(){var a=this.el_;if(a.paused&&a.networkState<=a.HAVE_METADATA)gc(this.el_.play()),this.setTimeout(function(){a.pause();try{a.webkitEnterFullScreen()}catch(b){this.trigger("fullscreenerror",b)}},0);else try{a.webkitEnterFullScreen()}catch(b){this.trigger("fullscreenerror",b)}};c.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?
this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",Error("The video is not fullscreen"))};c.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()};c.src=function(a){if(void 0===a)return this.el_.src;this.setSrc(a)};c.reset=function(){d.resetMediaElement(this.el_)};c.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc};c.setControls=function(a){this.el_.controls=!!a};c.addTextTrack=function(a,b,g){return this.featuresNativeTextTracks?
this.el_.addTextTrack(a,b,g):e.prototype.addTextTrack.call(this,a,b,g)};c.createRemoteTextTrack=function(a){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,a);var b=N.createElement("track");a.kind&&(b.kind=a.kind);a.label&&(b.label=a.label);if(a.language||a.srclang)b.srclang=a.language||a.srclang;a["default"]&&(b["default"]=a["default"]);a.id&&(b.id=a.id);a.src&&(b.src=a.src);return b};c.addRemoteTextTrack=function(a,b){a=e.prototype.addRemoteTextTrack.call(this,
a,b);this.featuresNativeTextTracks&&this.el().appendChild(a);return a};c.removeRemoteTextTrack=function(a){e.prototype.removeRemoteTextTrack.call(this,a);if(this.featuresNativeTextTracks)for(var b=this.$$("track"),g=b.length;g--;)a!==b[g]&&a!==b[g].track||this.el().removeChild(b[g])};c.getVideoPlaybackQuality=function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var a={};"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==
typeof this.el().webkitDecodedFrameCount&&(a.droppedVideoFrames=this.el().webkitDroppedFrameCount,a.totalVideoFrames=this.el().webkitDecodedFrameCount);G.performance&&"function"===typeof G.performance.now?a.creationTime=G.performance.now():G.performance&&G.performance.timing&&"number"===typeof G.performance.timing.navigationStart&&(a.creationTime=G.Date.now()-G.performance.timing.navigationStart);return a};return d}(wa);Ff(ba,"TEST_VID",function(){if(Tb()){var e=N.createElement("video"),d=N.createElement("track");
d.kind="captions";d.srclang="en";d.label="English";e.appendChild(d);return e}});ba.isSupported=function(){try{ba.TEST_VID.volume=.5}catch(e){return!1}return!(!ba.TEST_VID||!ba.TEST_VID.canPlayType)};ba.canPlayType=function(e){return ba.TEST_VID.canPlayType(e)};ba.canPlaySource=function(e,d){return ba.canPlayType(e.type)};ba.canControlVolume=function(){try{var e=ba.TEST_VID.volume;ba.TEST_VID.volume=e/2+.1;return e!==ba.TEST_VID.volume}catch(d){return!1}};ba.canMuteVolume=function(){try{var e=ba.TEST_VID.muted;
ba.TEST_VID.muted=!e;ba.TEST_VID.muted?ba.TEST_VID.setAttribute("muted","muted"):ba.TEST_VID.removeAttribute("muted");return e!==ba.TEST_VID.muted}catch(d){return!1}};ba.canControlPlaybackRate=function(){if($b&&Rb&&58>Hh)return!1;try{var e=ba.TEST_VID.playbackRate;ba.TEST_VID.playbackRate=e/2+.1;return e!==ba.TEST_VID.playbackRate}catch(d){return!1}};ba.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(N.createElement("video"),"src",{get:e,set:e});Object.defineProperty(N.createElement("audio"),
"src",{get:e,set:e});Object.defineProperty(N.createElement("video"),"innerHTML",{get:e,set:e});Object.defineProperty(N.createElement("audio"),"innerHTML",{get:e,set:e})}catch(d){return!1}return!0};ba.supportsNativeTextTracks=function(){return Ld||Ab&&Rb};ba.supportsNativeVideoTracks=function(){return!(!ba.TEST_VID||!ba.TEST_VID.videoTracks)};ba.supportsNativeAudioTracks=function(){return!(!ba.TEST_VID||!ba.TEST_VID.audioTracks)};ba.Events="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange resize volumechange".split(" ");
[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(e){var d=e[1];Ff(ba.prototype,e[0],function(){return ba[d]()},!0)});ba.prototype.movingMediaElementInDOM=!Ab;ba.prototype.featuresFullscreenResize=
!0;ba.prototype.featuresProgressEvents=!0;ba.prototype.featuresTimeupdateEvents=!0;var Td;ba.patchCanPlayType=function(){4<=$e&&!Gh&&!Rb&&(Td=ba.TEST_VID&&ba.TEST_VID.constructor.prototype.canPlayType,ba.TEST_VID.constructor.prototype.canPlayType=function(e){var d=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return e&&d.test(e)?"maybe":Td.call(this,e)})};ba.unpatchCanPlayType=function(){var e=ba.TEST_VID.constructor.prototype.canPlayType;Td&&(ba.TEST_VID.constructor.prototype.canPlayType=Td);return e};
ba.patchCanPlayType();ba.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src");if("function"===typeof e.load)try{e.load()}catch(d){}}};ba.resetMediaElement=function(e){if(e){for(var d=e.querySelectorAll("source"),c=d.length;c--;)e.removeChild(d[c]);e.removeAttribute("src");if("function"===typeof e.load)try{e.load()}catch(a){}}};"muted defaultMuted autoplay controls loop playsinline".split(" ").forEach(function(e){ba.prototype[e]=
function(){return this.el_[e]||this.el_.hasAttribute(e)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){ba.prototype["set"+Ba(e)]=function(d){(this.el_[e]=d)?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}});"paused currentTime buffered volume poster preload error seeking seekable ended playbackRate defaultPlaybackRate disablePictureInPicture played networkState readyState videoWidth videoHeight crossOrigin".split(" ").forEach(function(e){ba.prototype[e]=function(){return this.el_[e]}});
"volume src poster preload playbackRate defaultPlaybackRate disablePictureInPicture crossOrigin".split(" ").forEach(function(e){ba.prototype["set"+Ba(e)]=function(d){this.el_[e]=d}});["pause","load","play"].forEach(function(e){ba.prototype[e]=function(){return this.el_[e]()}});wa.withSourceHandlers(ba);ba.nativeSourceHandler={};ba.nativeSourceHandler.canPlayType=function(e){try{return ba.TEST_VID.canPlayType(e)}catch(d){return""}};ba.nativeSourceHandler.canHandleSource=function(e,d){return e.type?
ba.nativeSourceHandler.canPlayType(e.type):e.src?(e=kf(e.src),ba.nativeSourceHandler.canPlayType("video/"+e)):""};ba.nativeSourceHandler.handleSource=function(e,d,c){d.setSrc(e.src)};ba.nativeSourceHandler.dispose=function(){};ba.registerSourceHandler(ba.nativeSourceHandler);wa.registerTech("Html5",ba);var yi="progress abort suspend emptied stalled loadedmetadata loadeddata timeupdate resize volumechange texttrackchange nativetexttrackchange".split(" "),Gf={canplay:"CanPlay",canplaythrough:"CanPlayThrough",
playing:"Playing",seeked:"Seeked"},Hf="tiny xsmall small medium large xlarge huge".split(" "),Ud={};Hf.forEach(function(e){var d="x"===e.charAt(0)?"x-"+e.substring(1):e;Ud[e]="vjs-layout-"+d});var Pl={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity},Ea=function(e){function d(a,b,g){a.id=a.id||b.id||"vjs_video_"+Wb++;b=ja(d.getTagSettings(a),b);b.initChildren=!1;b.createEl=!1;b.evented=!1;b.reportTouchActivity=!1;if(!b.language)if("function"===typeof a.closest){var l=
a.closest("[lang]");l&&l.getAttribute&&(b.language=l.getAttribute("lang"))}else for(l=a;l&&1===l.nodeType;){if(X(l).hasOwnProperty("lang")){b.language=l.getAttribute("lang");break}l=l.parentNode}var k=e.call(this,null,b,g)||this;k.boundDocumentFullscreenChange_=oa(ia(k),k.documentFullscreenChange_);k.boundFullWindowOnEscKey_=oa(ia(k),k.fullWindowOnEscKey);k.isFullscreen_=!1;k.log=uh(k.id_);k.fsApi_=df;k.isPosterFromTech_=!1;k.queuedCallbacks_=[];k.isReady_=!1;k.hasStarted_=!1;k.userActive_=!1;k.debugEnabled_=
!1;if(!k.options_||!k.options_.techOrder||!k.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");k.tag=a;k.tagAttributes=a&&X(a);k.language(k.options_.language);if(b.languages){var f={};Object.getOwnPropertyNames(b.languages).forEach(function(h){f[h.toLowerCase()]=b.languages[h]});k.languages_=f}else k.languages_=d.prototype.options_.languages;k.resetCache_();k.poster_=b.poster||"";k.controls_=
!!b.controls;a.controls=!1;a.removeAttribute("controls");k.changingSrc_=!1;k.playCallbacks_=[];k.playTerminatedQueue_=[];a.hasAttribute("autoplay")?k.autoplay(!0):k.autoplay(k.options_.autoplay);b.plugins&&Object.keys(b.plugins).forEach(function(h){if("function"!==typeof k[h])throw Error('plugin "'+h+'" does not exist');});k.scrubbing_=!1;k.el_=k.createEl();Ce(ia(k),{eventBusKey:"el_"});k.fsApi_.requestFullscreen&&(jb(N,k.fsApi_.fullscreenchange,k.boundDocumentFullscreenChange_),k.on(k.fsApi_.fullscreenchange,
k.boundDocumentFullscreenChange_));if(k.fluid_)k.on("playerreset",k.updateStyleEl_);g=ya(k.options_);b.plugins&&Object.keys(b.plugins).forEach(function(h){k[h](b.plugins[h])});b.debug&&k.debug(!0);k.options_.playerOptions=g;k.middleware_=[];k.initChildren();k.isAudio("audio"===a.nodeName.toLowerCase());k.controls()?k.addClass("vjs-controls-enabled"):k.addClass("vjs-controls-disabled");k.el_.setAttribute("role","region");k.isAudio()?k.el_.setAttribute("aria-label",k.localize("Audio Player")):k.el_.setAttribute("aria-label",
k.localize("Video Player"));k.isAudio()&&k.addClass("vjs-audio");k.flexNotSupported_()&&k.addClass("vjs-no-flex");Dc&&k.addClass("vjs-touch-enabled");Ab||k.addClass("vjs-workinghover");d.players[k.id_]=ia(k);k.addClass("vjs-v7");k.userActive(!0);k.reportUserActivity();k.one("play",k.listenForUserActivity_);k.on("stageclick",k.handleStageClick_);k.on("keydown",k.handleKeyDown);k.breakpoints(k.options_.breakpoints);k.responsive(k.options_.responsive);return k}Z(d,e);var c=d.prototype;c.dispose=function(){var a=
this;this.trigger("dispose");this.off("dispose");Ra(N,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);Ra(N,"keydown",this.boundFullWindowOnEscKey_);this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null);d.players[this.id_]=null;this.tag&&this.tag.player&&(this.tag.player=null);this.el_&&this.el_.player&&(this.el_.player=null);this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_="");this.playerElIngest_&&
(this.playerElIngest_=null);this.tag&&(this.tag=null);Ke[this.id()]=null;ab.names.forEach(function(b){(b=a[ab[b].getterName]())&&b.off&&b.off()});e.prototype.dispose.call(this)};c.createEl=function(){var a=this.tag,b=this.playerElIngest_=a.parentNode&&a.parentNode.hasAttribute&&a.parentNode.hasAttribute("data-vjs-player"),g="video-js"===this.tag.tagName.toLowerCase();if(b)var l=this.el_=a.parentNode;else g||(l=this.el_=e.prototype.createEl.call(this,"div"));var k=X(a);if(g){l=this.el_=a;for(a=this.tag=
N.createElement("video");l.children.length;)a.appendChild(l.firstChild);Pb(l,"video-js")||sb(l,"video-js");l.appendChild(a);b=this.playerElIngest_=l;Object.keys(l).forEach(function(p){try{a[p]=l[p]}catch(q){}})}a.setAttribute("tabindex","-1");k.tabindex="-1";if(ed||Rb&&Ih)a.setAttribute("role","application"),k.role="application";a.removeAttribute("width");a.removeAttribute("height");"width"in k&&delete k.width;"height"in k&&delete k.height;Object.getOwnPropertyNames(k).forEach(function(p){g&&"class"===
p||l.setAttribute(p,k[p]);g&&a.setAttribute(p,k[p])});a.playerId=a.id;a.id+="_html5_api";a.className="vjs-tech";a.player=l.player=this;this.addClass("vjs-paused");if(!0!==G.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=xh("vjs-styles-dimensions");var f=Xb(".vjs-styles-defaults"),h=Xb("head");h.insertBefore(this.styleEl_,f?f.nextSibling:h.firstChild)}this.fluid_=this.fill_=!1;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);
this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);f=a.getElementsByTagName("a");for(h=0;h<f.length;h++){var m=f.item(h);sb(m,"vjs-hidden");m.setAttribute("hidden","hidden")}a.initNetworkState_=a.networkState;a.parentNode&&!b&&a.parentNode.insertBefore(l,a);rb(a,l);this.children_.unshift(a);this.el_.setAttribute("lang",this.language_);return this.el_=l};c.crossOrigin=function(a){if(!a)return this.techGet_("crossOrigin");"anonymous"!==a&&"use-credentials"!==a?pa.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+
a+'"'):this.techCall_("setCrossOrigin",a)};c.width=function(a){return this.dimension("width",a)};c.height=function(a){return this.dimension("height",a)};c.dimension=function(a,b){var g=a+"_";if(void 0===b)return this[g]||0;if(""===b||"auto"===b)this[g]=void 0,this.updateStyleEl_();else{var l=parseFloat(b);isNaN(l)?pa.error('Improper value "'+b+'" supplied for for '+a):(this[g]=l,this.updateStyleEl_())}};c.fluid=function(a){if(void 0===a)return!!this.fluid_;this.fluid_=!!a;ec(this)&&this.off("playerreset",
this.updateStyleEl_);a?(this.addClass("vjs-fluid"),this.fill(!1),Xk(function(){this.on("playerreset",this.updateStyleEl_)})):this.removeClass("vjs-fluid");this.updateStyleEl_()};c.fill=function(a){if(void 0===a)return!!this.fill_;this.fill_=!!a;a?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")};c.aspectRatio=function(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+:\d+$/.test(a))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");
this.aspectRatio_=a;this.fluid(!0);this.updateStyleEl_()};c.updateStyleEl_=function(){if(!0===G.VIDEOJS_NO_DYNAMIC_STYLE){var a="number"===typeof this.width_?this.width_:this.options_.width,b="number"===typeof this.height_?this.height_:this.options_.height,g=this.tech_&&this.tech_.el();g&&(0<=a&&(g.width=a),0<=b&&(g.height=b))}else{a=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":");var l=a[1]/
a[0];a=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/l:this.videoWidth()||300;b=void 0!==this.height_?this.height_:a*l;g=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions";this.addClass(g);yh(this.styleEl_,"\n      ."+g+" {\n        width: "+a+"px;\n        height: "+b+"px;\n      }\n\n      ."+g+".vjs-fluid {\n        padding-top: "+100*l+"%;\n      }\n    ")}};c.loadTech_=function(a,b){var g=this;this.tech_&&this.unloadTech_();var l=Ba(a),k=a.charAt(0).toLowerCase()+
a.slice(1);"Html5"!==l&&this.tag&&(wa.getTech("Html5").disposeMediaElement(this.tag),this.tag=this.tag.player=null);this.techName_=l;this.isReady_=!1;var f="string"===typeof this.autoplay()?!1:this.autoplay(),h={source:b,autoplay:f,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+k+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,
poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};ab.names.forEach(function(m){m=ab[m];h[m.getterName]=g[m.privateName]});ja(h,this.options_[l]);ja(h,this.options_[k]);ja(h,this.options_[a.toLowerCase()]);this.tag&&(h.tag=this.tag);b&&b.src===this.cache_.src&&0<this.cache_.currentTime&&(h.startTime=
this.cache_.currentTime);a=wa.getTech(a);if(!a)throw Error("No Tech named '"+l+"' exists! '"+l+"' should be registered using videojs.registerTech()'");this.tech_=new a(h);this.tech_.ready(oa(this,this.handleTechReady_),!0);Kh.jsonToTextTracks(this.textTracksJson_||[],this.tech_);yi.forEach(function(m){g.on(g.tech_,m,g["handleTech"+Ba(m)+"_"])});Object.keys(Gf).forEach(function(m){g.on(g.tech_,m,function(p){if(0===g.tech_.playbackRate()&&g.tech_.seeking())g.queuedCallbacks_.push({callback:g["handleTech"+
Gf[m]+"_"].bind(g),event:p});else g["handleTech"+Gf[m]+"_"](p)})});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,
"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_);this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_);this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);
this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_();this.tech_.el().parentNode===this.el()||"Html5"===l&&this.tag||rb(this.tech_.el(),this.el());this.tag&&(this.tag=this.tag.player=null)};c.unloadTech_=function(){var a=this;ab.names.forEach(function(b){b=ab[b];a[b.privateName]=a[b.getterName]()});this.textTracksJson_=
Kh.textTracksToJson(this.tech_);this.isReady_=!1;this.tech_.dispose();this.tech_=!1;this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange"));this.isPosterFromTech_=!1};c.tech=function(a){void 0===a&&pa.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n");return this.tech_};c.addTechControlsListeners_=function(){this.removeTechControlsListeners_();this.on(this.tech_,"mouseup",this.handleTechClick_);
this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};c.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,
"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mouseup",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)};c.handleTechReady_=function(){this.triggerReady();this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume);this.handleTechPosterChange_();this.handleTechDurationChange_()};c.handleTechLoadStart_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();this.paused()?(this.hasStarted(!1),
this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"));this.manualAutoplay_(this.autoplay())};c.manualAutoplay_=function(a){var b=this;if(this.tech_&&"string"===typeof a){var g=function(){var k=b.muted();b.muted(!0);var f=function(){b.muted(k)};b.playTerminatedQueue_.push(f);var h=b.play();if(Vc(h))return h["catch"](f)};if("any"===a&&!0!==this.muted()){var l=this.play();Vc(l)&&(l=l["catch"](g))}else l="muted"===a&&!0!==this.muted()?g():this.play();if(Vc(l))return l.then(function(){b.trigger({type:"autoplay-success",
autoplay:a})})["catch"](function(k){b.trigger({type:"autoplay-failure",autoplay:a})})}};c.updateSourceCaches_=function(a){void 0===a&&(a="");var b=a,g="";"string"!==typeof b&&(b=a.src,g=a.type);this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];b&&!g&&(g=rl(this,b));this.cache_.source=ya({},a,{src:b,type:g});a=this.cache_.sources.filter(function(m){return m.src&&m.src===b});g=[];for(var l=this.$$("source"),k=[],f=0;f<l.length;f++){var h=X(l[f]);g.push(h);h.src&&
h.src===b&&k.push(h.src)}k.length&&!a.length?this.cache_.sources=g:a.length||(this.cache_.sources=[this.cache_.source]);this.cache_.src=b};c.handleTechSourceset_=function(a){var b=this;if(!this.changingSrc_){var g=function(f){return b.updateSourceCaches_(f)},l=this.currentSource().src,k=a.src;l&&!/^blob:/.test(l)&&/^blob:/.test(k)&&(!this.lastSource_||this.lastSource_.tech!==k&&this.lastSource_.player!==l)&&(g=function(){});g(k);a.src||this.tech_.any(["sourceset","loadstart"],function(f){"sourceset"!==
f.type&&(f=b.techGet("currentSrc"),b.lastSource_.tech=f,b.updateSourceCaches_(f))})}this.lastSource_={player:this.currentSource().src,tech:a.src};this.trigger({src:a.src,type:"sourceset"})};c.hasStarted=function(a){if(void 0===a)return this.hasStarted_;a!==this.hasStarted_&&((this.hasStarted_=a)?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))};c.handleTechPlay_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");
this.hasStarted(!0);this.trigger("play")};c.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(a){return a.callback(a.event)}),this.queuedCallbacks_=[]);this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")};c.handleTechWaiting_=function(){var a=this;this.addClass("vjs-waiting");this.trigger("waiting");var b=this.currentTime();this.on("timeupdate",function l(){b!==a.currentTime()&&(a.removeClass("vjs-waiting"),
a.off("timeupdate",l))})};c.handleTechCanPlay_=function(){this.removeClass("vjs-waiting");this.trigger("canplay")};c.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};c.handleTechPlaying_=function(){this.removeClass("vjs-waiting");this.trigger("playing")};c.handleTechSeeking_=function(){this.addClass("vjs-seeking");this.trigger("seeking")};c.handleTechSeeked_=function(){this.removeClass("vjs-seeking");this.removeClass("vjs-ended");this.trigger("seeked")};
c.handleTechFirstPlay_=function(){this.options_.starttime&&(pa.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime));this.addClass("vjs-has-started");this.trigger("firstplay")};c.handleTechPause_=function(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};c.handleTechEnded_=function(){this.addClass("vjs-ended");this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause();this.trigger("ended")};
c.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))};c.handleTechClick_=function(a){tc(a)&&this.controls_&&(this.paused()?gc(this.play()):this.pause())};c.handleTechDoubleClick_=function(a){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(b){return b.contains(a.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||
(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,a):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))};c.handleTechTap_=function(){this.userActive(!this.userActive())};c.handleTechTouchStart_=function(){this.userWasActive=this.userActive()};c.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()};c.handleTechTouchEnd_=function(a){a.preventDefault()};
c.handleStageClick_=function(){this.reportUserActivity()};c.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")};c.documentFullscreenChange_=function(a){a=a.target.player;if(!a||a===this){a=this.el();var b=N[this.fsApi_.fullscreenElement]===a;!b&&a.matches?b=a.matches(":"+this.fsApi_.fullscreen):!b&&a.msMatchesSelector&&(b=a.msMatchesSelector(":"+this.fsApi_.fullscreen));this.isFullscreen(b)}};c.handleTechFullscreenChange_=function(a,
b){b&&(b.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(b.isFullscreen))};c.handleTechFullscreenError_=function(a,b){this.trigger("fullscreenerror",b)};c.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")};c.handleTechEnterPictureInPicture_=function(a){this.isInPictureInPicture(!0)};c.handleTechLeavePictureInPicture_=function(a){this.isInPictureInPicture(!1)};c.handleTechError_=
function(){var a=this.tech_.error();this.error(a)};c.handleTechTextData_=function(){var a=null;1<arguments.length&&(a=arguments[1]);this.trigger("textdata",a)};c.getCache=function(){return this.cache_};c.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}};c.techCall_=function(a,b){this.ready(function(){if(a in pl)return this.tech_[a](this.middleware_.reduce(Je(a),
b));if(a in Uh)return Pg(this.middleware_,this.tech_,a,b);try{if(this.tech_)this.tech_[a](b)}catch(g){throw pa(g),g;}},!0)};c.techGet_=function(a){if(this.tech_&&this.tech_.isReady_){if(a in ol){var b=this.tech_;return this.middleware_.reduceRight(Je(a),b[a]())}if(a in Uh)return Pg(this.middleware_,this.tech_,a);try{return this.tech_[a]()}catch(g){if(void 0===this.tech_[a])throw pa("Video.js: "+a+" method not defined for "+this.techName_+" playback technology.",g),g;if("TypeError"===g.name)throw pa("Video.js: "+
a+" unavailable on "+this.techName_+" playback technology element.",g),this.tech_.isReady_=!1,g;pa(g);throw g;}}};c.play=function(){var a=this,b=this.options_.Promise||G.Promise;return b?new b(function(g){a.play_(g)}):this.play_()};c.play_=function(a){var b=this;void 0===a&&(a=gc);this.playCallbacks_.push(a);a=!(this.changingSrc_||!this.src()&&!this.currentSrc());this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null);this.isReady_&&a?(a=this.techGet_("play"),null===
a?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(a)):(this.waitToPlay_=function(g){b.play_()},this.one(["ready","loadstart"],this.waitToPlay_),a||!Ld&&!Ab||this.load())};c.runPlayTerminatedQueue_=function(){var a=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];a.forEach(function(b){b()})};c.runPlayCallbacks_=function(a){var b=this.playCallbacks_.slice(0);this.playCallbacks_=[];this.playTerminatedQueue_=[];b.forEach(function(g){g(a)})};c.pause=function(){this.techCall_("pause")};
c.paused=function(){return!1===this.techGet_("paused")?!1:!0};c.played=function(){return this.techGet_("played")||fc(0,0)};c.scrubbing=function(a){if("undefined"===typeof a)return this.scrubbing_;this.scrubbing_=!!a;this.techCall_("setScrubbing",this.scrubbing_);a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")};c.currentTime=function(a){if("undefined"!==typeof a)0>a&&(a=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",a),this.cache_.initTime=
0):(this.cache_.initTime=a,this.off("canplay",this.applyInitTime_),this.one("canplay",this.applyInitTime_));else return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime};c.applyInitTime_=function(){this.currentTime(this.cache_.initTime)};c.duration=function(a){if(void 0===a)return void 0!==this.cache_.duration?this.cache_.duration:NaN;a=parseFloat(a);0>a&&(a=Infinity);a!==this.cache_.duration&&(this.cache_.duration=a,Infinity===a?this.addClass("vjs-live"):this.removeClass("vjs-live"),
isNaN(a)||this.trigger("durationchange"))};c.remainingTime=function(){return this.duration()-this.currentTime()};c.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())};c.buffered=function(){var a=this.techGet_("buffered");a&&a.length||(a=fc(0,0));return a};c.bufferedPercent=function(){return Hg(this.buffered(),this.duration())};c.bufferedEnd=function(){var a=this.buffered(),b=this.duration();a=a.end(a.length-1);a>b&&(a=b);return a};c.volume=function(a){if(void 0!==
a)a=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=a,this.techCall_("setVolume",a),0<a&&this.lastVolume_(a);else return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a};c.muted=function(a){if(void 0!==a)this.techCall_("setMuted",a);else return this.techGet_("muted")||!1};c.defaultMuted=function(a){return void 0!==a?this.techCall_("setDefaultMuted",a):this.techGet_("defaultMuted")||!1};c.lastVolume_=function(a){if(void 0!==a&&0!==a)this.cache_.lastVolume=a;else return this.cache_.lastVolume};
c.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1};c.isFullscreen=function(a){if(void 0!==a){var b=this.isFullscreen_;this.isFullscreen_=!!a;this.isFullscreen_!==b&&this.fsApi_.prefixed&&this.trigger("fullscreenchange");this.toggleFullscreenClass_()}else return this.isFullscreen_};c.requestFullscreen=function(a){var b=this.options_.Promise||G.Promise;if(b){var g=this;return new b(function(l,k){function f(){g.off("fullscreenerror",m);g.off("fullscreenchange",h)}function h(){f();
l()}function m(q,r){f();k(r)}g.one("fullscreenchange",h);g.one("fullscreenerror",m);var p=g.requestFullscreenHelper_(a);if(p)return p.then(f,f),p})}return this.requestFullscreenHelper_()};c.requestFullscreenHelper_=function(a){var b=this;if(!this.fsApi_.prefixed){var g=this.options_.fullscreen&&this.options_.fullscreen.options||{};void 0!==a&&(g=a)}if(this.fsApi_.requestFullscreen)return(a=this.el_[this.fsApi_.requestFullscreen](g))&&a.then(function(){return b.isFullscreen(!0)},function(){return b.isFullscreen(!1)}),
a;this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()};c.exitFullscreen=function(){var a=this.options_.Promise||G.Promise;if(a){var b=this;return new a(function(g,l){function k(){b.off("fullscreenerror",h);b.off("fullscreenchange",f)}function f(){k();g()}function h(p,q){k();l(q)}b.one("fullscreenchange",f);b.one("fullscreenerror",h);var m=b.exitFullscreenHelper_();if(m)return m.then(k,k),m})}return this.exitFullscreenHelper_()};c.exitFullscreenHelper_=function(){var a=
this;if(this.fsApi_.requestFullscreen){var b=N[this.fsApi_.exitFullscreen]();b&&b.then(function(){return a.isFullscreen(!1)});return b}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()};c.enterFullWindow=function(){this.isFullscreen(!0);this.isFullWindow=!0;this.docOrigOverflow=N.documentElement.style.overflow;jb(N,"keydown",this.boundFullWindowOnEscKey_);N.documentElement.style.overflow="hidden";sb(N.body,"vjs-full-window");this.trigger("enterFullWindow")};c.fullWindowOnEscKey=
function(a){ka.isEventKey(a,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())};c.exitFullWindow=function(){this.isFullscreen(!1);this.isFullWindow=!1;Ra(N,"keydown",this.boundFullWindowOnEscKey_);N.documentElement.style.overflow=this.docOrigOverflow;Vb(N.body,"vjs-full-window");this.trigger("exitFullWindow")};c.disablePictureInPicture=function(a){if(void 0===a)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",a);this.options_.disablePictureInPicture=
a;this.trigger("disablepictureinpicturechanged")};c.isInPictureInPicture=function(a){if(void 0!==a)this.isInPictureInPicture_=!!a,this.togglePictureInPictureClass_();else return!!this.isInPictureInPicture_};c.requestPictureInPicture=function(){if("pictureInPictureEnabled"in N&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")};c.exitPictureInPicture=function(){if("pictureInPictureEnabled"in N)return N.exitPictureInPicture()};c.handleKeyDown=function(a){var b=this.options_.userActions;
if(b&&b.hotkeys){var g=this.el_.ownerDocument.activeElement;var l=g.tagName.toLowerCase();if(g.isContentEditable)g=!0;else{var k="button checkbox hidden radio reset submit".split(" ");g="input"===l?-1===k.indexOf(g.type):-1!==["textarea"].indexOf(l)}g||("function"===typeof b.hotkeys?b.hotkeys.call(this,a):this.handleHotkeys(a))}};c.handleHotkeys=function(a){var b=this.options_.userActions?this.options_.userActions.hotkeys:{},g=b.fullscreenKey,l=b.muteKey;l=void 0===l?function(k){return ka.isEventKey(k,
"m")}:l;b=b.playPauseKey;b=void 0===b?function(k){return ka.isEventKey(k,"k")||ka.isEventKey(k,"Space")}:b;(void 0===g?function(k){return ka.isEventKey(k,"f")}:g).call(this,a)?(a.preventDefault(),a.stopPropagation(),g=U.getComponent("FullscreenToggle"),!1!==N[this.fsApi_.fullscreenEnabled]&&g.prototype.handleClick.call(this,a)):l.call(this,a)?(a.preventDefault(),a.stopPropagation(),U.getComponent("MuteToggle").prototype.handleClick.call(this,a)):b.call(this,a)&&(a.preventDefault(),a.stopPropagation(),
U.getComponent("PlayToggle").prototype.handleClick.call(this,a))};c.canPlayType=function(a){for(var b,g=0,l=this.options_.techOrder;g<l.length;g++){b=l[g];var k=wa.getTech(b);k||(k=U.getComponent(b));if(!k)pa.error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.');else if(k.isSupported()&&(b=k.canPlayType(a)))return b}return""};c.selectSource=function(a){var b=this,g=this.options_.techOrder.map(function(h){return[h,wa.getTech(h)]}).filter(function(h){var m=h[0];if(h=h[1])return h.isSupported();
pa.error('The "'+m+'" tech is undefined. Skipped browser support check for that tech.');return!1}),l=function(h,m,p){var q;h.some(function(r){return m.some(function(u){if(q=p(r,u))return!0})});return q},k=function(h){return function(m,p){return h(p,m)}},f=function(h,m){var p=h[0];if(h[1].canPlaySource(m,b.options_[p.toLowerCase()]))return{source:m,tech:p}};return(this.options_.sourceOrder?l(a,g,k(f)):l(g,a,f))||!1};c.src=function(a){var b=this;if("undefined"===typeof a)return this.cache_.src||"";
var g=sl(a);g.length?(this.changingSrc_=!0,this.cache_.sources=g,this.updateSourceCaches_(g[0]),Jk(this,g[0],function(l,k){b.middleware_=k;b.cache_.sources=g;b.updateSourceCaches_(l);if(b.src_(l)){if(1<g.length)return b.src(g.slice(1));b.changingSrc_=!1;b.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);b.triggerReady()}else Kk(k,b.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},
0)};c.src_=function(a){var b=this,g=this.selectSource([a]);if(!g)return!0;if(!Yk(g.tech,this.techName_))return this.changingSrc_=!0,this.loadTech_(g.tech,g.source),this.tech_.ready(function(){b.changingSrc_=!1}),!1;this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",a):this.techCall_("src",a.src);this.changingSrc_=!1},!0);return!1};c.load=function(){this.techCall_("load")};c.reset=function(){var a=this,b=this.options_.Promise||G.Promise;this.paused()||
!b?this.doReset_():(b=this.play(),gc(b.then(function(){return a.doReset_()})))};c.doReset_=function(){this.tech_&&this.tech_.clearTracks("text");this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();ec(this)&&this.trigger("playerreset")};c.resetControlBarUI_=function(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_()};c.resetProgressBar_=function(){this.currentTime(0);var a=this.controlBar,b=a.durationDisplay;
a=a.remainingTimeDisplay;b&&b.updateContent();a&&a.updateContent()};c.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_()};c.resetVolumeBar_=function(){this.volume(1);this.trigger("volumechange")};c.currentSources=function(){var a=this.currentSource(),b=[];0!==Object.keys(a).length&&b.push(a);return this.cache_.sources||b};c.currentSource=function(){return this.cache_.source||{}};c.currentSrc=function(){return this.currentSource()&&this.currentSource().src||
""};c.currentType=function(){return this.currentSource()&&this.currentSource().type||""};c.preload=function(a){if(void 0!==a)this.techCall_("setPreload",a),this.options_.preload=a;else return this.techGet_("preload")};c.autoplay=function(a){if(void 0===a)return this.options_.autoplay||!1;if("string"===typeof a&&/(any|play|muted)/.test(a)){this.options_.autoplay=a;this.manualAutoplay_(a);var b=!1}else this.options_.autoplay=a?!0:!1;b="undefined"===typeof b?this.options_.autoplay:b;this.tech_&&this.techCall_("setAutoplay",
b)};c.playsinline=function(a){return void 0!==a?(this.techCall_("setPlaysinline",a),this.options_.playsinline=a,this):this.techGet_("playsinline")};c.loop=function(a){if(void 0!==a)this.techCall_("setLoop",a),this.options_.loop=a;else return this.techGet_("loop")};c.poster=function(a){if(void 0===a)return this.poster_;a||(a="");a!==this.poster_&&(this.poster_=a,this.techCall_("setPoster",a),this.isPosterFromTech_=!1,this.trigger("posterchange"))};c.handleTechPosterChange_=function(){if((!this.poster_||
this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var a=this.tech_.poster()||"";a!==this.poster_&&(this.poster_=a,this.isPosterFromTech_=!0,this.trigger("posterchange"))}};c.controls=function(a){if(void 0===a)return!!this.controls_;a=!!a;this.controls_!==a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||
this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))};c.usingNativeControls=function(a){if(void 0===a)return!!this.usingNativeControls_;a=!!a;this.usingNativeControls_!==a&&((this.usingNativeControls_=a)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))};
c.error=function(a){if(void 0===a)return this.error_||null;if(this.options_.suppressNotSupportedError&&a&&4===a.code){var b=function(){this.error(a)};this.options_.suppressNotSupportedError=!1;this.any(["click","touchstart"],b);this.one("loadstart",function(){this.off(["click","touchstart"],b)})}else null===a?(this.error_=a,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new Ya(a),this.addClass("vjs-error"),pa.error("(CODE:"+this.error_.code+" "+Ya.errorTypes[this.error_.code]+
")",this.error_.message,this.error_),this.trigger("error"))};c.reportUserActivity=function(a){this.userActivity_=!0};c.userActive=function(a){if(void 0===a)return this.userActive_;a=!!a;if(a!==this.userActive_)if(this.userActive_=a)this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");else{if(this.tech_)this.tech_.one("mousemove",function(b){b.stopPropagation();b.preventDefault()});this.userActivity_=!1;this.removeClass("vjs-user-active");
this.addClass("vjs-user-inactive");this.trigger("userinactive")}};c.listenForUserActivity_=function(){var a,b,g,l=oa(this,this.reportUserActivity),k=function(h){l();this.clearInterval(a)};this.on("mousedown",function(){l();this.clearInterval(a);a=this.setInterval(l,250)});this.on("mousemove",function(h){if(h.screenX!==b||h.screenY!==g)b=h.screenX,g=h.screenY,l()});this.on("mouseup",k);this.on("mouseleave",k);!(k=this.getChild("controlBar"))||Ab||$b||(k.on("mouseenter",function(h){this.player().cache_.inactivityTimeout=
this.player().options_.inactivityTimeout;this.player().options_.inactivityTimeout=0}),k.on("mouseleave",function(h){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}));this.on("keydown",l);this.on("keyup",l);var f;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1;this.userActive(!0);this.clearTimeout(f);var h=this.options_.inactivityTimeout;0>=h||(f=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},h))}},250)};c.playbackRate=
function(a){if(void 0!==a)this.techCall_("setPlaybackRate",a);else return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1};c.defaultPlaybackRate=function(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1};c.isAudio=function(a){if(void 0!==a)this.isAudio_=!!a;else return!!this.isAudio_};c.addTextTrack=function(a,b,g){if(this.tech_)return this.tech_.addTextTrack(a,
b,g)};c.addRemoteTextTrack=function(a,b){if(this.tech_)return this.tech_.addRemoteTextTrack(a,b)};c.removeRemoteTextTrack=function(a){void 0===a&&(a={});var b=a.track;b||(b=a);if(this.tech_)return this.tech_.removeRemoteTextTrack(b)};c.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")};c.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};c.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||
0};c.language=function(a){if(void 0===a)return this.language_;this.language_=String(a).toLowerCase()};c.languages=function(){return ya(d.prototype.options_.languages,this.languages_)};c.toJSON=function(){var a=ya(this.options_),b=a.tracks;a.tracks=[];for(var g=0;g<b.length;g++){var l=b[g];l=ya(l);l.player=void 0;a.tracks[g]=l}return a};c.createModal=function(a,b){var g=this;b=b||{};b.content=a||"";var l=new Fc(this,b);this.addChild(l);l.on("dispose",function(){g.removeChild(l)});l.open();return l};
c.updateCurrentBreakpoint_=function(){if(this.responsive())for(var a=this.currentBreakpoint(),b=this.currentWidth(),g=0;g<Hf.length;g++){var l=Hf[g];if(b<=this.breakpoints_[l]){if(a===l)break;a&&this.removeClass(Ud[a]);this.addClass(Ud[l]);this.breakpoint_=l;break}}};c.removeCurrentBreakpoint_=function(){var a=this.currentBreakpointClass();this.breakpoint_="";a&&this.removeClass(a)};c.breakpoints=function(a){if(void 0===a)return ja(this.breakpoints_);this.breakpoint_="";this.breakpoints_=ja({},Pl,
a);this.updateCurrentBreakpoint_();return ja(this.breakpoints_)};c.responsive=function(a){if(void 0===a)return this.responsive_;a=!!a;if(a!==this.responsive_)return(this.responsive_=a)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),a};c.currentBreakpoint=function(){return this.breakpoint_};c.currentBreakpointClass=function(){return Ud[this.breakpoint_]||""};c.loadMedia=
function(a,b){var g=this;if(a&&"object"===typeof a){this.reset();this.cache_.media=ya(a);a=this.cache_.media;var l=a.poster,k=a.src,f=a.textTracks;!a.artwork&&l&&(this.cache_.media.artwork=[{src:l,type:Cd(l)}]);k&&this.src(k);l&&this.poster(l);Array.isArray(f)&&f.forEach(function(h){return g.addRemoteTextTrack(h,!1)});this.ready(b)}};c.getMedia=function(){if(!this.cache_.media){var a=this.poster(),b=this.currentSources(),g=Array.prototype.map.call(this.remoteTextTracks(),function(l){return{kind:l.kind,
label:l.label,language:l.language,src:l.src}});b={src:b,textTracks:g};a&&(b.poster=a,b.artwork=[{src:b.poster,type:Cd(b.poster)}]);return b}return ya(this.cache_.media)};d.getTagSettings=function(a){var b={sources:[],tracks:[]},g=X(a),l=g["data-setup"];Pb(a,"vjs-fill")&&(g.fill=!0);Pb(a,"vjs-fluid")&&(g.fluid=!0);if(null!==l){var k=null;try{var f=JSON.parse(l||"{}",void 0)}catch(h){k=h}f=[k,f];l=f[0];f=f[1];l&&pa.error(l);ja(g,f)}ja(b,g);if(a.hasChildNodes())for(a=a.childNodes,g=0,l=a.length;g<l;g++)f=
a[g],k=f.nodeName.toLowerCase(),"source"===k?b.sources.push(X(f)):"track"===k&&b.tracks.push(X(f));return b};c.flexNotSupported_=function(){var a=N.createElement("i");return!("flexBasis"in a.style||"webkitFlexBasis"in a.style||"mozFlexBasis"in a.style||"msFlexBasis"in a.style||"msFlexOrder"in a.style)};c.debug=function(a){if(void 0===a)return this.debugEnabled_;a?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),
this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)};return d}(U);ab.names.forEach(function(e){var d=ab[e];Ea.prototype[d.getterName]=function(){if(this.tech_)return this.tech_[d.getterName]();this[d.privateName]=this[d.privateName]||new d.ListClass;return this[d.privateName]}});Ea.prototype.crossorigin=Ea.prototype.crossOrigin;Ea.players={};var jd=G.navigator;Ea.prototype.options_={techOrder:wa.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2E3,playbackRates:[],
liveui:!1,children:"mediaLoader posterImage textTrackDisplay loadingSpinner bigPlayButton liveTracker controlBar errorDisplay textTrackSettings resizeManager".split(" "),language:jd&&(jd.languages&&jd.languages[0]||jd.userLanguage||jd.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Ea.prototype[e]=
function(){return this.techGet_(e)}});yi.forEach(function(e){Ea.prototype["handleTech"+Ba(e)+"_"]=function(){return this.trigger(e)}});U.registerComponent("Player",Ea);var zi=ma(function(e){function d(c,a){e.exports=d=Object.setPrototypeOf||function(b,g){b.__proto__=g;return b};return d(c,a)}e.exports=d}),Ql=function(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,
[],function(){})),!0}catch(e){return!1}},Rl=ma(function(e){function d(c,a,b){Ql()?e.exports=d=Reflect.construct:e.exports=d=function(g,l,k){var f=[null];f.push.apply(f,l);g=new (Function.bind.apply(g,f));k&&zi(g,k.prototype);return g};return d.apply(null,arguments)}e.exports=d}),Sb={},Vd=function(e){return Sb.hasOwnProperty(e)?Sb[e]:void 0},Wd=function(e,d,c){c=(c?"before":"")+"pluginsetup";e.trigger(c,d);e.trigger(c+":"+d.name,d)},Sl=function(e,d){var c=function(){Wd(this,{name:e,plugin:d,instance:null},
!0);var a=d.apply(this,arguments);this.activePlugins_=this.activePlugins_||{};this.activePlugins_[e]=!0;Wd(this,{name:e,plugin:d,instance:a});return a};Object.keys(d).forEach(function(a){c[a]=d[a]});return c},Ai=function(e,d){d.prototype.name=e;return function(){Wd(this,{name:e,plugin:d,instance:null},!0);for(var c=arguments.length,a=Array(c),b=0;b<c;b++)a[b]=arguments[b];var g=Rl(d,[this].concat(a));this[e]=function(){return g};Wd(this,g.getEventHash());return g}},Hb=function(){function e(c){if(this.constructor===
e)throw Error("Plugin must be sub-classed; not directly instantiated.");this.player=c;this.log||(this.log=this.player.log.createLogger(this.name));Ce(this);delete this.trigger;Fg(this,this.constructor.defaultState);var a=this.name;c.activePlugins_=c.activePlugins_||{};c.activePlugins_[a]=!0;this.dispose=oa(this,this.dispose);c.on("dispose",this.dispose)}var d=e.prototype;d.version=function(){return this.constructor.VERSION};d.getEventHash=function(c){void 0===c&&(c={});c.name=this.name;c.plugin=this.constructor;
c.instance=this;return c};d.trigger=function(c,a){void 0===a&&(a={});return uc(this.eventBusEl_,c,this.getEventHash(a))};d.handleStateChanged=function(c){};d.dispose=function(){var c=this.name,a=this.player;this.trigger("dispose");this.off();a.off("dispose",this.dispose);a.activePlugins_[c]=!1;this.player=this.state=null;a[c]=Ai(c,Sb[c])};e.isBasic=function(c){c="string"===typeof c?Vd(c):c;return"function"===typeof c&&!e.prototype.isPrototypeOf(c.prototype)};e.registerPlugin=function(c,a){if("string"!==
typeof c)throw Error('Illegal plugin name, "'+c+'", must be a string, was '+typeof c+".");if(Sb.hasOwnProperty(c))pa.warn('A plugin named "'+c+'" already exists. You may want to avoid re-registering plugins!');else if(Ea.prototype.hasOwnProperty(c))throw Error('Illegal plugin name, "'+c+'", cannot share a name with an existing player method!');if("function"!==typeof a)throw Error('Illegal plugin for "'+c+'", must be a function, was '+typeof a+".");Sb[c]=a;"plugin"!==c&&(e.isBasic(a)?Ea.prototype[c]=
Sl(c,a):Ea.prototype[c]=Ai(c,a));return a};e.deregisterPlugin=function(c){if("plugin"===c)throw Error("Cannot de-register base plugin.");Sb.hasOwnProperty(c)&&(delete Sb[c],delete Ea.prototype[c])};e.getPlugins=function(c){void 0===c&&(c=Object.keys(Sb));var a;c.forEach(function(b){var g=Vd(b);g&&(a=a||{},a[b]=g)});return a};e.getPluginVersion=function(c){return(c=Vd(c))&&c.VERSION||""};return e}();Hb.getPlugin=Vd;Hb.BASE_PLUGIN_NAME="plugin";Hb.registerPlugin("plugin",Hb);Ea.prototype.usingPlugin=
function(e){return!!this.activePlugins_&&!0===this.activePlugins_[e]};Ea.prototype.hasPlugin=function(e){return!!Sb.hasOwnProperty(e)};var Tl=function(e,d){if("function"!==typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(d&&d.prototype,{constructor:{value:e,writable:!0,configurable:!0}});d&&zi(e,d)},Sg=function(e){return 0===e.indexOf("#")?e.slice(1):e};K.hooks_={};K.hooks=function(e,d){K.hooks_[e]=K.hooks_[e]||[];d&&(K.hooks_[e]=
K.hooks_[e].concat(d));return K.hooks_[e]};K.hook=function(e,d){K.hooks(e,d)};K.hookOnce=function(e,d){K.hooks(e,[].concat(d).map(function(c){return function b(){K.removeHook(e,b);return c.apply(void 0,arguments)}}))};K.removeHook=function(e,d){d=K.hooks(e).indexOf(d);if(-1>=d)return!1;K.hooks_[e]=K.hooks_[e].slice();K.hooks_[e].splice(d,1);return!0};if(!0!==G.VIDEOJS_NO_DYNAMIC_STYLE&&Tb()){var Xd=Xb(".vjs-styles-defaults");if(!Xd){Xd=xh("vjs-styles-defaults");var If=Xb("head");If&&If.insertBefore(Xd,
If.firstChild);yh(Xd,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}ye(1,K);K.VERSION="7.10.2";K.options=Ea.prototype.options_;K.getPlayers=function(){return Ea.players};K.getPlayer=function(e){var d=Ea.players;if("string"===typeof e){e=Sg(e);var c=d[e];if(c)return c;e=Xb("#"+e)}if(Ob(e)&&(c=e,e=c.player,c=c.playerId,e||d[c]))return e||d[c]};K.getAllPlayers=function(){return Object.keys(Ea.players).map(function(e){return Ea.players[e]}).filter(Boolean)};
K.players=Ea.players;K.getComponent=U.getComponent;K.registerComponent=function(e,d){wa.isTech(d)&&pa.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");U.registerComponent.call(U,e,d)};K.getTech=wa.getTech;K.registerTech=wa.registerTech;K.use=function(e,d){ic[e]=ic[e]||[];ic[e].push(d)};Object.defineProperty(K,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(K.middleware,"TERMINATOR",{value:Bd,writeable:!1,
enumerable:!0});K.browser=dl;K.TOUCH_ENABLED=Dc;K.extend=function(e,d){void 0===d&&(d={});var c=function(){e.apply(this,arguments)},a={};"object"===typeof d?(d.constructor!==Object.prototype.constructor&&(c=d.constructor),a=d):"function"===typeof d&&(c=d);Tl(c,e);e&&(c.super_=e);for(var b in a)a.hasOwnProperty(b)&&(c.prototype[b]=a[b]);return c};K.mergeOptions=ya;K.bind=oa;K.registerPlugin=Hb.registerPlugin;K.deregisterPlugin=Hb.deregisterPlugin;K.plugin=function(e,d){pa.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");
return Hb.registerPlugin(e,d)};K.getPlugins=Hb.getPlugins;K.getPlugin=Hb.getPlugin;K.getPluginVersion=Hb.getPluginVersion;K.addLanguage=function(e,d){var c;e=(""+e).toLowerCase();K.options.languages=ya(K.options.languages,(c={},c[e]=d,c));return K.options.languages[e]};K.log=pa;K.createLogger=uh;K.createTimeRange=K.createTimeRanges=fc;K.formatTime=wc;K.setFormatTime=function(e){Me=e};K.resetFormatTime=function(){Me=Xh};K.parseUrl=jf;K.isCrossOrigin=Qd;K.EventTarget=Ma;K.on=jb;K.one=zd;K.off=Ra;K.trigger=
uc;K.xhr=zb;K.TextTrack=fd;K.AudioTrack=Rh;K.VideoTrack=Sh;"isEl isTextNode createEl hasClass addClass removeClass toggleClass setAttributes getAttributes emptyEl appendContent insertContent".split(" ").forEach(function(e){K[e]=function(){pa.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead");return wh[e].apply(null,arguments)}});K.computedStyle=Qa;K.dom=wh;K.url=ll;K.defineLazyProperty=Ff;var Ul=ma(function(e,d){(function(c){var a=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,
b=/^([^\/?#]*)(.*)$/,g=/(?:\/|^)\.(?=\/)/g,l=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,k={buildAbsoluteURL:function(f,h,m){m=m||{};f=f.trim();h=h.trim();if(!h){if(!m.alwaysNormalize)return f;m=k.parseURL(f);if(!m)throw Error("Error trying to parse base URL.");m.path=k.normalizePath(m.path);return k.buildURLFromParts(m)}var p=k.parseURL(h);if(!p)throw Error("Error trying to parse relative URL.");if(p.scheme){if(!m.alwaysNormalize)return h;p.path=k.normalizePath(p.path);return k.buildURLFromParts(p)}h=k.parseURL(f);
if(!h)throw Error("Error trying to parse base URL.");!h.netLoc&&h.path&&"/"!==h.path[0]&&(f=b.exec(h.path),h.netLoc=f[1],h.path=f[2]);h.netLoc&&!h.path&&(h.path="/");f={scheme:h.scheme,netLoc:p.netLoc,path:null,params:p.params,query:p.query,fragment:p.fragment};p.netLoc||(f.netLoc=h.netLoc,"/"!==p.path[0]&&(p.path?(h=h.path,h=h.substring(0,h.lastIndexOf("/")+1)+p.path,f.path=k.normalizePath(h)):(f.path=h.path,p.params||(f.params=h.params,p.query||(f.query=h.query)))));null===f.path&&(f.path=m.alwaysNormalize?
k.normalizePath(p.path):p.path);return k.buildURLFromParts(f)},parseURL:function(f){return(f=a.exec(f))?{scheme:f[1]||"",netLoc:f[2]||"",path:f[3]||"",params:f[4]||"",query:f[5]||"",fragment:f[6]||""}:null},normalizePath:function(f){for(f=f.split("").reverse().join("").replace(g,"");f.length!==(f=f.replace(l,"")).length;);return f.split("").reverse().join("")},buildURLFromParts:function(f){return f.scheme+f.netLoc+f.path+f.params+f.query+f.fragment}};e.exports=k})()}),Bi=Tg(Ul),Ci=Tg(G),Ib=function(e,
d){if(/^[a-z]+:/i.test(d))return d;/\/\//i.test(e)||(e=Bi["default"].buildAbsoluteURL(Ci["default"].location&&Ci["default"].location.href||"",e));return Bi["default"].buildAbsoluteURL(e,d)},Jf=function(){function e(){this.listeners={}}var d=e.prototype;d.on=function(c,a){this.listeners[c]||(this.listeners[c]=[]);this.listeners[c].push(a)};d.off=function(c,a){if(!this.listeners[c])return!1;a=this.listeners[c].indexOf(a);this.listeners[c]=this.listeners[c].slice(0);this.listeners[c].splice(a,1);return-1<
a};d.trigger=function(c){var a=this.listeners[c];if(a)if(2===arguments.length)for(var b=a.length,g=0;g<b;++g)a[g].call(this,arguments[1]);else{b=Array.prototype.slice.call(arguments,1);g=a.length;for(var l=0;l<g;++l)a[l].apply(this,b)}};d.dispose=function(){this.listeners={}};d.pipe=function(c){this.on("data",function(a){c.push(a)})};return e}(),Di=G&&"object"===typeof G&&"default"in G?G:{"default":G},Ei=function(e){e=Di["default"].atob?Di["default"].atob(e):Buffer.from(e,"base64").toString("binary");
for(var d=new Uint8Array(e.length),c=0;c<e.length;c++)d[c]=e.charCodeAt(c);return d},Vl=function(e){function d(){var c=e.call(this)||this;c.buffer="";return c}Z(d,e);d.prototype.push=function(c){this.buffer+=c;for(c=this.buffer.indexOf("\n");-1<c;c=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,c)),this.buffer=this.buffer.substring(c+1)};return d}(Jf),kd=function(e){e=e.split.call(e,RegExp('(?:^|,)((?:[^\x3d]*)\x3d(?:"[^"]*"|[^,]*))'));for(var d={},c=e.length,a;c--;)""!==e[c]&&
(a=/([^=]*)=(.*)/.exec(e[c]).slice(1),a[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),d[a[0]]=a[1]);return d},Wl=function(e){function d(){var a=e.call(this)||this;a.customParsers=[];a.tagMappers=[];return a}Z(d,e);var c=d.prototype;c.push=function(a){var b=this,g,l;a=a.trim();0!==a.length&&("#"!==a[0]?this.trigger("data",{type:"uri",uri:a}):this.tagMappers.reduce(function(k,f){f=f(a);return f===a?k:k.concat([f])},[a]).forEach(function(k){for(var f=
0;f<b.customParsers.length;f++)if(b.customParsers[f].call(b,k))return;0!==k.indexOf("#EXT")?b.trigger("data",{type:"comment",text:k.slice(1)}):(k=k.replace("\r",""),(g=/^#EXTM3U/.exec(k))?b.trigger("data",{type:"tag",tagType:"m3u"}):(g=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(k))?(l={type:"tag",tagType:"inf"},g[1]&&(l.duration=parseFloat(g[1])),g[2]&&(l.title=g[2]),b.trigger("data",l)):(g=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(k))?(l={type:"tag",tagType:"targetduration"},g[1]&&(l.duration=parseInt(g[1],
10)),b.trigger("data",l)):(g=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(k))?(l={type:"tag",tagType:"totalduration"},g[1]&&(l.duration=parseInt(g[1],10)),b.trigger("data",l)):(g=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(k))?(l={type:"tag",tagType:"version"},g[1]&&(l.version=parseInt(g[1],10)),b.trigger("data",l)):(g=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(k))?(l={type:"tag",tagType:"media-sequence"},g[1]&&(l.number=parseInt(g[1],10)),b.trigger("data",l)):(g=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(k))?
(l={type:"tag",tagType:"discontinuity-sequence"},g[1]&&(l.number=parseInt(g[1],10)),b.trigger("data",l)):(g=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(k))?(l={type:"tag",tagType:"playlist-type"},g[1]&&(l.playlistType=g[1]),b.trigger("data",l)):(g=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(k))?(l={type:"tag",tagType:"byterange"},g[1]&&(l.length=parseInt(g[1],10)),g[2]&&(l.offset=parseInt(g[2],10)),b.trigger("data",l)):(g=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(k))?(l={type:"tag",tagType:"allow-cache"},
g[1]&&(l.allowed=!/NO/.test(g[1])),b.trigger("data",l)):(g=/^#EXT-X-MAP:?(.*)$/.exec(k))?(l={type:"tag",tagType:"map"},g[1]&&(k=kd(g[1]),k.URI&&(l.uri=k.URI),k.BYTERANGE&&(f=k.BYTERANGE.split("@"),k=f[0],f=f[1],l.byterange={},k&&(l.byterange.length=parseInt(k,10)),f&&(l.byterange.offset=parseInt(f,10)))),b.trigger("data",l)):(g=/^#EXT-X-STREAM-INF:?(.*)$/.exec(k))?(l={type:"tag",tagType:"stream-inf"},g[1]&&(l.attributes=kd(g[1]),l.attributes.RESOLUTION&&(k=l.attributes.RESOLUTION.split("x"),f={},
k[0]&&(f.width=parseInt(k[0],10)),k[1]&&(f.height=parseInt(k[1],10)),l.attributes.RESOLUTION=f),l.attributes.BANDWIDTH&&(l.attributes.BANDWIDTH=parseInt(l.attributes.BANDWIDTH,10)),l.attributes["PROGRAM-ID"]&&(l.attributes["PROGRAM-ID"]=parseInt(l.attributes["PROGRAM-ID"],10))),b.trigger("data",l)):(g=/^#EXT-X-MEDIA:?(.*)$/.exec(k))?(l={type:"tag",tagType:"media"},g[1]&&(l.attributes=kd(g[1])),b.trigger("data",l)):(g=/^#EXT-X-ENDLIST/.exec(k))?b.trigger("data",{type:"tag",tagType:"endlist"}):(g=/^#EXT-X-DISCONTINUITY/.exec(k))?
b.trigger("data",{type:"tag",tagType:"discontinuity"}):(g=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(k))?(l={type:"tag",tagType:"program-date-time"},g[1]&&(l.dateTimeString=g[1],l.dateTimeObject=new Date(g[1])),b.trigger("data",l)):(g=/^#EXT-X-KEY:?(.*)$/.exec(k))?(l={type:"tag",tagType:"key"},g[1]&&(l.attributes=kd(g[1]),l.attributes.IV&&("0x"===l.attributes.IV.substring(0,2).toLowerCase()&&(l.attributes.IV=l.attributes.IV.substring(2)),l.attributes.IV=l.attributes.IV.match(/.{8}/g),l.attributes.IV[0]=
parseInt(l.attributes.IV[0],16),l.attributes.IV[1]=parseInt(l.attributes.IV[1],16),l.attributes.IV[2]=parseInt(l.attributes.IV[2],16),l.attributes.IV[3]=parseInt(l.attributes.IV[3],16),l.attributes.IV=new Uint32Array(l.attributes.IV))),b.trigger("data",l)):(g=/^#EXT-X-START:?(.*)$/.exec(k))?(l={type:"tag",tagType:"start"},g[1]&&(l.attributes=kd(g[1]),l.attributes["TIME-OFFSET"]=parseFloat(l.attributes["TIME-OFFSET"]),l.attributes.PRECISE=/YES/.test(l.attributes.PRECISE)),b.trigger("data",l)):(g=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(k))?
(l={type:"tag",tagType:"cue-out-cont"},l.data=g[1]?g[1]:"",b.trigger("data",l)):(g=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(k))?(l={type:"tag",tagType:"cue-out"},l.data=g[1]?g[1]:"",b.trigger("data",l)):(g=/^#EXT-X-CUE-IN:?(.*)?$/.exec(k))?(l={type:"tag",tagType:"cue-in"},l.data=g[1]?g[1]:"",b.trigger("data",l)):b.trigger("data",{type:"tag",data:k.slice(4)}))}))};c.addParser=function(a){var b=this,g=a.expression,l=a.customType,k=a.dataParser,f=a.segment;"function"!==typeof k&&(k=function(h){return h});this.customParsers.push(function(h){if(g.exec(h))return b.trigger("data",
{type:"custom",data:k(h),customType:l,segment:f}),!0})};c.addTagMapper=function(a){var b=a.expression,g=a.map;this.tagMappers.push(function(l){return b.test(l)?g(l):l})};return d}(Jf),Xl=function(e){function d(){var a=e.call(this)||this;a.lineStream=new Vl;a.parseStream=new Wl;a.lineStream.pipe(a.parseStream);var b=ia(a),g=[],l={},k,f,h=function(){},m={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},p=0;a.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var q=0;a.parseStream.on("data",
function(r){var u,y;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=r.allowed;"allowed"in r||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var B={};"length"in r&&(l.byterange=B,B.length=r.length,"offset"in r||(r.offset=q));"offset"in r&&(l.byterange=B,B.offset=r.offset);q=B.offset+B.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=
0,this.trigger("info",{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));0<r.duration&&(l.duration=r.duration);0===r.duration&&(l.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=g},key:function(){r.attributes?"NONE"===r.attributes.METHOD?f=null:r.attributes.URI?"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===
r.attributes.KEYFORMAT?-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(r.attributes.METHOD)?this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===r.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==r.attributes.URI.substring(0,23)?this.trigger("warn",{message:"invalid key URI provided for Widevine"}):r.attributes.KEYID&&"0x"===r.attributes.KEYID.substring(0,
2)?this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:r.attributes.KEYFORMAT,keyId:r.attributes.KEYID.substring(2)},pssh:Ei(r.attributes.URI.split(",")[1])}}:this.trigger("warn",{message:"invalid key ID provided for Widevine"})):(r.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),f={method:r.attributes.METHOD||"AES-128",uri:r.attributes.URI},"undefined"!==typeof r.attributes.IV&&(f.iv=r.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):
this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(r.number)?this.manifest.mediaSequence=r.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+r.number})},"discontinuity-sequence":function(){isFinite(r.number)?p=this.manifest.discontinuitySequence=r.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+r.number})},"playlist-type":function(){/VOD|EVENT/.test(r.playlistType)?this.manifest.playlistType=
r.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+r.playlist})},map:function(){k={};r.uri&&(k.uri=r.uri);r.byterange&&(k.byterange=r.byterange)},"stream-inf":function(){this.manifest.playlists=g;this.manifest.mediaGroups=this.manifest.mediaGroups||m;r.attributes?(l.attributes||(l.attributes={}),Tc(l.attributes,r.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){this.manifest.mediaGroups=this.manifest.mediaGroups||m;if(r.attributes&&
r.attributes.TYPE&&r.attributes["GROUP-ID"]&&r.attributes.NAME){var B=this.manifest.mediaGroups[r.attributes.TYPE];B[r.attributes["GROUP-ID"]]=B[r.attributes["GROUP-ID"]]||{};u=B[r.attributes["GROUP-ID"]];y={"default":/yes/i.test(r.attributes.DEFAULT)};y.autoselect=y["default"]?!0:/yes/i.test(r.attributes.AUTOSELECT);r.attributes.LANGUAGE&&(y.language=r.attributes.LANGUAGE);r.attributes.URI&&(y.uri=r.attributes.URI);r.attributes["INSTREAM-ID"]&&(y.instreamId=r.attributes["INSTREAM-ID"]);r.attributes.CHARACTERISTICS&&
(y.characteristics=r.attributes.CHARACTERISTICS);r.attributes.FORCED&&(y.forced=/yes/i.test(r.attributes.FORCED));u[r.attributes.NAME]=y}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){p+=1;l.discontinuity=!0;this.manifest.discontinuityStarts.push(g.length)},"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=r.dateTimeString,this.manifest.dateTimeObject=r.dateTimeObject);l.dateTimeString=
r.dateTimeString;l.dateTimeObject=r.dateTimeObject},targetduration:function(){!isFinite(r.duration)||0>r.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+r.duration}):this.manifest.targetDuration=r.duration},totalduration:function(){!isFinite(r.duration)||0>r.duration?this.trigger("warn",{message:"ignoring invalid total duration: "+r.duration}):this.manifest.totalDuration=r.duration},start:function(){!r.attributes||isNaN(r.attributes["TIME-OFFSET"])?this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):
this.manifest.start={timeOffset:r.attributes["TIME-OFFSET"],precise:r.attributes.PRECISE}},"cue-out":function(){l.cueOut=r.data},"cue-out-cont":function(){l.cueOutCont=r.data},"cue-in":function(){l.cueIn=r.data}}[r.tagType]||h).call(b)},uri:function(){l.uri=r.uri;g.push(l);!this.manifest.targetDuration||"duration"in l||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),l.duration=this.manifest.targetDuration);f&&(l.key=f);l.timeline=p;k&&(l.map=k);l={}},comment:function(){},
custom:function(){r.segment?(l.custom=l.custom||{},l.custom[r.customType]=r.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[r.customType]=r.data)}})[r.type].call(b)});return a}Z(d,e);var c=d.prototype;c.push=function(a){this.lineStream.push(a)};c.end=function(){this.lineStream.push("\n")};c.addParser=function(a){this.parseStream.addParser(a)};c.addTagMapper=function(a){this.parseStream.addTagMapper(a)};return d}(Jf),Fi=ma(function(e,d){Object.defineProperty(d,"__esModule",
{value:!0});var c=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,a=/^application\/dash\+xml/i;d.simpleTypeFromSourceType=function(b){return c.test(b)?"hls":a.test(b)?"dash":"application/vnd.videojs.vhs+json"===b?"vhs-json":null}});ha(Fi);var Gi=Fi.simpleTypeFromSourceType,Kf=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Hi=new RegExp("[\\-\\.0-9"+Kf.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),
Ii=new RegExp("^"+Kf.source+Hi.source+"*(?::"+Kf.source+Hi.source+"*)?$");Ug.prototype={parse:function(e,d,c){var a=this.domBuilder;a.startDocument();var b=d,g=d={},l;for(l in b)g[l]=b[l];Mk(e,d,c,a,this.errorHandler);a.endDocument()}};Vg.prototype={setTagName:function(e){if(!Ii.test(e))throw Error("invalid tagName:"+e);this.tagName=e},add:function(e,d,c){if(!Ii.test(e))throw Error("invalid attribute:"+e);this[this.length++]={qName:e,value:d,offset:c}},length:0,getLocalName:function(e){return this[e].localName},
getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}};Dd({},Dd.prototype)instanceof Dd||(Dd=function(e,d){function c(){}c.prototype=d;c=new c;for(d in e)c[d]=e[d];return c});var fb={},Gb=fb.ELEMENT_NODE=1,Ac=fb.ATTRIBUTE_NODE=2,Id=fb.TEXT_NODE=3,mh=fb.CDATA_SECTION_NODE=4,qh=fb.ENTITY_REFERENCE_NODE=5,Yl=fb.ENTITY_NODE=6,ph=fb.PROCESSING_INSTRUCTION_NODE=7,nh=fb.COMMENT_NODE=8,lh=
fb.DOCUMENT_NODE=9,oh=fb.DOCUMENT_TYPE_NODE=10,Qb=fb.DOCUMENT_FRAGMENT_NODE=11,Zl=fb.NOTATION_NODE=12,Sa={},La={};Sa.INDEX_SIZE_ERR=(La[1]="Index size error",1);Sa.DOMSTRING_SIZE_ERR=(La[2]="DOMString size error",2);var $l=Sa.HIERARCHY_REQUEST_ERR=(La[3]="Hierarchy request error",3);Sa.WRONG_DOCUMENT_ERR=(La[4]="Wrong document",4);Sa.INVALID_CHARACTER_ERR=(La[5]="Invalid character",5);Sa.NO_DATA_ALLOWED_ERR=(La[6]="No data allowed",6);Sa.NO_MODIFICATION_ALLOWED_ERR=(La[7]="No modification allowed",
7);var Sk=Sa.NOT_FOUND_ERR=(La[8]="Not found",8);Sa.NOT_SUPPORTED_ERR=(La[9]="Not supported",9);var Ji=Sa.INUSE_ATTRIBUTE_ERR=(La[10]="Attribute in use",10);Sa.INVALID_STATE_ERR=(La[11]="Invalid state",11);Sa.SYNTAX_ERR=(La[12]="Syntax error",12);Sa.INVALID_MODIFICATION_ERR=(La[13]="Invalid modification",13);Sa.NAMESPACE_ERR=(La[14]="Invalid namespace",14);Sa.INVALID_ACCESS_ERR=(La[15]="Invalid access",15);xc.prototype=Error.prototype;Zc(Sa,xc);Yb.prototype={length:0,item:function(e){return this[e]||
null},toString:function(e,d){for(var c=[],a=0;a<this.length;a++)zc(this[a],c,e,d);return c.join("")}};$c.prototype.item=function(e){Ne(this);return this[e]};eb($c,Yb);Ed.prototype={length:0,item:Yb.prototype.item,getNamedItem:function(e){for(var d=this.length;d--;){var c=this[d];if(c.nodeName==e)return c}},setNamedItem:function(e){var d=e.ownerElement;if(d&&d!=this._ownerElement)throw new xc(Ji);d=this.getNamedItem(e.nodeName);$g(this._ownerElement,this,e,d);return d},setNamedItemNS:function(e){var d=
e.ownerElement;if(d&&d!=this._ownerElement)throw new xc(Ji);d=this.getNamedItemNS(e.namespaceURI,e.localName);$g(this._ownerElement,this,e,d);return d},removeNamedItem:function(e){e=this.getNamedItem(e);bh(this._ownerElement,this,e);return e},removeNamedItemNS:function(e,d){e=this.getNamedItemNS(e,d);bh(this._ownerElement,this,e);return e},getNamedItemNS:function(e,d){for(var c=this.length;c--;){var a=this[c];if(a.localName==d&&a.namespaceURI==e)return a}return null}};ch.prototype={hasFeature:function(e,
d){return(e=this._features[e.toLowerCase()])&&(!d||d in e)?!0:!1},createDocument:function(e,d,c){var a=new ad;a.implementation=this;a.childNodes=new Yb;(a.doctype=c)&&a.appendChild(c);d&&(e=a.createElementNS(e,d),a.appendChild(e));return a},createDocumentType:function(e,d,c){var a=new Se;a.name=e;a.nodeName=e;a.publicId=d;a.systemId=c;return a}};$a.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,
namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,d){return fh(this,e,d)},replaceChild:function(e,d){this.insertBefore(e,d);d&&this.removeChild(d)},removeChild:function(e){return eh(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return Ve(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var d=e.nextSibling;d&&d.nodeType==Id&&e.nodeType==Id?(this.removeChild(d),
e.appendData(d.data)):(e.normalize(),e=d)}},isSupported:function(e,d){return this.ownerDocument.implementation.hasFeature(e,d)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(e){for(var d=this;d;){var c=d._nsMap;if(c)for(var a in c)if(c[a]==e)return a;d=d.nodeType==Ac?d.ownerDocument:d.parentNode}return null},lookupNamespaceURI:function(e){for(var d=this;d;){var c=d._nsMap;if(c&&e in c)return c[e];d=d.nodeType==Ac?d.ownerDocument:d.parentNode}return null},isDefaultNamespace:function(e){return null==
this.lookupPrefix(e)}};Zc(fb,$a);Zc(fb,$a.prototype);ad.prototype={nodeName:"#document",nodeType:lh,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,d){if(e.nodeType==Qb){for(var c=e.firstChild;c;){var a=c.nextSibling;this.insertBefore(c,d);c=a}return e}null==this.documentElement&&e.nodeType==Gb&&(this.documentElement=e);return fh(this,e,d),e.ownerDocument=this,e},removeChild:function(e){this.documentElement==e&&(this.documentElement=null);return eh(this,e)},importNode:function(e,
d){return rh(this,e,d)},getElementById:function(e){var d=null;Fd(this.documentElement,function(c){if(c.nodeType==Gb&&c.getAttribute("id")==e)return d=c,!0});return d},createElement:function(e){var d=new yc;d.ownerDocument=this;d.nodeName=e;d.tagName=e;d.childNodes=new Yb;return(d.attributes=new Ed)._ownerElement=d},createDocumentFragment:function(){var e=new Hd;e.ownerDocument=this;e.childNodes=new Yb;return e},createTextNode:function(e){var d=new Pe;d.ownerDocument=this;d.appendData(e);return d},
createComment:function(e){var d=new Qe;d.ownerDocument=this;d.appendData(e);return d},createCDATASection:function(e){var d=new Re;d.ownerDocument=this;d.appendData(e);return d},createProcessingInstruction:function(e,d){var c=new Ue;c.ownerDocument=this;c.tagName=c.target=e;c.nodeValue=c.data=d;return c},createAttribute:function(e){var d=new Gd;d.ownerDocument=this;d.name=e;d.nodeName=e;d.localName=e;d.specified=!0;return d},createEntityReference:function(e){var d=new Te;d.ownerDocument=this;d.nodeName=
e;return d},createElementNS:function(e,d){var c=new yc,a=d.split(":"),b=c.attributes=new Ed;c.childNodes=new Yb;c.ownerDocument=this;c.nodeName=d;c.tagName=d;c.namespaceURI=e;2==a.length?(c.prefix=a[0],c.localName=a[1]):c.localName=d;return b._ownerElement=c},createAttributeNS:function(e,d){var c=new Gd,a=d.split(":");c.ownerDocument=this;c.nodeName=d;c.name=d;c.namespaceURI=e;c.specified=!0;2==a.length?(c.prefix=a[0],c.localName=a[1]):c.localName=d;return c}};eb(ad,$a);yc.prototype={nodeType:Gb,
hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){return(e=this.getAttributeNode(e))&&e.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,d){e=this.ownerDocument.createAttribute(e);e.value=e.nodeValue=""+d;this.setAttributeNode(e)},removeAttribute:function(e){(e=this.getAttributeNode(e))&&this.removeAttributeNode(e)},appendChild:function(e){if(e.nodeType===Qb)return this.insertBefore(e,null);var d=e.parentNode;
d&&d.removeChild(e);d=this.lastChild;e.parentNode=this;e.previousSibling=d;e.nextSibling=null;d?d.nextSibling=e:this.firstChild=e;this.lastChild=e;Oe(this.ownerDocument,this,e);return e},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,d){(e=this.getAttributeNodeNS(e,d))&&this.removeAttributeNode(e)},
hasAttributeNS:function(e,d){return null!=this.getAttributeNodeNS(e,d)},getAttributeNS:function(e,d){return(e=this.getAttributeNodeNS(e,d))&&e.value||""},setAttributeNS:function(e,d,c){e=this.ownerDocument.createAttributeNS(e,d);e.value=e.nodeValue=""+c;this.setAttributeNode(e)},getAttributeNodeNS:function(e,d){return this.attributes.getNamedItemNS(e,d)},getElementsByTagName:function(e){return new $c(this,function(d){var c=[];Fd(d,function(a){a===d||a.nodeType!=Gb||"*"!==e&&a.tagName!=e||c.push(a)});
return c})},getElementsByTagNameNS:function(e,d){return new $c(this,function(c){var a=[];Fd(c,function(b){b===c||b.nodeType!==Gb||"*"!==e&&b.namespaceURI!==e||"*"!==d&&b.localName!=d||a.push(b)});return a})}};ad.prototype.getElementsByTagName=yc.prototype.getElementsByTagName;ad.prototype.getElementsByTagNameNS=yc.prototype.getElementsByTagNameNS;eb(yc,$a);Gd.prototype.nodeType=Ac;eb(Gd,$a);bd.prototype={data:"",substringData:function(e,d){return this.data.substring(e,e+d)},appendData:function(e){this.nodeValue=
this.data=e=this.data+e;this.length=e.length},insertData:function(e,d){this.replaceData(e,0,d)},appendChild:function(e){throw Error(La[$l]);},deleteData:function(e,d){this.replaceData(e,d,"")},replaceData:function(e,d,c){var a=this.data.substring(0,e);e=this.data.substring(e+d);this.nodeValue=this.data=c=a+c+e;this.length=c.length}};eb(bd,$a);Pe.prototype={nodeName:"#text",nodeType:Id,splitText:function(e){var d=this.data,c=d.substring(e);this.data=this.nodeValue=d=d.substring(0,e);this.length=d.length;
e=this.ownerDocument.createTextNode(c);this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling);return e}};eb(Pe,bd);Qe.prototype={nodeName:"#comment",nodeType:nh};eb(Qe,bd);Re.prototype={nodeName:"#cdata-section",nodeType:mh};eb(Re,bd);Se.prototype.nodeType=oh;eb(Se,$a);gh.prototype.nodeType=Zl;eb(gh,$a);hh.prototype.nodeType=Yl;eb(hh,$a);Te.prototype.nodeType=qh;eb(Te,$a);Hd.prototype.nodeName="#document-fragment";Hd.prototype.nodeType=Qb;eb(Hd,$a);Ue.prototype.nodeType=ph;eb(Ue,$a);ih.prototype.serializeToString=
function(e,d,c){return jh.call(e,d,c)};$a.prototype.toString=jh;try{if(Object.defineProperty){var am=function c(d){switch(d.nodeType){case Gb:case Qb:var a=[];for(d=d.firstChild;d;)7!==d.nodeType&&8!==d.nodeType&&a.push(c(d)),d=d.nextSibling;return a.join("");default:return d.nodeValue}};Object.defineProperty($c.prototype,"length",{get:function(){Ne(this);return this.$$length}});Object.defineProperty($a.prototype,"textContent",{get:function(){return am(this)},set:function(d){switch(this.nodeType){case Gb:case Qb:for(;this.firstChild;)this.removeChild(this.firstChild);
(d||String(d))&&this.appendChild(this.ownerDocument.createTextNode(d));break;default:this.nodeValue=this.value=this.data=d}}});Yg=function(d,c,a){d["$$"+c]=a}}}catch(e){}var bm=ma(function(e,d){function c(p){this.options=p||{locator:{}}}function a(p,q,r){function u(I){var M=p[I];!M&&B&&(M=2==p.length?function(L){p(I,L)}:p);y[I]=M&&function(L){M("[xmldom "+I+"]\t"+L+l(r))}||function(){}}if(!p){if(q instanceof b)return q;p=q}var y={},B=p instanceof Function;r=r||{};u("warning");u("error");u("fatalError");
return y}function b(){this.cdata=!1}function g(p,q){q.lineNumber=p.lineNumber;q.columnNumber=p.columnNumber}function l(p){if(p)return"\n@"+(p.systemId||"")+"#[line:"+p.lineNumber+",col:"+p.columnNumber+"]"}function k(p,q,r){return"string"==typeof p?p.substr(q,r):p.length>=q+r||q?new java.lang.String(p,q,r)+"":p}function f(p,q){p.currentElement?p.currentElement.appendChild(q):p.doc.appendChild(q)}c.prototype.parseFromString=function(p,q){var r=this.options,u=new h,y=r.domBuilder||new b,B=r.errorHandler,
I=r.locator,M=r.xmlns||{},L={lt:"\x3c",gt:"\x3e",amp:"\x26",quot:'"',apos:"'"};I&&y.setDocumentLocator(I);u.errorHandler=a(B,y,I);u.domBuilder=r.domBuilder||y;/\/x?html?$/.test(q)&&(L.nbsp="\u00a0",L.copy="\u00a9",M[""]="http://www.w3.org/1999/xhtml");M.xml=M.xml||"http://www.w3.org/XML/1998/namespace";p?u.parse(p,M,L):u.errorHandler.error("invalid doc source");return y.doc};b.prototype={startDocument:function(){this.doc=(new m).createDocument(null,null,null);this.locator&&(this.doc.documentURI=this.locator.systemId)},
startElement:function(p,q,r,u){var y=this.doc;q=y.createElementNS(p,r||q);var B=u.length;f(this,q);this.currentElement=q;this.locator&&g(this.locator,q);for(var I=0;I<B;I++){p=u.getURI(I);var M=u.getValue(I);r=u.getQName(I);p=y.createAttributeNS(p,r);this.locator&&g(u.getLocator(I),p);p.value=p.nodeValue=M;q.setAttributeNode(p)}},endElement:function(p,q,r){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(p,q){},endPrefixMapping:function(p){},processingInstruction:function(p,
q){p=this.doc.createProcessingInstruction(p,q);this.locator&&g(this.locator,p);f(this,p)},ignorableWhitespace:function(p,q,r){},characters:function(p,q,r){if(p=k.apply(this,arguments)){var u=this.cdata?this.doc.createCDATASection(p):this.doc.createTextNode(p);this.currentElement?this.currentElement.appendChild(u):/^\s*$/.test(p)&&this.doc.appendChild(u);this.locator&&g(this.locator,u)}},skippedEntity:function(p){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(p){if(this.locator=
p)p.lineNumber=0},comment:function(p,q,r){p=k.apply(this,arguments);var u=this.doc.createComment(p);this.locator&&g(this.locator,u);f(this,u)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(p,q,r){var u=this.doc.implementation;u&&u.createDocumentType&&(p=u.createDocumentType(p,q,r),this.locator&&g(this.locator,p),f(this,p))},warning:function(p){console.warn("[xmldom warning]\t"+p,l(this.locator))},error:function(p){console.error("[xmldom error]\t"+p,l(this.locator))},
fatalError:function(p){console.error("[xmldom fatalError]\t"+p,l(this.locator));throw p;}};"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(p){b.prototype[p]=function(){return null}});var h=Ug,m=d.DOMImplementation=ch;d.XMLSerializer=ih;d.DOMParser=c}).DOMParser,Ki=function(e){return!!e&&"object"===typeof e},lb=function d(){for(var c=arguments.length,a=Array(c),b=0;b<
c;b++)a[b]=arguments[b];return a.reduce(function(g,l){Object.keys(l).forEach(function(k){Array.isArray(g[k])&&Array.isArray(l[k])?g[k]=g[k].concat(l[k]):Ki(g[k])&&Ki(l[k])?g[k]=d(g[k],l[k]):g[k]=l[k]});return g},{})},cm=function(d){return Object.keys(d).map(function(c){return d[c]})},Yd=function(d){return d.reduce(function(c,a){return c.concat(a)},[])},Li=function(d){if(!d.length)return[];for(var c=[],a=0;a<d.length;a++)c.push(d[a]);return c},dm=function(d,c){return d.reduce(function(a,b,g){b[c]&&
a.push(g);return a},[])},ld=function(d){var c=d.baseUrl,a=d.source;a=void 0===a?"":a;var b=d.range;b=void 0===b?"":b;d=d.indexRange;d=void 0===d?"":d;c={uri:a,resolvedUri:Ib((void 0===c?"":c)||"",a)};if(b||d)b=(b?b:d).split("-"),a=parseInt(b[0],10),b=parseInt(b[1],10),c.byterange={length:b-a+1,offset:a};return c},em={"static":function(d){var c=d.timescale;return{start:0,end:Math.ceil(d.sourceDuration/(d.duration/(void 0===c?1:c)))}},dynamic:function(d){var c=d.timescale;c=void 0===c?1:c;var a=d.duration,
b=d.start,g=d.minimumUpdatePeriod,l=d.timeShiftBufferDepth,k=(d.NOW+d.clientOffset)/1E3;d=d.availabilityStartTime+(void 0===b?0:b);return{start:Math.max(0,Math.floor((k-d-(void 0===l?Infinity:l))*c/a)),end:Math.min(Math.ceil((k+(void 0===g?0:g)-d)*c/a),Math.floor((k-d)*c/a))}}},fm=function(d){return function(c,a){var b=d.duration,g=d.timescale,l=d.startNumber;return{number:(void 0===l?1:l)+c,duration:b/(void 0===g?1:g),timeline:d.periodIndex,time:a*b}}},Lf=function(d){var c=d.type,a=void 0===c?"static":
c;c=d.duration;var b=d.timescale;b=void 0===b?1:b;var g=d.sourceDuration,l=em[a](d),k=l.end,f=[];for(l=l.start;l<k;l++)f.push(l);d=f.map(fm(d));"static"===a&&(a=d.length-1,d[a].duration=g-c/b*a);return d},Mi=function(d){var c=d.baseUrl,a=d.initialization,b=void 0===a?{}:a;a=d.sourceDuration;var g=d.indexRange,l=void 0===g?"":g;g=d.duration;if(!c)throw Error("NO_BASE_URL");b=ld({baseUrl:c,source:b.sourceURL,range:b.range});c=ld({baseUrl:c,source:c,indexRange:l});c.map=b;g?(d=Lf(d),d.length&&(c.duration=
d[0].duration,c.timeline=d[0].timeline)):a&&(c.duration=a,c.timeline=0);c.number=0;return[c]},gm=function(d,c,a){var b=d.sidx.map?d.sidx.map:null,g=d.sidx.duration,l=d.timeline||0,k=d.sidx.byterange,f=k.offset+k.length;k=c.timescale;var h=c.references.filter(function(u){return 1!==u.referenceType}),m=[];f+=c.firstOffset;for(var p=0;p<h.length;p++){var q=c.references[p],r=q.referencedSize;q=Mi({baseUrl:a,timescale:k,timeline:l,periodIndex:l,duration:q.subsegmentDuration,sourceDuration:g,indexRange:f+
"-"+(f+r-1)})[0];b&&(q.map=b);m.push(q);f+=r}d.segments=m;return d},Ni=function(d){return cm(d.reduce(function(c,a){var b=a.attributes.id+(a.attributes.lang||"");if(c[b]){var g;a.segments[0]&&(a.segments[0].discontinuity=!0);(g=c[b].segments).push.apply(g,a.segments);a.attributes.contentProtection&&(c[b].attributes.contentProtection=a.attributes.contentProtection)}else c[b]=a;return c},{})).map(function(c){c.discontinuityStarts=dm(c.segments,"discontinuity");return c})},Mf=function(d,c){void 0===
c&&(c={});if(!Object.keys(c).length)return d;for(var a in d){var b=d[a];if(b.sidx){var g=b.sidx.byterange;g=b.sidx.uri+"-"+(g.offset+"-"+(g.offset+g.length-1));g=c[g]&&c[g].sidx;b.sidx&&g&&gm(b,g,b.sidx.resolvedUri)}}return d},hm=function(d,c){void 0===c&&(c={});var a;d=d.reduce(function(g,l){var k=l.attributes.role&&l.attributes.role.value||"",f=l.attributes.lang||"",h="main";f&&(h=""+l.attributes.lang+(k?" ("+k+")":""));if(g[h]&&g[h].playlists[0].attributes.BANDWIDTH>l.attributes.bandwidth)return g;
var m,p=l.attributes,q=l.segments,r=l.sidx,u={attributes:(m={NAME:p.id,BANDWIDTH:p.bandwidth,CODECS:p.codecs},m["PROGRAM-ID"]=1,m),uri:"",endList:"static"===(p.type||"static"),timeline:p.periodIndex,resolvedUri:"",targetDuration:p.duration,segments:q,mediaSequence:q.length?q[0].number:1};p.contentProtection&&(u.contentProtection=p.contentProtection);r&&(u.sidx=r);g[h]={language:f,autoselect:!0,"default":"main"===k,playlists:Mf([u],c),uri:""};"undefined"===typeof a&&"main"===k&&(a=l,a["default"]=!0);
return g},{});if(!a){var b=Object.keys(d)[0];d[b]["default"]=!0}return d},im=function(d,c){void 0===c&&(c={});return d.reduce(function(a,b){var g=b.attributes.lang||"text";if(a[g])return a;var l,k=b.attributes;b=b.segments;"undefined"===typeof b&&(b=[{uri:k.baseUrl,timeline:k.periodIndex,resolvedUri:k.baseUrl||"",duration:k.sourceDuration,number:0}],k.duration=k.sourceDuration);var f=(l={NAME:k.id,BANDWIDTH:k.bandwidth},l["PROGRAM-ID"]=1,l);k.codecs&&(f.CODECS=k.codecs);a[g]={language:g,"default":!1,
autoselect:!1,playlists:Mf([{attributes:f,uri:"",endList:"static"===(k.type||"static"),timeline:k.periodIndex,resolvedUri:k.baseUrl||"",targetDuration:k.duration,segments:b,mediaSequence:b.length?b[0].number:1}],c),uri:""};return a},{})},jm=function(d){var c,a=d.attributes,b=d.segments;d=d.sidx;var g={attributes:(c={NAME:a.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:a.width,height:a.height},CODECS:a.codecs,BANDWIDTH:a.bandwidth},c["PROGRAM-ID"]=1,c),uri:"",endList:"static"===(a.type||"static"),
timeline:a.periodIndex,resolvedUri:"",targetDuration:a.duration,segments:b,mediaSequence:b.length?b[0].number:1};a.contentProtection&&(g.contentProtection=a.contentProtection);d&&(g.sidx=d);return g},km=function(d,c,a){var b;void 0===a&&(a={});if(!d.length)return{};var g=d[0].attributes,l=g.sourceDuration,k=g.type;k=void 0===k?"static":k;var f=g.suggestedPresentationDelay;g=g.minimumUpdatePeriod;var h=Ni(d.filter(function(q){q=q.attributes;return"video/mp4"===q.mimeType||"video"===q.contentType})).map(jm),
m=Ni(d.filter(function(q){q=q.attributes;return"audio/mp4"===q.mimeType||"audio"===q.contentType}));d=d.filter(function(q){q=q.attributes;return"text/vtt"===q.mimeType||"text"===q.contentType});var p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(b={AUDIO:{},VIDEO:{}},b["CLOSED-CAPTIONS"]={},b.SUBTITLES={},b),uri:"",duration:l,playlists:Mf(h,a)};0<=g&&(p.minimumUpdatePeriod=1E3*g);c&&(p.locations=c);"dynamic"===k&&(p.suggestedPresentationDelay=f);m.length&&(p.mediaGroups.AUDIO.audio=
hm(m,a));d.length&&(p.mediaGroups.SUBTITLES.subs=im(d,a));return p},Oi=function(d,c){var a=d.type;a=void 0===a?"static":a;var b=d.minimumUpdatePeriod;b=void 0===b?0:b;var g=d.media;g=void 0===g?"":g;var l=d.sourceDuration,k=d.timescale;k=void 0===k?1:k;var f=d.startNumber;f=void 0===f?1:f;for(var h=d.periodIndex,m=[],p=-1,q=0;q<c.length;q++){var r=c[q],u=r.d,y=r.r||0;r=r.t||0;0>p&&(p=r);r&&r>p&&(p=r);if(0>y)if(y=q+1,y===c.length)if("dynamic"===a&&0<b&&0<g.indexOf("$Number$")){y=d.timescale;r=d.start;
var B=d.minimumUpdatePeriod;y=Math.ceil((((d.NOW+d.clientOffset)/1E3+(void 0===B?0:B)-(d.availabilityStartTime+(void 0===r?0:r)))*(void 0===y?1:y)-p)/u)}else y=(l*k-p)/u;else y=(c[y].t-p)/u;else y+=1;y=f+m.length+y;for(r=f+m.length;r<y;)m.push({number:r,duration:u/k,time:p,timeline:h}),p+=u,r++}return m},Pi=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Qi=function(d){return function(c,a,b,g){if("$$"===c)return"$";if("undefined"===typeof d[a])return c;c=""+d[a];if("RepresentationID"===a)return c;g=b?parseInt(g,
10):1;return c.length>=g?c:""+Array(g-c.length+1).join("0")+c}},lm=function(d,c){return d.duration||c?d.duration?Lf(d):Oi(d,c):[{number:d.startNumber||1,duration:d.sourceDuration,time:0,timeline:d.periodIndex}]},mm=function(d,c){var a={RepresentationID:d.id,Bandwidth:d.bandwidth||0},b=d.initialization;b=void 0===b?{sourceURL:"",range:""}:b;var g=ld({baseUrl:d.baseUrl,source:b.sourceURL.replace(Pi,Qi(a)),range:b.range});return lm(d,c).map(function(l){a.Number=l.number;a.Time=l.time;var k=(d.media||
"").replace(Pi,Qi(a));return{uri:k,timeline:l.timeline,duration:l.duration,resolvedUri:Ib(d.baseUrl||"",k),map:g,number:l.number}})},nm=function(d,c){var a=d.duration,b=d.segmentUrls;b=void 0===b?[]:b;if(!a&&!c||a&&c)throw Error("SEGMENT_TIME_UNSPECIFIED");var g=b.map(function(k){var f=d.baseUrl,h=d.initialization;h=void 0===h?{}:h;h=ld({baseUrl:f,source:h.sourceURL,range:h.range});k=ld({baseUrl:f,source:k.media,range:k.mediaRange});k.map=h;return k}),l;a&&(l=Lf(d));c&&(l=Oi(d,c));return l.map(function(k,
f){if(g[f])return f=g[f],f.timeline=k.timeline,f.duration=k.duration,f.number=k.number,f}).filter(function(k){return k})},om=function(d){var c=d.attributes;d=d.segmentInfo;if(d.template){var a=mm;var b=lb(c,d.template)}else d.base?(a=Mi,b=lb(c,d.base)):d.list&&(a=nm,b=lb(c,d.list));c={attributes:c};if(!a)return c;a=a(b,d.timeline);if(b.duration){var g=b,l=g.timescale;b.duration=g.duration/(void 0===l?1:l)}else b.duration=a.length?a.reduce(function(k,f){return Math.max(k,Math.ceil(f.duration))},0):
0;c.attributes=b;c.segments=a;d.base&&b.indexRange&&(c.sidx=a[0],c.segments=[]);return c},Ha=function(d,c){return Li(d.childNodes).filter(function(a){return a.tagName===c})},Nf=function(d){return d.textContent.trim()},Lc=function(d){d=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(d);if(!d)return 0;d=d.slice(1);var c=d[1],a=d[2],b=d[3],g=d[4],l=d[5];return 31536E3*parseFloat(d[0]||0)+2592E3*parseFloat(c||0)+86400*parseFloat(a||0)+3600*parseFloat(b||0)+60*parseFloat(g||
0)+parseFloat(l||0)},Ri={mediaPresentationDuration:function(d){return Lc(d)},availabilityStartTime:function(d){/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(d)&&(d+="Z");return Date.parse(d)/1E3},minimumUpdatePeriod:function(d){return Lc(d)},suggestedPresentationDelay:function(d){return Lc(d)},type:function(d){return d},timeShiftBufferDepth:function(d){return Lc(d)},start:function(d){return Lc(d)},width:function(d){return parseInt(d,10)},height:function(d){return parseInt(d,10)},bandwidth:function(d){return parseInt(d,
10)},startNumber:function(d){return parseInt(d,10)},timescale:function(d){return parseInt(d,10)},duration:function(d){var c=parseInt(d,10);return isNaN(c)?Lc(d):c},d:function(d){return parseInt(d,10)},t:function(d){return parseInt(d,10)},r:function(d){return parseInt(d,10)},DEFAULT:function(d){return d}},bb=function(d){return d&&d.attributes?Li(d.attributes).reduce(function(c,a){c[a.name]=(Ri[a.name]||Ri.DEFAULT)(a.value);return c},{}):{}},pm={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey",
"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Zd=function(d,c){return c.length?Yd(d.map(function(a){return c.map(function(b){return Ib(a,Nf(b))})})):d},Of=function(d){var c=Ha(d,"SegmentTemplate")[0],a=Ha(d,"SegmentList")[0],b=a&&Ha(a,"SegmentURL").map(function(f){return lb({tag:"SegmentURL"},bb(f))});d=Ha(d,"SegmentBase")[0];var g=
a||c;g=g&&Ha(g,"SegmentTimeline")[0];var l=a||d||c;l=l&&Ha(l,"Initialization")[0];(c=c&&bb(c))&&l?c.initialization=l&&bb(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var k={template:c,timeline:g&&Ha(g,"S").map(function(f){return bb(f)}),list:a&&lb(bb(a),{segmentUrls:b,initialization:bb(l)}),base:d&&lb(bb(d),{initialization:bb(l)})};Object.keys(k).forEach(function(f){k[f]||delete k[f]});return k},qm=function(d,c,a){return function(b){var g=Ha(b,"BaseURL");g=Zd(c,g);var l=
lb(d,bb(b)),k=Of(b);return g.map(function(f){return{segmentInfo:lb(a,k),attributes:lb(l,{baseUrl:f})}})}},rm=function(d){return d.reduce(function(c,a){var b=bb(a),g=pm[b.schemeIdUri];g&&(c[g]={attributes:b},a=Ha(a,"cenc:pssh")[0])&&(a=(a=Nf(a))&&Ei(a),c[g].pssh=a);return c},{})},sm=function(d,c,a){return function(b){var g=bb(b),l=Zd(c,Ha(b,"BaseURL")),k=Ha(b,"Role")[0];k={role:bb(k)};g=lb(d,g,k);k=rm(Ha(b,"ContentProtection"));Object.keys(k).length&&(g=lb(g,{contentProtection:k}));k=Of(b);b=Ha(b,
"Representation");k=lb(a,k);return Yd(b.map(qm(g,l,k)))}},tm=function(d,c){return function(a,b){var g=Zd(c,Ha(a,"BaseURL")),l=bb(a);l=parseInt(l.id,10);b=G.isNaN(l)?b:l;b=lb(d,{periodIndex:b});l=Ha(a,"AdaptationSet");a=Of(a);return Yd(l.map(sm(b,g,a)))}},Si=function(d){if(""===d)throw Error("DASH_EMPTY_MANIFEST");d=(d=(new bm).parseFromString(d,"application/xml"))&&"MPD"===d.documentElement.tagName?d.documentElement:null;if(!d||d&&0<d.getElementsByTagName("parsererror").length)throw Error("DASH_INVALID_XML");
return d},um=function(d){d=Ha(d,"UTCTiming")[0];if(!d)return null;d=bb(d);switch(d.schemeIdUri){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":d.method="HEAD";break;case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":d.method="GET";break;case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":d.method="DIRECT";d.value=Date.parse(d.value);
break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME");}return d},Ti=function(d,c){void 0===c&&(c={});d=Si(d);var a=c;void 0===a&&(a={});var b=a;a=b.manifestUri;a=void 0===a?"":a;var g=b.NOW;g=void 0===g?Date.now():g;b=b.clientOffset;var l=void 0===b?0:b;b=Ha(d,"Period");if(!b.length)throw Error("INVALID_NUMBER_OF_PERIOD");var k=Ha(d,"Location"),f=bb(d);d=Zd([a],Ha(d,"BaseURL"));f.sourceDuration=f.mediaPresentationDuration||0;f.NOW=g;f.clientOffset=l;k.length&&(f.locations=k.map(Nf));a=f.locations;
d=Yd(b.map(tm(f,d))).map(om);return km(d,a,c.sidxMapping)},$d=ma(function(d,c){Object.defineProperty(c,"__esModule",{value:!0});var a=function(h){return h instanceof Uint8Array?h:new Uint8Array(h&&h.buffer||h,h&&h.byteOffset||0,h&&h.byteLength||0)},b=function(h){if(!h)return"";h=Array.prototype.slice.call(h);h=String.fromCharCode.apply(null,a(h));try{return decodeURIComponent(escape(h))}catch(m){}return h},g=function(h,m){void 0===m&&(m=0);h=a(h);var p=h[m+6]<<21|h[m+7]<<14|h[m+8]<<7|h[m+9];return(h[m+
5]&16)>>4?p+20:p+10},l=function q(m,p){void 0===p&&(p=0);m=a(m);if(10>m.length-p||"ID3"!==b(m.subarray(p,p+3)))return p;p+=g(m,p);return q(m,p)},k={aac:function(m){var p=l(m);return m.length>=p+2&&255===(m[p]&255)&&224===(m[p+1]&224)&&16===(m[p+1]&22)},mp3:function(m){var p=l(m);return m.length>=p+2&&255===(m[p]&255)&&224===(m[p+1]&224)&&2===(m[p+1]&6)},webm:function(m){return 4<=m.length&&26===(m[0]&255)&&69===(m[1]&255)&&223===(m[2]&255)&&163===(m[3]&255)},mp4:function(m){return 8<=m.length&&/^(f|s)typ$/.test(b(m.subarray(4,
8)))&&!/^ftyp3g$/.test(b(m.subarray(4,10)))},"3gp":function(m){return 10<=m.length&&/^ftyp3g$/.test(b(m.subarray(4,10)))},ts:function(m){if(189>m.length&&1<=m.length)return 71===m[0];for(var p=0;p+188<m.length&&188>p;){if(71===m[p]&&71===m[p+188])return!0;p+=1}return!1},flac:function(m){return 4<=m.length&&/^fLaC$/.test(b(m.subarray(0,4)))},ogg:function(m){return 4<=m.length&&/^OggS$/.test(b(m.subarray(0,4)))}},f=Object.keys(k).filter(function(m){return"ts"!==m}).concat("ts");f.forEach(function(m){var p=
k[m];k[m]=function(q){return p(a(q))}});c.detectContainerForBytes=function(m){m=a(m);for(var p=0;p<f.length;p++){var q=f[p];if(k[q](m))return q}return""};c.getId3Offset=l;c.id3Size=g;c.isLikely=k;c.isLikelyFmp4MediaSegment=function(m){m=a(m);for(var p=0;p<m.length;){var q=(m[p]<<24|m[p+1]<<16|m[p+2]<<8|m[p+3])>>>0;if("moof"===b(m.subarray(p+4,p+8)))return!0;p=0===q||q+p>m.length?m.length:p+q}return!1}});ha($d);var Pf=$d.detectContainerForBytes,vm=$d.getId3Offset,Ui=$d.isLikelyFmp4MediaSegment,ae=
ma(function(d,c){Object.defineProperty(c,"__esModule",{value:!0});var a=function(b){return b instanceof Uint8Array?b:new Uint8Array(b&&b.buffer||b,b&&b.byteOffset||0,b&&b.byteLength||0)};c.bytesToString=function(b){if(!b)return"";b=Array.prototype.slice.call(b);b=String.fromCharCode.apply(null,a(b));try{return decodeURIComponent(escape(b))}catch(g){}return b};c.concatTypedArrays=function(){for(var b=arguments.length,g=Array(b),l=0;l<b;l++)g[l]=arguments[l];b=g.reduce(function(h,m){return h+=m&&(m.byteLength||
m.length)||0},0);var k=new Uint8Array(b),f=0;g.forEach(function(h){h=a(h);k.set(h,f);f+=h.byteLength});return k};c.isTypedArray=function(b){return ArrayBuffer.isView(b)};c.stringToBytes=function(b,g){void 0===g&&(g=!1);var l=[];"string"!==typeof b&&b&&"function"===typeof b.toString&&(b=b.toString());if("string"!==typeof b)return l;g||(b=unescape(encodeURIComponent(b)));return b.split("").map(function(k){return k.charCodeAt(0)&255})};c.toUint8=a});ha(ae);var wm=ae.concatTypedArrays,xm=ae.stringToBytes,
ym=ae.toUint8,mc=function(){this.init=function(){var d={};this.on=function(c,a){d[c]||(d[c]=[]);d[c]=d[c].concat(a)};this.off=function(c,a){if(!d[c])return!1;a=d[c].indexOf(a);d[c]=d[c].slice();d[c].splice(a,1);return-1<a};this.trigger=function(c){var a,b;if(a=d[c])if(2===arguments.length){var g=a.length;for(b=0;b<g;++b)a[b].call(this,arguments[1])}else{var l=[];for(b=1;b<arguments.length;++b)l.push(arguments[b]);g=a.length;for(b=0;b<g;++b)a[b].apply(this,l)}};this.dispose=function(){d={}}}};mc.prototype.pipe=
function(d){this.on("data",function(c){d.push(c)});this.on("done",function(c){d.flush(c)});this.on("partialdone",function(c){d.partialFlush(c)});this.on("endedtimeline",function(c){d.endTimeline(c)});this.on("reset",function(c){d.reset(c)});return d};mc.prototype.push=function(d){this.trigger("data",d)};mc.prototype.flush=function(d){this.trigger("done",d)};mc.prototype.partialFlush=function(d){this.trigger("partialdone",d)};mc.prototype.endTimeline=function(d){this.trigger("endedtimeline",d)};mc.prototype.reset=
function(d){this.trigger("reset",d)};var ac=function(d,c){var a=1;for(d>c&&(a=-1);4294967296<Math.abs(c-d);)d+=8589934592*a;return d};(function a(c){var b,g;a.prototype.init.call(this);this.type_=c||"shared";this.push=function(l){if("shared"===this.type_||l.type===this.type_)void 0===g&&(g=l.dts),l.dts=ac(l.dts,g),l.pts=ac(l.pts,g),b=l.dts,this.trigger("data",l)};this.flush=function(){g=b;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=
function(){b=g=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}}).prototype=new mc;var Vi=function(c){var a=c[1]&31;return a=a<<8|c[2]},be=function(c){return!!(c[1]&64)},ce=function(c){var a=0;1<(c[3]&48)>>>4&&(a+=c[4]+1);return a},Qf=function(c){switch(c){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},
zm=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],Wi=function(c,a){var b=c[a+6]<<21|c[a+7]<<14|c[a+8]<<7|c[a+9];c=c[a+5];b=0<=b?b:0;return(c&16)>>4?b+20:b+10},Am=function g(a,b){if(10>a.length-b||73!==a[b]||68!==a[b+1]||51!==a[b+2])return b;b+=Wi(a,b);return g(a,b)},Xi=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},Mc={isLikelyAacData:function(a){var b=Am(a,0);return a.length>=b+2&&255===(a[b]&255)&&240===(a[b+1]&240)&&16===(a[b+1]&22)},parseId3TagSize:Wi,parseAdtsSize:function(a,
b){return a[b+3]&6144|a[b+4]<<3|(a[b+5]&224)>>5},parseType:function(a,b){return 73===a[b]&&68===a[b+1]&&51===a[b+2]?"timed-metadata":a[b]&1&&240===(a[b+1]&240)?"audio":null},parseSampleRate:function(a){for(var b=0;b+5<a.length;)if(255!==a[b]||240!==(a[b+1]&246))b++;else return zm[(a[b+2]&60)>>>2];return null},parseAacTimestamp:function(a){var b=10;a[5]&64&&(b=b+4+Xi(a.subarray(10,14)));do{var g=Xi(a.subarray(b+4,b+8));if(1>g)break;var l=String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3]);if("PRIV"===l){l=
a.subarray(b+10,b+g+10);for(var k=0;k<l.byteLength;k++)if(0===l[k]){var f=unescape,h,m=l,p=k,q="";for(h=0;h<p;h++)q+="%"+("00"+m[h].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===f(q))return a=l.subarray(k+1),b=(a[3]&1)<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2,b*=4,b+=a[7]&3;break}}b+=10;b+=g}while(b<a.byteLength);return null}};var Ca={parseType:function(a,b){a=Vi(a);return 0===a?"pat":a===b?"pmt":b?"pes":null},parsePat:function(a){var b=be(a),g=4+ce(a);b&&(g+=a[g]+1);return(a[g+
10]&31)<<8|a[g+11]},parsePmt:function(a){var b={},g=be(a),l=4+ce(a);g&&(l+=a[l]+1);if(a[l+5]&1){g=3+((a[l+1]&15)<<8|a[l+2])-4;for(var k=12+((a[l+10]&15)<<8|a[l+11]);k<g;){var f=l+k;b[(a[f+1]&31)<<8|a[f+2]]=a[f];k+=((a[f+3]&15)<<8|a[f+4])+5}return b}},parsePayloadUnitStartIndicator:be,parsePesType:function(a,b){a=Vi(a);switch(b[a]){case 27:return"video";case 15:return"audio";case 21:return"timed-metadata";default:return null}},parsePesTime:function(a){if(!be(a))return null;var b=4+ce(a);if(b>=a.byteLength)return null;
var g=null;var l=a[b+7];l&192&&(g={},g.pts=(a[b+9]&14)<<27|(a[b+10]&255)<<20|(a[b+11]&254)<<12|(a[b+12]&255)<<5|(a[b+13]&254)>>>3,g.pts*=4,g.pts+=(a[b+13]&6)>>>1,g.dts=g.pts,l&64&&(g.dts=(a[b+14]&14)<<27|(a[b+15]&255)<<20|(a[b+16]&254)<<12|(a[b+17]&255)<<5|(a[b+18]&254)>>>3,g.dts*=4,g.dts+=(a[b+18]&6)>>>1));return g},videoPacketContainsKeyFrame:function(a){var b=4+ce(a);a=a.subarray(b);for(var g=b=0,l=!1;g<a.byteLength-3;g++)if(1===a[g+2]){b=g+5;break}for(;b<a.byteLength;)switch(a[b]){case 0:if(0!==
a[b-1]){b+=2;break}else if(0!==a[b-2]){b++;break}g+3!==b-2&&(g=Qf(a[g+3]&31),"slice_layer_without_partitioning_rbsp_idr"===g&&(l=!0));do b++;while(1!==a[b]&&b<a.length);g=b-2;b+=3;break;case 1:if(0!==a[b-1]||0!==a[b-2]){b+=3;break}g=Qf(a[g+3]&31);"slice_layer_without_partitioning_rbsp_idr"===g&&(l=!0);g=b-2;b+=3;break;default:b+=3}(a=a.subarray(g))&&3<a.byteLength&&(g=Qf(a[3]&31),"slice_layer_without_partitioning_rbsp_idr"===g&&(l=!0));return l}};var Yi=function(a,b,g){for(var l=0,k=188,f,h,m,p=!1;k<=
a.byteLength;)if(71!==a[l]||71!==a[k]&&k!==a.byteLength)l++,k++;else{f=a.subarray(l,k);h=Ca.parseType(f,b.pid);switch(h){case "pes":if(h=Ca.parsePesType(f,b.table),m=Ca.parsePayloadUnitStartIndicator(f),"audio"===h&&m&&(f=Ca.parsePesTime(f)))f.type="audio",g.audio.push(f),p=!0}if(p)break;l+=188;k+=188}k=a.byteLength;l=k-188;for(p=!1;0<=l;)if(71!==a[l]||71!==a[k]&&k!==a.byteLength)l--,k--;else{f=a.subarray(l,k);h=Ca.parseType(f,b.pid);switch(h){case "pes":if(h=Ca.parsePesType(f,b.table),m=Ca.parsePayloadUnitStartIndicator(f),
"audio"===h&&m&&(f=Ca.parsePesTime(f)))f.type="audio",g.audio.push(f),p=!0}if(p)break;l-=188;k-=188}},Bm=function(a,b){if(a.audio&&a.audio.length){var g=b;"undefined"===typeof g&&(g=a.audio[0].dts);a.audio.forEach(function(k){k.dts=ac(k.dts,g);k.pts=ac(k.pts,g);k.dtsTime=k.dts/9E4;k.ptsTime=k.pts/9E4})}if(a.video&&a.video.length){var l=b;"undefined"===typeof l&&(l=a.video[0].dts);a.video.forEach(function(k){k.dts=ac(k.dts,l);k.pts=ac(k.pts,l);k.dtsTime=k.dts/9E4;k.ptsTime=k.pts/9E4});a.firstKeyFrame&&
(a=a.firstKeyFrame,a.dts=ac(a.dts,l),a.pts=ac(a.pts,l),a.dtsTime=a.dts/9E4,a.ptsTime=a.dts/9E4)}},Cm={inspect:function(a,b){if(Mc.isLikelyAacData(a))a:{for(var g=!1,l=0,k=null,f=null,h,m=0,p;3<=a.length-m;){switch(Mc.parseType(a,m)){case "timed-metadata":if(10>a.length-m){g=!0;break}h=Mc.parseId3TagSize(a,m);if(h>a.length){g=!0;break}null===f&&(p=a.subarray(m,m+h),f=Mc.parseAacTimestamp(p));m+=h;break;case "audio":if(7>a.length-m){g=!0;break}h=Mc.parseAdtsSize(a,m);if(h>a.length){g=!0;break}null===
k&&(p=a.subarray(m,m+h),k=Mc.parseSampleRate(p));l++;m+=h;break;default:m++}if(g){a=null;break a}}null===k||null===f?a=null:(a=9E4/k,a={audio:[{type:"audio",dts:f,pts:f},{type:"audio",dts:f+1024*l*a,pts:f+1024*l*a}]})}else{l={pid:null,table:null};f={};k=0;for(h=188;h<a.byteLength;)if(71===a[k]&&71===a[h]){m=a.subarray(k,h);p=Ca.parseType(m,l.pid);switch(p){case "pat":l.pid||(l.pid=Ca.parsePat(m));break;case "pmt":l.table||(l.table=Ca.parsePmt(m))}if(l.pid&&l.table)break;k+=188;h+=188}else k++,h++;
for(g in l.table)if(l.table.hasOwnProperty(g))switch(l.table[g]){case 27:f.video=[];var q;h=a;m=l;p=f;var r=0,u=188,y=!1,B=[];for(q=0;u<h.byteLength;)if(71===h[r]&&71===h[u]){k=h.subarray(r,u);var I=Ca.parseType(k,m.pid);switch(I){case "pes":var M=Ca.parsePesType(k,m.table);I=Ca.parsePayloadUnitStartIndicator(k);if("video"===M&&(I&&!y&&(M=Ca.parsePesTime(k))&&(M.type="video",p.video.push(M),y=!0),!p.firstKeyFrame)){if(I&&0!==q){M=new Uint8Array(q);for(I=0;B.length;)q=B.shift(),M.set(q,I),I+=q.byteLength;
Ca.videoPacketContainsKeyFrame(M)&&((q=Ca.parsePesTime(M))?(p.firstKeyFrame=q,p.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself."));q=0}B.push(k);q+=k.byteLength}}if(y&&p.firstKeyFrame)break;r+=188;u+=188}else r++,u++;u=h.byteLength;
r=u-188;for(y=!1;0<=r;)if(71===h[r]&&71===h[u]){k=h.subarray(r,u);I=Ca.parseType(k,m.pid);switch(I){case "pes":if(M=Ca.parsePesType(k,m.table),I=Ca.parsePayloadUnitStartIndicator(k),"video"===M&&I&&(M=Ca.parsePesTime(k)))M.type="video",p.video.push(M),y=!0}if(y)break;r-=188;u-=188}else r--,u--;0===f.video.length&&delete f.video;break;case 15:f.audio=[],Yi(a,l,f),0===f.audio.length&&delete f.audio}a=f}if(!a||!a.audio&&!a.video)return null;Bm(a,b);return a},parseAudioPes_:Yi},nc=function(a){var b=""+
String.fromCharCode(a[0]);b+=String.fromCharCode(a[1]);b+=String.fromCharCode(a[2]);return b+=String.fromCharCode(a[3])},Fa=function l(b,g){var k=[],f;if(!g.length)return null;for(f=0;f<b.byteLength;){var h=(b[f]<<24|b[f+1]<<16|b[f+2]<<8|b[f+3])>>>0;var m=nc(b.subarray(f+4,f+8));h=1<h?f+h:b.byteLength;m===g[0]&&(1===g.length?k.push(b.subarray(f+8,h)):(f=l(b.subarray(f+8,h),g.slice(1)),f.length&&(k=k.concat(f))));f=h}return k},Zi=function(b){return{isLeading:(b[0]&12)>>>2,dependsOn:b[0]&3,isDependedOn:(b[1]&
192)>>>6,hasRedundancy:(b[1]&48)>>>4,paddingValue:(b[1]&14)>>>1,isNonSyncSample:b[1]&1,degradationPriority:b[2]<<8|b[3]}},md=function(b){return("00"+b.toString(16)).slice(-2)};var $i=function(b){var g=0===b[0]?12:20;return(b[g]<<24|b[g+1]<<16|b[g+2]<<8|b[g+3])>>>0};var aj={findBox:Fa,parseType:nc,timescale:function(b){return Fa(b,["moov","trak"]).reduce(function(g,l){var k=Fa(l,["tkhd"])[0];if(!k)return null;var f=k[0];f=0===f?12:20;k=(k[f]<<24|k[f+1]<<16|k[f+2]<<8|k[f+3])>>>0;l=Fa(l,["mdia","mdhd"])[0];
if(!l)return null;f=l[0];f=0===f?12:20;g[k]=(l[f]<<24|l[f+1]<<16|l[f+2]<<8|l[f+3])>>>0;return g},{})},startTime:function(b,g){g=Fa(g,["moof","traf"]);g=[].concat.apply([],g.map(function(l){return Fa(l,["tfhd"]).map(function(k){k=b[(k[4]<<24|k[5]<<16|k[6]<<8|k[7])>>>0]||9E4;var f=(f=Fa(l,["tfdt"]).map(function(h){var m=h[0];var p=(h[4]<<24|h[5]<<16|h[6]<<8|h[7])>>>0;1===m&&(p*=Math.pow(2,32),p+=(h[8]<<24|h[9]<<16|h[10]<<8|h[11])>>>0);return p})[0])||Infinity;return f/k})}));g=Math.min.apply(null,g);
return isFinite(g)?g:0},compositionStartTime:function(b,g){var l=Fa(g,["moof","traf"]),k=0;g=0;if(l&&l.length){var f=Fa(l[0],["tfhd"])[0],h=Fa(l[0],["trun"])[0];l=Fa(l[0],["tfdt"])[0];if(f){var m=new DataView(f.buffer,f.byteOffset,f.byteLength);var p=new Uint8Array(f.subarray(1,4));f=m.getUint32(4);var q=p[2]&1,r=p[2]&2,u=p[2]&8,y=p[2]&16;p=p[2]&32;var B=8;q&&(B+=4,m.getUint32(12),B+=4);r&&(m.getUint32(B),B+=4);u&&(m.getUint32(B),B+=4);y&&(m.getUint32(B),B+=4);p&&m.getUint32(B);m=f}l&&(k=l[0],new Uint8Array(l.subarray(1,
4)),f=(l[4]<<24|l[5]<<16|l[6]<<8|l[7])>>>0,1===k&&(f*=Math.pow(2,32),f+=(l[8]<<24|l[9]<<16|l[10]<<8|l[11])>>>0),k=f);if(h){l=h[0];var I=new Uint8Array(h.subarray(1,4));f=[];q=new DataView(h.buffer,h.byteOffset,h.byteLength);p=I[2]&1;B=I[2]&4;r=I[1]&1;u=I[1]&2;y=I[1]&4;I=I[1]&8;var M=q.getUint32(4),L=8;p&&(q.getInt32(L),L+=4);B&&M&&(p={flags:Zi(h.subarray(L,L+4))},L+=4,r&&(p.duration=q.getUint32(L),L+=4),u&&(p.size=q.getUint32(L),L+=4),I&&(p.compositionTimeOffset=1===l?q.getInt32(L):q.getUint32(L),
L+=4),f.push(p),M--);for(;M--;)p={},r&&(p.duration=q.getUint32(L),L+=4),u&&(p.size=q.getUint32(L),L+=4),y&&(p.flags=Zi(h.subarray(L,L+4)),L+=4),I&&(p.compositionTimeOffset=1===l?q.getInt32(L):q.getUint32(L),L+=4),f.push(p);f&&f.length&&(g=f[0].compositionTimeOffset||0)}}return(k+g)/(b[m]||9E4)},videoTrackIds:function(b){var g=[];Fa(b,["moov","trak"]).forEach(function(l){var k=Fa(l,["mdia","hdlr"]),f=Fa(l,["tkhd"]);k.forEach(function(h,m){h=nc(h.subarray(8,12));m=f[m];"vide"===h&&(m=new DataView(m.buffer,
m.byteOffset,m.byteLength),h=m.getUint8(0),m=0===h?m.getUint32(12):m.getUint32(20),g.push(m))})});return g},tracks:function(b){var g=[];Fa(b,["moov","trak"]).forEach(function(l){var k={},f=Fa(l,["tkhd"])[0];if(f){f=new DataView(f.buffer,f.byteOffset,f.byteLength);var h=f.getUint8(0);k.id=0===h?f.getUint32(12):f.getUint32(20)}if(f=Fa(l,["mdia","hdlr"])[0])f=nc(f.subarray(8,12)),k.type="vide"===f?"video":"soun"===f?"audio":f;if(f=Fa(l,["mdia","minf","stbl","stsd"])[0])if(f=f.subarray(8),k.codec=nc(f.subarray(4,
8)),f=Fa(f,[k.codec])[0])/^[a-z]vc[1-9]$/i.test(k.codec)?(f=f.subarray(78),h=nc(f.subarray(4,8)),"avcC"===h&&11<f.length?(k.codec+=".",k.codec+=md(f[9]),k.codec+=md(f[10]),k.codec+=md(f[11])):k.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(k.codec)&&(f=f.subarray(28),h=nc(f.subarray(4,8)),"esds"===h&&20<f.length&&0!==f[19]?(k.codec+="."+md(f[19]),k.codec+="."+md(f[20]>>>2&63).replace(/^0/,"")):k.codec="mp4a.40.2");if(l=Fa(l,["mdia","mdhd"])[0])k.timescale=$i(l);g.push(k)});return g},getTimescaleFromMediaHeader:$i},
Cb=ma(function(b,g){Object.defineProperty(g,"__esModule",{value:!0});var l=G&&"object"===typeof G&&"default"in G?G:{"default":G},k={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/},f=function(r){return r?r.replace(/avc1\.(\d+)\.(\d+)/i,function(u,y,B){u=
("00"+Number(y).toString(16)).slice(-2);B=("00"+Number(B).toString(16)).slice(-2);return"avc1."+u+"00"+B}):r},h=function(r){return r.map(f)},m=function(r){void 0===r&&(r="");var u={};r.split(",").forEach(function(y){y=y.trim();["video","audio"].forEach(function(B){var I=k[B].exec(y.toLowerCase());if(I&&!(1>=I.length)){I=y.substring(0,I[1].length);var M=y.replace(I,"");u[B]={type:I,details:M}}})});return u},p=function(r){void 0===r&&(r="");return k.audio.test(r.trim().toLowerCase())},q=function(r){if(r&&
"string"===typeof r){var u=r.toLowerCase().split(",").map(function(I){return f(I.trim())}),y="video";1===u.length&&p(u[0])&&(y="audio");var B="mp4";u.every(function(I){return k.mp4.test(I)})?B="mp4":u.every(function(I){return k.webm.test(I)})?B="webm":u.every(function(I){return k.ogg.test(I)})&&(B="ogg");return y+"/"+B+';codecs\x3d"'+r+'"'}};g.DEFAULT_AUDIO_CODEC="mp4a.40.2";g.DEFAULT_VIDEO_CODEC="avc1.4d400d";g.browserSupportsCodec=function(r){void 0===r&&(r="");return l["default"].MediaSource&&
l["default"].MediaSource.isTypeSupported&&l["default"].MediaSource.isTypeSupported(q(r))||!1};g.codecsFromDefault=function(r,u){if(!r.mediaGroups.AUDIO||!u)return null;r=r.mediaGroups.AUDIO[u];if(!r)return null;for(var y in r)if(u=r[y],u["default"]&&u.playlists)return m(u.playlists[0].attributes.CODECS);return null};g.getMimeForCodec=q;g.isAudioCodec=p;g.isVideoCodec=function(r){void 0===r&&(r="");return k.video.test(r.trim().toLowerCase())};g.mapLegacyAvcCodecs=function(r){return r.replace(/avc1\.(\d+)\.(\d+)/i,
function(u){return h([u])[0]})};g.muxerSupportsCodec=function(r){void 0===r&&(r="");return r.toLowerCase().split(",").every(function(u){u=u.trim();return k.muxerVideo.test(u)||k.muxerAudio.test(u)})};g.parseCodecs=m;g.translateLegacyCodec=f;g.translateLegacyCodecs=h});ha(Cb);var bj=Cb.DEFAULT_AUDIO_CODEC,Dm=Cb.DEFAULT_VIDEO_CODEC,de=Cb.browserSupportsCodec,Em=Cb.codecsFromDefault,cj=Cb.getMimeForCodec,Fm=Cb.isAudioCodec,Gm=Cb.isVideoCodec,Rf=Cb.muxerSupportsCodec,nd=Cb.parseCodecs,dj=Cb.translateLegacyCodec,
ee=function(b,g,l){return b&&l&&l.responseURL&&g!==l.responseURL?l.responseURL:g},Hm=K.log,ej=function(b){var g=b.manifestString,l=b.customTagParsers;l=void 0===l?[]:l;b=b.customTagMappers;b=void 0===b?[]:b;var k=new Xl;l.forEach(function(f){return k.addParser(f)});b.forEach(function(f){return k.addTagMapper(f)});k.push(g);k.end();return k.manifest},fe=function(b,g){["AUDIO","SUBTITLES"].forEach(function(l){for(var k in b.mediaGroups[l])for(var f in b.mediaGroups[l][k])g(b.mediaGroups[l][k][f],l,
k,f)})},fj=function(b){var g=b.playlist,l=b.uri;g.id=b.id;l&&(g.uri=l);g.attributes=g.attributes||{}},Im=function(b){for(var g=b.playlists.length;g--;){var l=b.playlists[g];fj({playlist:l,id:g+"-"+l.uri});l.resolvedUri=Ib(b.uri,l.uri);b.playlists[l.id]=l;b.playlists[l.uri]=l;l.attributes.BANDWIDTH||Hm.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},Jm=function(b){fe(b,function(g){g.uri&&(g.resolvedUri=Ib(b.uri,g.uri))})},Km=function(b,g){b="0-"+g;var l={mediaGroups:{AUDIO:{},
VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:G.location.href,resolvedUri:G.location.href,playlists:[{uri:g,id:b,resolvedUri:g,attributes:{}}]};l.playlists[b]=l.playlists[0];l.playlists[g]=l.playlists[0];return l},gj=function(b,g){b.uri=g;for(g=0;g<b.playlists.length;g++)b.playlists[g].uri||(b.playlists[g].uri="placeholder-uri-"+g);fe(b,function(l,k,f,h){l.playlists&&l.playlists.length&&!l.playlists[0].uri&&(k="placeholder-uri-"+k+"-"+f+"-"+h,f="0-"+k,l.playlists[0].uri=k,l.playlists[0].id=f,b.playlists[f]=
l.playlists[0],b.playlists[k]=l.playlists[0])});Im(b);Jm(b)},Sf=K.mergeOptions,Lm=function(b,g,l){var k=g.slice();l=l||0;g=Math.min(b.length,g.length+l);for(var f=l;f<g;f++)k[f-l]=Sf(b[f],k[f-l]);return k},hj=function(b,g){b.resolvedUri||(b.resolvedUri=Ib(g,b.uri));b.key&&!b.key.resolvedUri&&(b.key.resolvedUri=Ib(g,b.key.uri));b.map&&!b.map.resolvedUri&&(b.map.resolvedUri=Ib(g,b.map.uri))},Tf=function(b,g){b=Sf(b,{});var l=b.playlists[g.id];if(!l||l.segments&&g.segments&&l.segments.length===g.segments.length&&
l.endList===g.endList&&l.mediaSequence===g.mediaSequence)return null;var k=Sf(l,g);l.segments&&(k.segments=Lm(l.segments,g.segments,g.mediaSequence-l.mediaSequence));k.segments.forEach(function(f){hj(f,k.resolvedUri)});for(l=0;l<b.playlists.length;l++)b.playlists[l].id===g.id&&(b.playlists[l]=k);b.playlists[g.id]=k;b.playlists[g.uri]=k;return b},ij=function(b,g){var l=b.segments[b.segments.length-1];return g&&l&&l.duration?1E3*l.duration:500*(b.targetDuration||10)},Nc=function(b){function g(k,f,h){void 0===
h&&(h={});var m=b.call(this)||this;if(!k)throw Error("A non-empty playlist URL or object is required");var p=h;h=p.withCredentials;p=p.handleManifestRedirects;m.src=k;m.vhs_=f;m.withCredentials=void 0===h?!1:h;m.handleManifestRedirects=void 0===p?!1:p;k=f.options_;m.customTagParsers=k&&k.customTagParsers||[];m.customTagMappers=k&&k.customTagMappers||[];m.state="HAVE_NOTHING";m.on("mediaupdatetimeout",function(){"HAVE_METADATA"===m.state&&(m.state="HAVE_CURRENT_METADATA",m.request=m.vhs_.xhr({uri:Ib(m.master.uri,
m.media().uri),withCredentials:m.withCredentials},function(q,r){if(m.request){if(q)return m.playlistRequestError(m.request,m.media(),"HAVE_METADATA");m.haveMetadata({playlistString:m.request.responseText,url:m.media().uri,id:m.media().id})}}))});return m}Z(g,b);var l=g.prototype;l.playlistRequestError=function(k,f,h){var m=f.uri;f=f.id;this.request=null;h&&(this.state=h);this.error={playlist:this.master.playlists[f],status:k.status,message:"HLS playlist request error at URL: "+m+".",responseText:k.responseText,
code:500<=k.status?4:2};this.trigger("error")};l.haveMetadata=function(k){var f=this,h=k.playlistString,m=k.playlistObject,p=k.url;k=k.id;this.request=null;this.state="HAVE_METADATA";h=m||ej({manifestString:h,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers});fj({playlist:h,uri:p,id:k});p=Tf(this.master,h);this.targetDuration=h.targetDuration;p?(this.master=p,this.media_=this.master.playlists[k]):this.trigger("playlistunchanged");this.media().endList||(G.clearTimeout(this.mediaUpdateTimeout),
this.mediaUpdateTimeout=G.setTimeout(function(){f.trigger("mediaupdatetimeout")},ij(this.media(),!!p)));this.trigger("loadedplaylist")};l.dispose=function(){this.trigger("dispose");this.stopRequest();G.clearTimeout(this.mediaUpdateTimeout);G.clearTimeout(this.finalRenditionTimeout);this.off()};l.stopRequest=function(){if(this.request){var k=this.request;this.request=null;k.onreadystatechange=null;k.abort()}};l.media=function(k,f){var h=this;if(!k)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+
this.state);if("string"===typeof k){if(!this.master.playlists[k])throw Error("Unknown playlist URI: "+k);k=this.master.playlists[k]}G.clearTimeout(this.finalRenditionTimeout);if(f)f=k.targetDuration/2*1E3||5E3,this.finalRenditionTimeout=G.setTimeout(this.media.bind(this,k,!1),f);else{var m=this.state;f=!this.media_||k.id!==this.media_.id;if(this.master.playlists[k.id].endList||k.endList&&k.segments.length)this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),
this.state="HAVE_METADATA",this.media_=k,f&&(this.trigger("mediachanging"),"HAVE_MASTER"===m?this.trigger("loadedmetadata"):this.trigger("mediachange"));else if(f){this.state="SWITCHING_MEDIA";if(this.request){if(k.resolvedUri===this.request.url)return;this.request.onreadystatechange=null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.request=this.vhs_.xhr({uri:k.resolvedUri,withCredentials:this.withCredentials},function(p,q){if(h.request){k.resolvedUri=ee(h.handleManifestRedirects,
k.resolvedUri,q);if(p)return h.playlistRequestError(h.request,k,m);h.haveMetadata({playlistString:q.responseText,url:k.uri,id:k.id});"HAVE_MASTER"===m?h.trigger("loadedmetadata"):h.trigger("mediachange")}})}}};l.pause=function(){this.stopRequest();G.clearTimeout(this.mediaUpdateTimeout);"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")};l.load=function(k){var f=
this;G.clearTimeout(this.mediaUpdateTimeout);var h=this.media();k?this.mediaUpdateTimeout=G.setTimeout(function(){return f.load()},h?h.targetDuration/2*1E3:5E3):this.started?h&&!h.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()};l.start=function(){var k=this;this.started=!0;"object"===typeof this.src?(this.src.uri||(this.src.uri=G.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){k.setupInitialPlaylist(k.src)},0)):this.request=this.vhs_.xhr({uri:this.src,
withCredentials:this.withCredentials},function(f,h){if(k.request){k.request=null;if(f)return k.error={status:h.status,message:"HLS playlist request error at URL: "+k.src+".",responseText:h.responseText,code:2},"HAVE_NOTHING"===k.state&&(k.started=!1),k.trigger("error");k.src=ee(k.handleManifestRedirects,k.src,h);f=ej({manifestString:h.responseText,customTagParsers:k.customTagParsers,customTagMappers:k.customTagMappers});k.setupInitialPlaylist(f)}})};l.srcUri=function(){return"string"===typeof this.src?
this.src:this.src.uri};l.setupInitialPlaylist=function(k){this.state="HAVE_MASTER";if(k.playlists)this.master=k,gj(this.master,this.srcUri()),k.playlists.forEach(function(h){h.segments&&h.segments.forEach(function(m){hj(m,h.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);else{var f=this.srcUri()||G.location.href;this.master=Km(k,f);this.haveMetadata({playlistObject:k,url:f,id:this.master.playlists[0].id});this.trigger("loadedmetadata")}};return g}(K.EventTarget),
Oc=1/30,Jb=3*Oc,jj=function(b,g){var l=[],k;if(b&&b.length)for(k=0;k<b.length;k++)g(b.start(k),b.end(k))&&l.push([b.start(k),b.end(k)]);return K.createTimeRanges(l)},od=function(b,g){return jj(b,function(l,k){return l-Jb<=g&&k+Jb>=g})},Uf=function(b,g){return jj(b,function(l){return l-Oc>=g})},Mm=function(b,g){var l=null,k=null,f=0,h=[],m=[];if(!(b&&b.length&&g&&g.length))return K.createTimeRange();for(var p=b.length;p--;)h.push({time:b.start(p),type:"start"}),h.push({time:b.end(p),type:"end"});for(p=
g.length;p--;)h.push({time:g.start(p),type:"start"}),h.push({time:g.end(p),type:"end"});h.sort(function(q,r){return q.time-r.time});for(p=0;p<h.length;p++)"start"===h[p].type?(f++,2===f&&(l=h[p].time)):"end"===h[p].type&&(f--,1===f&&(k=h[p].time)),null!==l&&null!==k&&(m.push([l,k]),k=l=null);return K.createTimeRanges(m)},kj=function(b){var g=[];if(!b||!b.length)return"";for(var l=0;l<b.length;l++)g.push(b.start(l)+" \x3d\x3e "+b.end(l));return g.join(", ")},Vf=function(b){for(var g=[],l=0;l<b.length;l++)g.push({start:b.start(l),
end:b.end(l)});return g},Nm=function(b,g){if(b===g)return!1;if(!b&&g||!g&&b||b.length!==g.length)return!0;for(var l=0;l<b.length;l++)if(b.start(l)!==g.start(l)||b.end(l)!==g.end(l))return!0;return!1},lj=K.createTimeRange,Om=function(b,g){var l=0;g-=b.mediaSequence;var k=b.segments[g];if(k){if("undefined"!==typeof k.start)return{result:k.start,precise:!0};if("undefined"!==typeof k.end)return{result:k.end-k.duration,precise:!0}}for(;g--;){k=b.segments[g];if("undefined"!==typeof k.end)return{result:l+
k.end,precise:!0};l+=k.duration;if("undefined"!==typeof k.start)return{result:l+k.start,precise:!0}}return{result:l,precise:!1}},mj=function(b,g,l){"undefined"===typeof g&&(g=b.mediaSequence+b.segments.length);if(g<b.mediaSequence)return 0;var k=Om(b,g);if(k.precise)return k.result;a:{var f=0;for(var h=g-b.mediaSequence;h<b.segments.length;h++){g=b.segments[h];if("undefined"!==typeof g.start){b=g.start-f;f=!0;break a}f+=g.duration;if("undefined"!==typeof g.end){b=g.end-f;f=!0;break a}}b=-1;f=!1}return f?
b:k.result+l},nj=function(b,g,l){if(!b)return 0;"number"!==typeof l&&(l=0);if("undefined"===typeof g){if(b.totalDuration)return b.totalDuration;if(!b.endList)return G.Infinity}return mj(b,g,l)},pd=function(b,g,l){var k=0;g>l&&(l=[l,g],g=l[0],l=l[1]);if(0>g){for(;g<Math.min(0,l);g++)k+=b.targetDuration;g=0}for(;g<l;g++)k+=b.segments[g].duration;return k},oj=function(b,g){if(!b.segments.length)return 0;var l=b.segments.length,k=b.segments[l-1].duration||b.targetDuration;g="number"===typeof g?g:k+2*
b.targetDuration;if(0===g)return l;for(k=0;l--&&!(k+=b.segments[l].duration,k>=g););return Math.max(0,l)},pj=function(b,g,l,k){if(!b||!b.segments)return null;if(b.endList)return nj(b);if(null===g)return null;g=g||0;l=l?oj(b,k):b.segments.length;return mj(b,b.mediaSequence+l,g)},qj=function(b){return b.excludeUntil&&b.excludeUntil>Date.now()},Wf=function(b){return b.excludeUntil&&Infinity===b.excludeUntil},ge=function(b){var g=qj(b);return!b.disabled&&!g},rj=function(b,g){return g.attributes&&g.attributes[b]},
Xf=function(b,g){if(1===b.playlists.length)return!0;var l=g.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===b.playlists.filter(function(k){return ge(k)?(k.attributes.BANDWIDTH||0)<l:!1}).length},gb={duration:nj,seekable:function(b,g,l){var k=g||0;b=pj(b,g,!0,l);return null===b?lj():lj(k,b)},safeLiveIndex:oj,getMediaInfoForTime:function(b,g,l,k){var f,h=b.segments.length,m=g-k;if(0>m){if(0<l)for(f=l-1;0<=f;f--){var p=b.segments[f];m+=p.duration+Oc;if(0<m)return{mediaIndex:f,startTime:k-pd(b,l,f)}}return{mediaIndex:0,
startTime:g}}if(0>l){for(f=l;0>f;f++)if(m-=b.targetDuration,0>m)return{mediaIndex:0,startTime:g};l=0}for(f=l;f<h;f++)if(p=b.segments[f],m-=p.duration+Oc,0>m)return{mediaIndex:f,startTime:k+pd(b,l,f)};return{mediaIndex:h-1,startTime:g}},isEnabled:ge,isDisabled:function(b){return b.disabled},isBlacklisted:qj,isIncompatible:Wf,playlistEnd:pj,isAes:function(b){for(var g=0;g<b.segments.length;g++)if(b.segments[g].key)return!0;return!1},hasAttribute:rj,estimateSegmentRequestTime:function(b,g,l,k){void 0===
k&&(k=0);return rj("BANDWIDTH",l)?(b*l.attributes.BANDWIDTH-8*k)/g:NaN},isLowestEnabledRendition:Xf},Pm=K.xhr,Qm=K.mergeOptions,Yf=function(b,g,l,k){var f="arraybuffer"===b.responseType?b.response:b.responseText;!g&&f&&(b.responseTime=Date.now(),b.roundTripTime=b.responseTime-b.requestTime,b.bytesReceived=f.byteLength||f.length,b.bandwidth||(b.bandwidth=Math.floor(b.bytesReceived/b.roundTripTime*8E3)));l.headers&&(b.responseHeaders=l.headers);g&&"ETIMEDOUT"===g.code&&(b.timedout=!0);g||b.aborted||
200===l.statusCode||206===l.statusCode||0===l.statusCode||(g=Error("XHR Failed with a response of: "+(b&&(f||b.responseText))));k(g,b)},sj=function(){return function k(g,l){g=Qm({timeout:45E3},g);var f=k.beforeRequest||K.Vhs.xhr.beforeRequest;f&&"function"===typeof f&&(f=f(g))&&(g=f);var h=Pm(g,function(p,q){return Yf(h,p,q,l)}),m=h.abort;h.abort=function(){h.aborted=!0;return m.apply(h,arguments)};h.uri=g.uri;h.requestTime=Date.now();return h}},Zf=function(b){var g={};b.byterange&&(b=b.byterange,
g.Range="bytes\x3d"+b.offset+"-"+(b.offset+b.length-1));return g},Rm=function(b,g){b=b.toString(16);return"00".substring(0,2-b.length)+b+(g%2?" ":"")},Sm=function(b){return 32<=b&&126>b?String.fromCharCode(b):"."},tj=function(b){var g={};Object.keys(b).forEach(function(l){var k=b[l];ArrayBuffer.isView(k)?g[l]={bytes:k.buffer,byteOffset:k.byteOffset,byteLength:k.byteLength}:g[l]=k});return g},he=function(b){var g=b.byterange||{length:Infinity,offset:0};return[g.length,g.offset,b.resolvedUri].join()},
uj=function(b){b=Array.prototype.slice.call(b);for(var g="",l,k,f=0;f<b.length/16;f++)l=b.slice(16*f,16*f+16).map(Rm).join(""),k=b.slice(16*f,16*f+16).map(Sm).join(""),g+=l+" "+k+"\n";return g},Tm=Object.freeze({__proto__:null,createTransferableMessage:tj,initSegmentId:he,segmentKeyId:function(b){return b.resolvedUri},hexDump:uj,tagDump:function(b){return uj(b.bytes)},textRanges:function(b){var g="",l;for(l=0;l<b.length;l++){var k=b;var f=l;k=k.start(f)+"-"+k.end(f);g+=k+" "}return g}}),Um=function(b,
g){try{var l=new Date(b)}catch(m){return null}if(!g||!g.segments||0===g.segments.length)return null;b=g.segments[0];if(l<b.dateTimeObject)return null;for(var k=0;k<g.segments.length-1&&!(b=g.segments[k],l<g.segments[k+1].dateTimeObject);k++);k=g.segments[g.segments.length-1];var f=k.dateTimeObject;if(k.videoTimingInfo){var h=k.videoTimingInfo;h=h.transmuxedPresentationEnd-h.transmuxedPresentationStart-h.transmuxerPrependedSeconds}else h=k.duration+.25*k.duration;h=new Date(f.getTime()+1E3*h);if(l>
h)return null;l>f&&(b=k);return{segment:b,estimatedStart:b.videoTimingInfo?b.videoTimingInfo.transmuxedPresentationStart:gb.duration(g,g.mediaSequence+g.segments.indexOf(b)),type:b.videoTimingInfo?"accurate":"estimate"}},Vm=function(b,g){if(!g||!g.segments||0===g.segments.length)return null;for(var l=0,k,f=0;f<g.segments.length&&!(k=g.segments[f],l=k.videoTimingInfo?k.videoTimingInfo.transmuxedPresentationEnd:l+k.duration,b<=l);f++);g=g.segments[g.segments.length-1];if(g.videoTimingInfo&&g.videoTimingInfo.transmuxedPresentationEnd<
b)return null;if(b>l){if(b>l+.25*g.duration)return null;k=g}return{segment:k,estimatedStart:k.videoTimingInfo?k.videoTimingInfo.transmuxedPresentationStart:l-k.duration,type:k.videoTimingInfo?"accurate":"estimate"}},Wm=function(b,g){try{var l=new Date(b);var k=new Date(g)}catch(f){}b=l.getTime();return(k.getTime()-b)/1E3},Xm=function(b){if(!b.segments||0===b.segments.length)return!1;for(var g=0;g<b.segments.length;g++)if(!b.segments[g].dateTimeObject)return!1;return!0},Ym=function(b){var g=b.playlist,
l=b.time;l=void 0===l?void 0:l;b=b.callback;if(!b)throw Error("getProgramTime: callback must be provided");if(!g||void 0===l)return b({message:"getProgramTime: playlist and time must be provided"});var k=Vm(l,g);if(!k)return b({message:"valid programTime was not found"});if("estimate"===k.type)return b({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:k.estimatedStart});g={mediaSeconds:l};k=k.segment;k.dateTimeObject?(l-=k.videoTimingInfo.transmuxedPresentationStart+
k.videoTimingInfo.transmuxerPrependedSeconds,l=new Date(k.dateTimeObject.getTime()+1E3*l)):l=null;l&&(g.programDateTime=l.toISOString());return b(null,g)},Zm=function l(g){var k=g.programTime,f=g.playlist,h=g.retryCount,m=void 0===h?2:h,p=g.seekTo;h=g.pauseAfterSeek;var q=void 0===h?!0:h,r=g.tech,u=g.callback;if(!u)throw Error("seekToProgramTime: callback must be provided");if("undefined"===typeof k||!f||!p)return u({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});
if(!f.endList&&!r.hasStarted_)return u({message:"player must be playing a live stream to start buffering"});if(!Xm(f))return u({message:"programDateTime tags must be provided in the manifest "+f.resolvedUri});g=Um(k,f);if(!g)return u({message:k+" was not found in the stream"});h=g.segment;var y=Wm(h.dateTimeObject,k);if("estimate"===g.type){if(0===m)return u({message:k+" is not buffered yet. Try again"});p(g.estimatedStart+y);r.one("seeked",function(){l({programTime:k,playlist:f,retryCount:m-1,seekTo:p,
pauseAfterSeek:q,tech:r,callback:u})})}else g=h.start+y,r.one("seeked",function(){return u(null,r.currentTime())}),q&&r.pause(),p(g)},vj=function(g,l){if(4===g.readyState)return l()},$m=function(g,l,k){var f=[],h,m=!1,p=function(u,y,B,I){y.abort();m=!0;return k(u,y,B,I)},q=function(u,y){if(!m){if(u)return p(u,y,"",f);var B=y.responseText.substring(f&&f.byteLength||0,y.responseText.length);f=wm(f,xm(B,!0));h=h||vm(f);if(10>f.length||h&&f.length<h+2)return vj(y,function(){return p(u,y,"",f)});B=Pf(f);
return"ts"===B&&188>f.length||!B&&376>f.length?vj(y,function(){return p(u,y,"",f)}):p(null,y,B,f)}},r=l({uri:g,beforeSend:function(u){u.overrideMimeType("text/plain; charset\x3dx-user-defined");u.addEventListener("progress",function(y){return Yf(u,null,{statusCode:u.status},q)})}},function(u,y){return Yf(r,u,y,q)});return r},wj=K.mergeOptions,ie=function(g){var l=g.srcUrl;g=Ti(g.masterXml,{manifestUri:l,clientOffset:g.clientOffset,sidxMapping:g.sidxMapping});gj(g,l);return g},xj=function(g,l){for(var k=
!0,f=wj(g,{duration:l.duration,minimumUpdatePeriod:l.minimumUpdatePeriod}),h=0;h<l.playlists.length;h++){var m=Tf(f,l.playlists[h]);m&&(f=m,k=!1)}fe(l,function(p,q,r,u){if(p.playlists&&p.playlists.length){var y=p.playlists[0].id;if(p=Tf(f,p.playlists[0]))f=p,f.mediaGroups[q][r][u].playlists[0]=f.playlists[y],k=!1}});l.minimumUpdatePeriod!==g.minimumUpdatePeriod&&(k=!1);return k?null:f},$f=function(g){return g.uri+"-"+g.byterange.offset+"-"+(g.byterange.offset+g.byterange.length-1)},yj=function(g,
l){var k={},f;for(f in g){var h=g[f].sidx;if(h){var m=$f(h);if(!l[m])break;var p=l[m].sidxInfo;(!p.map&&!h.map||p.map&&h.map&&p.map.byterange.offset===h.map.byterange.offset&&p.map.byterange.length===h.map.byterange.length)&&p.uri===h.uri&&p.byterange.offset===h.byterange.offset&&p.byterange.length===h.byterange.length&&(k[m]=l[m])}}return k},an=function(g,l,k,f){g=Ti(g,{manifestUri:l,clientOffset:k});var h=yj(g.playlists,f);fe(g,function(m,p,q,r){m.playlists&&m.playlists.length&&(h=wj(h,yj(m.playlists,
f)))});return h},zj=function(g,l,k,f,h,m){var p={uri:ee(h.handleManifestRedirects,l.resolvedUri),byterange:l.byterange,playlist:k},q=K.mergeOptions(p,{responseType:"arraybuffer",headers:Zf(p)});return $m(p.uri,f,function(r,u,y,B){if(r)return m(r,u);if(!y||"mp4"!==y)return m({status:u.status,message:"Unsupported "+(y||"unknown")+" container type for sidx segment at URL: "+p.uri,response:"",playlist:k,internal:!0,blacklistDuration:Infinity,code:2},u);var I=p.byterange;y=I.offset;I=I.length;if(B.length>=
I+y)return m(r,{response:B.subarray(y,y+I),status:u.status,uri:u.uri});g.request=f(q,m)})},ag=function(g){function l(f,h,m,p){void 0===m&&(m={});var q=g.call(this)||this;var r=m;m=r.withCredentials;r=r.handleManifestRedirects;q.vhs_=h;q.withCredentials=void 0===m?!1:m;q.handleManifestRedirects=void 0===r?!1:r;if(!f)throw Error("A non-empty playlist URL or object is required");q.on("minimumUpdatePeriod",function(){q.refreshXml_()});q.on("mediaupdatetimeout",function(){q.refreshMedia_(q.media().id)});
q.state="HAVE_NOTHING";q.loadedPlaylists_={};if("string"===typeof f)return q.srcUrl=f,q.sidxMapping_={},ia(q);q.setupChildLoader(p,f);return q}Z(l,g);var k=l.prototype;k.setupChildLoader=function(f,h){this.masterPlaylistLoader_=f;this.childPlaylist_=h};k.dispose=function(){this.trigger("dispose");this.stopRequest();this.loadedPlaylists_={};G.clearTimeout(this.minimumUpdatePeriodTimeout_);G.clearTimeout(this.mediaRequest_);G.clearTimeout(this.mediaUpdateTimeout);this.off()};k.hasPendingRequest=function(){return this.request||
this.mediaRequest_};k.stopRequest=function(){if(this.request){var f=this.request;this.request=null;f.onreadystatechange=null;f.abort()}};k.sidxRequestFinished_=function(f,h,m,p){var q=this;return function(r,u){if(q.request)if(q.request=null,r)q.error="object"===typeof r?r:{status:u.status,message:"DASH playlist request error at URL: "+f.uri,response:u.response,code:2},m&&(q.state=m),q.trigger("error");else{r=ym(u.response).subarray(8);u=new DataView(r.buffer,r.byteOffset,r.byteLength);var y={version:r[0],
flags:new Uint8Array(r.subarray(1,4)),references:[],referenceId:u.getUint32(4),timescale:u.getUint32(8),earliestPresentationTime:u.getUint32(12),firstOffset:u.getUint32(16)},B=u.getUint16(22),I;for(I=24;B;I+=12,B--)y.references.push({referenceType:(r[I]&128)>>>7,referencedSize:u.getUint32(I)&2147483647,subsegmentDuration:u.getUint32(I+4),startsWithSap:!!(r[I+8]&128),sapType:(r[I+8]&112)>>>4,sapDeltaTime:u.getUint32(I+8)&268435455});return p(h,y)}}};k.media=function(f){var h=this;if(!f)return this.media_;
if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var m=this.state;if("string"===typeof f){if(!this.master.playlists[f])throw Error("Unknown playlist URI: "+f);f=this.master.playlists[f]}var p=!this.media_||f.id!==this.media_.id;if(p&&this.loadedPlaylists_[f.id]&&this.loadedPlaylists_[f.id].endList)this.state="HAVE_METADATA",this.media_=f,p&&(this.trigger("mediachanging"),this.trigger("mediachange"));else if(p)if(this.media_&&this.trigger("mediachanging"),
f.sidx){if(this.masterPlaylistLoader_){p=this.masterPlaylistLoader_.master;var q=this.masterPlaylistLoader_.sidxMapping_}else p=this.master,q=this.sidxMapping_;var r=$f(f.sidx);q[r]={sidxInfo:f.sidx};this.request=zj(this,f.sidx,f,this.vhs_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(f,p,m,function(u,y){if(!u||!y)throw Error("failed to request sidx");q[r].sidx=y;h.haveMetadata({startingState:m,playlist:u.playlists[f.id]})}))}else this.mediaRequest_=G.setTimeout(this.haveMetadata.bind(this,
{startingState:m,playlist:f}),0)};k.haveMetadata=function(f){var h=f.startingState;f=f.playlist;this.state="HAVE_METADATA";this.loadedPlaylists_[f.id]=f;this.mediaRequest_=null;this.refreshMedia_(f.id);"HAVE_MASTER"===h?this.trigger("loadedmetadata"):this.trigger("mediachange")};k.pause=function(){this.stopRequest();G.clearTimeout(this.mediaUpdateTimeout);G.clearTimeout(this.minimumUpdatePeriodTimeout_);"HAVE_NOTHING"===this.state&&(this.started=!1)};k.load=function(f){var h=this;G.clearTimeout(this.mediaUpdateTimeout);
G.clearTimeout(this.minimumUpdatePeriodTimeout_);var m=this.media();f?this.mediaUpdateTimeout=G.setTimeout(function(){return h.load()},m?m.targetDuration/2*1E3:5E3):this.started?m&&!m.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()};k.start=function(){var f=this;this.started=!0;this.masterPlaylistLoader_?this.mediaRequest_=G.setTimeout(this.haveMaster_.bind(this),0):this.request=this.vhs_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(h,
m){if(f.request){f.request=null;if(h)return f.error={status:m.status,message:"DASH playlist request error at URL: "+f.srcUrl,responseText:m.responseText,code:2},"HAVE_NOTHING"===f.state&&(f.started=!1),f.trigger("error");f.masterXml_=m.responseText;f.masterLoaded_=m.responseHeaders&&m.responseHeaders.date?Date.parse(m.responseHeaders.date):Date.now();f.srcUrl=ee(f.handleManifestRedirects,f.srcUrl,m);f.syncClientServerClock_(f.onClientServerClockSync_.bind(f))}})};k.syncClientServerClock_=function(f){var h=
this,m=um(Si(this.masterXml_));if(null===m)return this.clientOffset_=this.masterLoaded_-Date.now(),f();if("DIRECT"===m.method)return this.clientOffset_=m.value-Date.now(),f();this.request=this.vhs_.xhr({uri:Ib(this.srcUrl,m.value),method:m.method,withCredentials:this.withCredentials},function(p,q){if(h.request){if(p)return h.clientOffset_=h.masterLoaded_-Date.now(),f();p="HEAD"===m.method?q.responseHeaders&&q.responseHeaders.date?Date.parse(q.responseHeaders.date):h.masterLoaded_:Date.parse(q.responseText);
h.clientOffset_=p-Date.now();f()}})};k.haveMaster_=function(){this.state="HAVE_MASTER";this.mediaRequest_=null;this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.updateMainManifest_(ie({masterXml:this.masterXml_,srcUrl:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_})),this.trigger("loadedplaylist"))};k.updateMinimumUpdatePeriodTimeout_=function(){var f=this;G.clearTimeout(this.minimumUpdatePeriodTimeout_);var h=function(p){f.minimumUpdatePeriodTimeout_=
G.setTimeout(function(){f.trigger("minimumUpdatePeriod")},p)},m=this.master&&this.master.minimumUpdatePeriod;if(0<m)h(m);else if(0===m)if(this.media())h(1E3*this.media().targetDuration);else this.one("loadedplaylist",function(){h(1E3*f.media().targetDuration)})};k.onClientServerClockSync_=function(){this.haveMaster_();this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]);this.updateMinimumUpdatePeriodTimeout_()};k.updateMainManifest_=function(f){this.master=f;this.master.locations&&
this.master.locations.length&&(f=this.master.locations[0],f!==this.srcUrl&&(this.srcUrl=f))};k.refreshXml_=function(){var f=this;this.request=this.vhs_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(h,m){if(f.request){f.request=null;if(h)return f.error={status:m.status,message:"DASH playlist request error at URL: "+f.srcUrl,responseText:m.responseText,code:2},"HAVE_NOTHING"===f.state&&(f.started=!1),f.trigger("error");f.masterXml_=m.responseText;f.sidxMapping_=an(f.masterXml_,
f.srcUrl,f.clientOffset_,f.sidxMapping_);h=ie({masterXml:f.masterXml_,srcUrl:f.srcUrl,clientOffset:f.clientOffset_,sidxMapping:f.sidxMapping_});m=xj(f.master,h);var p=f.media().sidx;if(m)if(p){var q=$f(p);f.sidxMapping_[q]||(m=f.media(),f.request=zj(f,m.sidx,m,f.vhs_.xhr,{handleManifestRedirects:f.handleManifestRedirects},f.sidxRequestFinished_(m,h,f.state,function(r,u){if(!r||!u)throw Error("failed to request sidx on minimumUpdatePeriod");f.sidxMapping_[q].sidx=u;f.updateMinimumUpdatePeriodTimeout_();
f.refreshMedia_(f.media().id)})))}else f.updateMainManifest_(m),f.media_&&(f.media_=f.master.playlists[f.media_.id]);f.updateMinimumUpdatePeriodTimeout_()}})};k.refreshMedia_=function(f){var h=this;if(!f)throw Error("refreshMedia_ must take a media id");if(this.masterPlaylistLoader_){var m=this.masterPlaylistLoader_.master;var p=ie({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_})}else m=
this.master,p=ie({masterXml:this.masterXml_,srcUrl:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});(p=xj(m,p))?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=p:this.master=p,this.media_=p.playlists[f]):(this.media_=m.playlists[f],this.trigger("playlistunchanged"));this.media().endList||(this.mediaUpdateTimeout=G.setTimeout(function(){h.trigger("mediaupdatetimeout")},ij(this.media(),!!p)));this.trigger("loadedplaylist")};return l}(K.EventTarget),hb={GOAL_BUFFER_LENGTH:30,
MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Aj=function(g){for(var l=new Uint8Array(new ArrayBuffer(g.length)),k=0;k<g.length;k++)l[k]=g.charCodeAt(k);return l.buffer},qd=[],Db,Cj=function(g){var l=g.transmuxer,k=g.bytes,f=g.audioAppendStart,h=g.gopsToAlignWith,m=g.isPartial,p=g.remux,q=g.onData,r=g.onTrackInfo,u=g.onAudioTimingInfo,y=g.onVideoTimingInfo,
B=g.onVideoSegmentTimingInfo,I=g.onId3,M=g.onCaptions,L=g.onDone,S={isPartial:m,buffer:[]};l.onmessage=function(P){if(Db){if("data"===P.data.action){var T=P.data.segment,ca=T.type,da=T.initSegment,na=T.videoFrameDtsTime,W=T.videoFramePtsTime;S.buffer.push({captions:T.captions,captionStreams:T.captionStreams,metadata:T.metadata});T=P.data.segment.boxes||{data:P.data.segment.data};ca={type:ca,data:new Uint8Array(T.data,T.data.byteOffset,T.data.byteLength),initSegment:new Uint8Array(da.data,da.byteOffset,
da.byteLength)};"undefined"!==typeof na&&(ca.videoFrameDtsTime=na);"undefined"!==typeof W&&(ca.videoFramePtsTime=W);q(ca)}"trackinfo"===P.data.action&&r(P.data.trackInfo);"gopInfo"===P.data.action&&(S.gopInfo=P.data.gopInfo);"audioTimingInfo"===P.data.action&&u(P.data.audioTimingInfo);"videoTimingInfo"===P.data.action&&y(P.data.videoTimingInfo);"videoSegmentTimingInfo"===P.data.action&&B(P.data.videoSegmentTimingInfo);"id3Frame"===P.data.action&&I([P.data.id3Frame],P.data.id3Frame.dispatchType);"caption"===
P.data.action&&M(P.data.caption);"transmuxed"===P.data.type&&(l.onmessage=null,S.buffer=[],L(S),Bj())}};f&&l.postMessage({action:"setAudioAppendStart",appendStart:f});Array.isArray(h)&&l.postMessage({action:"alignGopsWith",gopsToAlignWith:h});"undefined"!==typeof p&&l.postMessage({action:"setRemux",remux:p});k.byteLength&&(g=k instanceof ArrayBuffer?k:k.buffer,l.postMessage({action:"push",data:g,byteOffset:k instanceof ArrayBuffer?0:k.byteOffset,byteLength:k.byteLength},[g]));l.postMessage({action:m?
"partialFlush":"flush"})},Bj=function(){Db=null;qd.length&&(Db=qd.shift(),"function"===typeof Db?Db():Cj(Db))},Dj=function(g,l){g.postMessage({action:l});Bj()},Ej=function(g,l){Db?qd.push(Dj.bind(null,l,g)):(Db=g,Dj(l,g))},Fj=function(g){Db?qd.push(g):(Db=g,Cj(g))},je={reset:function(g){Ej("reset",g)},dispose:function(){Db=null;qd.length=0},endTimeline:function(g){Ej("endTimeline",g)},transmux:Fj},bn=function(g,l){g=Cm.inspect(g,9E4*l);if(!g)return null;l={hasVideo:g.video&&2===g.video.length||!1,
hasAudio:g.audio&&2===g.audio.length||!1};l.hasVideo&&(l.videoStart=g.video[0].ptsTime);l.hasAudio&&(l.audioStart=g.audio[0].ptsTime);return l},cn=function(g){var l=0;if(g.bytes){var k=new Uint8Array(g.bytes);g.segments.forEach(function(f){k.set(f,l);l+=f.byteLength})}return k},Gj=function(g){g.forEach(function(l){l.abort()})},bg=function(g,l){return l.timedout?{status:l.status,message:"HLS request timed-out at URL: "+l.uri,code:-101,xhr:l}:l.aborted?{status:l.status,message:"HLS request aborted at URL: "+
l.uri,code:-102,xhr:l}:g?{status:l.status,message:"HLS request errored at URL: "+l.uri,code:2,xhr:l}:null},dn=function(g,l){return function(k,f){var h=f.response;if(k=bg(k,f))return l(k,g);if(16!==h.byteLength)return l({status:f.status,message:"Invalid HLS key at URL: "+f.uri,code:2,xhr:f},g);f=new DataView(h);g.key.bytes=new Uint32Array([f.getUint32(0),f.getUint32(4),f.getUint32(8),f.getUint32(12)]);return l(null,g)}},en=function(g){var l=g.segment,k=g.finishProcessingFn;return function(f,h){var m=
h.response;if(f=bg(f,h))return k(f,l);if(0===m.byteLength)return k({status:h.status,message:"Empty HLS segment content at URL: "+h.uri,code:2,xhr:h},l);l.map.bytes=new Uint8Array(h.response);m=Pf(l.map.bytes);if("mp4"!==m)return k({status:h.status,message:"Found unsupported "+(m||"unknown")+" container for initialization segment at URL: "+h.uri,code:2,internal:!0,xhr:h},l);aj.tracks(l.map.bytes).forEach(function(p){l.map.tracks=l.map.tracks||{};l.map.tracks[p.type]||(l.map.tracks[p.type]=p,p.id&&
p.timescale&&(l.map.timescales=l.map.timescales||{},l.map.timescales[p.id]=p.timescale))});return k(null,l)}},fn=function(g){var l=g.segment,k=g.finishProcessingFn,f=g.responseType;return function(h,m){var p=m.response;if(h=bg(h,m))return k(h,l);h="arraybuffer"!==f&&m.responseText?Aj(m.responseText.substring(l.lastReachedChar||0)):m.response;if(0===p.byteLength)return k({status:m.status,message:"Empty HLS segment content at URL: "+m.uri,code:2,xhr:m},l);l.stats={bandwidth:m.bandwidth,bytesReceived:m.bytesReceived||
0,roundTripTime:m.roundTripTime||0};l.key?l.encryptedBytes=new Uint8Array(h):l.bytes=new Uint8Array(h);return k(null,l)}},gn=function(g){var l=g.segment,k=g.bytes,f=g.isPartial,h=g.trackInfoFn,m=g.timingInfoFn,p=g.videoSegmentTimingInfoFn,q=g.id3Fn,r=g.captionsFn,u=g.dataFn,y=g.doneFn;g=l.map&&l.map.tracks||{};var B=!(!g.audio||!g.video),I=m.bind(null,l,"audio","start"),M=m.bind(null,l,"audio","end"),L=m.bind(null,l,"video","start"),S=m.bind(null,l,"video","end");f||l.lastReachedChar||!(m=bn(k,l.baseStartTime))||
(h(l,{hasAudio:m.hasAudio,hasVideo:m.hasVideo,isMuxed:B}),h=null,m.hasAudio&&!B&&I(m.audioStart),m.hasVideo&&L(m.videoStart),L=I=null);Fj({bytes:k,transmuxer:l.transmuxer,audioAppendStart:l.audioAppendStart,gopsToAlignWith:l.gopsToAlignWith,isPartial:f,remux:B,onData:function(P){P.type="combined"===P.type?"video":P.type;u(l,P)},onTrackInfo:function(P){h&&(B&&(P.isMuxed=!0),h(l,P))},onAudioTimingInfo:function(P){I&&"undefined"!==typeof P.start&&(I(P.start),I=null);M&&"undefined"!==typeof P.end&&M(P.end)},
onVideoTimingInfo:function(P){L&&"undefined"!==typeof P.start&&(L(P.start),L=null);S&&"undefined"!==typeof P.end&&S(P.end)},onVideoSegmentTimingInfo:function(P){p(P)},onId3:function(P,T){q(l,P,T)},onCaptions:function(P){r(l,[P])},onDone:function(P){y&&!f&&(P.type="combined"===P.type?"video":P.type,y(null,l,P))}})},cg=function(g){var l=g.segment,k=g.bytes,f=g.isPartial,h=g.trackInfoFn,m=g.timingInfoFn,p=g.videoSegmentTimingInfoFn,q=g.id3Fn,r=g.captionsFn,u=g.dataFn,y=g.doneFn;g=new Uint8Array(k);if(Ui(g)){l.isFmp4=
!0;f=l.map.tracks;var B={isFmp4:!0,hasVideo:!!f.video,hasAudio:!!f.audio};f.audio&&f.audio.codec&&"enca"!==f.audio.codec&&(B.audioCodec=f.audio.codec);f.video&&f.video.codec&&"encv"!==f.video.codec&&(B.videoCodec=f.video.codec);f.video&&f.audio&&(B.isMuxed=!0);h(l,B);h=aj.startTime(l.map.timescales,g);B.hasAudio&&!B.isMuxed&&m(l,"audio","start",h);B.hasVideo&&m(l,"video","start",h);var I=function(M){u(l,{data:k,type:B.hasAudio&&!B.isMuxed?"audio":"video"});M&&M.length&&r(l,M);y(null,l,{})};f.video&&
k.byteLength&&l.transmuxer?(m=k instanceof ArrayBuffer?k:k.buffer,h=k instanceof ArrayBuffer?0:k.byteOffset,l.transmuxer.addEventListener("message",function S(L){if("mp4Captions"===L.data.action){l.transmuxer.removeEventListener("message",S);var P=L.data.data;l.bytes=k=new Uint8Array(P,P.byteOffset||0,P.byteLength);I(L.data.captions)}}),l.transmuxer.postMessage({action:"pushMp4Captions",timescales:l.map.timescales,trackIds:[f.video.id],data:m,byteOffset:h,byteLength:k.byteLength},[m])):I()}else l.transmuxer?
("undefined"===typeof l.container&&(l.container=Pf(g)),"ts"!==l.container&&"aac"!==l.container?(h(l,{hasAudio:!1,hasVideo:!1}),y(null,l,{})):gn({segment:l,bytes:k,isPartial:f,trackInfoFn:h,timingInfoFn:m,videoSegmentTimingInfoFn:p,id3Fn:q,captionsFn:r,dataFn:u,doneFn:y})):y(null,l,{})},hn=function(g){var l=g.decryptionWorker,k=g.segment,f=g.trackInfoFn,h=g.timingInfoFn,m=g.videoSegmentTimingInfoFn,p=g.id3Fn,q=g.captionsFn,r=g.dataFn,u=g.doneFn;l.addEventListener("message",function I(B){B.data.source===
k.requestId&&(l.removeEventListener("message",I),B=B.data.decrypted,k.bytes=new Uint8Array(B.bytes,B.byteOffset,B.byteLength),cg({segment:k,bytes:k.bytes,isPartial:!1,trackInfoFn:f,timingInfoFn:h,videoSegmentTimingInfoFn:m,id3Fn:p,captionsFn:q,dataFn:r,doneFn:u}))});g=k.key.bytes.slice?k.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(k.key.bytes));l.postMessage(tj({source:k.requestId,encrypted:k.encryptedBytes,key:g,iv:k.key.iv}),[k.encryptedBytes.buffer,g.buffer])},jn=function(g){var l=
g.activeXhrs,k=g.decryptionWorker,f=g.trackInfoFn,h=g.timingInfoFn,m=g.videoSegmentTimingInfoFn,p=g.id3Fn,q=g.captionsFn,r=g.dataFn,u=g.doneFn,y=0,B=!1;return function(I,M){if(!B){if(I)return B=!0,Gj(l),u(I,M);y+=1;if(y===l.length){M.endOfAllRequests=Date.now();if(M.encryptedBytes)return hn({decryptionWorker:k,segment:M,trackInfoFn:f,timingInfoFn:h,videoSegmentTimingInfoFn:m,id3Fn:p,captionsFn:q,dataFn:r,doneFn:u});cg({segment:M,bytes:M.bytes,isPartial:!1,trackInfoFn:f,timingInfoFn:h,videoSegmentTimingInfoFn:m,
id3Fn:p,captionsFn:q,dataFn:r,doneFn:u})}}}},kn=function(g){var l=g.loadendState,k=g.abortFn;return function(f){f.target.aborted&&k&&!l.calledAbortFn&&(k(),l.calledAbortFn=!0)}},ln=function(g){var l=g.segment,k=g.progressFn,f=g.trackInfoFn,h=g.timingInfoFn,m=g.videoSegmentTimingInfoFn,p=g.id3Fn,q=g.captionsFn,r=g.dataFn,u=g.handlePartialData;return function(y){var B=y.target;if(!B.aborted){if(u&&!l.key&&B.responseText&&8<=B.responseText.length){var I=Aj(B.responseText.substring(l.lastReachedChar||
0));if(l.lastReachedChar||!Ui(new Uint8Array(I)))l.lastReachedChar=B.responseText.length,cg({segment:l,bytes:I,isPartial:!0,trackInfoFn:f,timingInfoFn:h,videoSegmentTimingInfoFn:m,id3Fn:p,captionsFn:q,dataFn:r})}B=K.mergeOptions;I=l.stats;var M=y.target;M=Date.now()-M.requestTime;M={bandwidth:Infinity,bytesReceived:0,roundTripTime:M||0};M.bytesReceived=y.loaded;M.bandwidth=Math.floor(M.bytesReceived/M.roundTripTime*8E3);l.stats=B.call(K,I,M);!l.stats.firstBytesReceivedAt&&l.stats.bytesReceived&&(l.stats.firstBytesReceivedAt=
Date.now());return k(y,l)}}},mn=function(g){var l=g.xhr,k=g.xhrOptions,f=g.segment,h=g.abortFn,m=g.progressFn,p=g.trackInfoFn,q=g.timingInfoFn,r=g.videoSegmentTimingInfoFn,u=g.id3Fn,y=g.captionsFn,B=g.dataFn,I=g.handlePartialData,M=[];g=jn({activeXhrs:M,decryptionWorker:g.decryptionWorker,trackInfoFn:p,timingInfoFn:q,videoSegmentTimingInfoFn:r,id3Fn:u,captionsFn:y,dataFn:B,doneFn:g.doneFn});if(f.key&&!f.key.bytes){var L=K.mergeOptions(k,{uri:f.key.resolvedUri,responseType:"arraybuffer"}),S=dn(f,g);
L=l(L,S);M.push(L)}f.map&&!f.map.bytes&&(L=K.mergeOptions(k,{uri:f.map.resolvedUri,responseType:"arraybuffer",headers:Zf(f.map)}),S=en({segment:f,finishProcessingFn:g}),L=l(L,S),M.push(L));k=K.mergeOptions(k,{uri:f.resolvedUri,responseType:"arraybuffer",headers:Zf(f)});I&&(k.responseType="text",k.beforeSend=function(T){T.overrideMimeType("text/plain; charset\x3dx-user-defined")});g=fn({segment:f,finishProcessingFn:g,responseType:k.responseType});l=l(k,g);l.addEventListener("progress",ln({segment:f,
progressFn:m,trackInfoFn:p,timingInfoFn:q,videoSegmentTimingInfoFn:r,id3Fn:u,captionsFn:y,dataFn:B,handlePartialData:I}));M.push(l);var P={};M.forEach(function(T){T.addEventListener("loadend",kn({loadendState:P,abortFn:h}))});return function(){return Gj(M)}},oc="undefined"!==typeof window?window:{},We="undefined"===typeof Symbol?"__target":Symbol(),Uk=oc.BlobBuilder||oc.WebKitBlobBuilder||oc.MozBlobBuilder||oc.MSBlobBuilder,Cc=oc.URL||oc.webkitURL||Cc&&Cc.msURL,Bc=oc.Worker;if(Bc){var Hj=th("self.onmessage \x3d function () {}"),
Ij=new Uint8Array(1);try{var dg=new Bc(Hj);dg.postMessage(Ij,[Ij.buffer])}catch(g){Bc=null}finally{Cc.revokeObjectURL(Hj),dg&&dg.terminate()}}var Rn=new sh("./transmuxer-worker.worker.js",function(g,l){var k=this;(function(){var f=function(){this.init=function(){var z={};this.on=function(H,A){z[H]||(z[H]=[]);z[H]=z[H].concat(A)};this.off=function(H,A){if(!z[H])return!1;A=z[H].indexOf(A);z[H]=z[H].slice();z[H].splice(A,1);return-1<A};this.trigger=function(H){var A,x;if(A=z[H])if(2===arguments.length){var t=
A.length;for(x=0;x<t;++x)A[x].call(this,arguments[1])}else{var C=[];for(x=1;x<arguments.length;++x)C.push(arguments[x]);t=A.length;for(x=0;x<t;++x)A[x].apply(this,C)}};this.dispose=function(){z={}}}};f.prototype.pipe=function(z){this.on("data",function(H){z.push(H)});this.on("done",function(H){z.flush(H)});this.on("partialdone",function(H){z.partialFlush(H)});this.on("endedtimeline",function(H){z.endTimeline(H)});this.on("reset",function(H){z.reset(H)});return z};f.prototype.push=function(z){this.trigger("data",
z)};f.prototype.flush=function(z){this.trigger("done",z)};f.prototype.partialFlush=function(z){this.trigger("partialdone",z)};f.prototype.endTimeline=function(z){this.trigger("endedtimeline",z)};f.prototype.reset=function(z){this.trigger("reset",z)};var h=Math.pow(2,32)-1,m,p,q,r,u,y,B,I,M,L,S,P,T,ca,da,na;(function(){var z;q={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],
stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(z in q)q.hasOwnProperty(z)&&(q[z]=[z.charCodeAt(0),z.charCodeAt(1),z.charCodeAt(2),z.charCodeAt(3)]);r=new Uint8Array([105,115,111,109]);y=new Uint8Array([97,118,99,49]);u=new Uint8Array([0,0,0,1]);B=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);I=new Uint8Array([0,0,0,0,0,
0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);M={video:B,audio:I};P=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);S=new Uint8Array([0,0,0,0,0,0,0,0]);ca=T=new Uint8Array([0,0,0,0,0,0,0,0]);da=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);na=T;L=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var W=function(z){var H=[],A=0,x;for(x=1;x<arguments.length;x++)H.push(arguments[x]);for(x=H.length;x--;)A+=H[x].byteLength;var t=new Uint8Array(A+
8);(new DataView(t.buffer,t.byteOffset,t.byteLength)).setUint32(0,t.byteLength);t.set(z,4);x=0;for(A=8;x<H.length;x++)t.set(H[x],A),A+=H[x].byteLength;return t};var qa=function(){return W(q.dinf,W(q.dref,P))};var fa=function(z){return W(q.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,z.audioobjecttype<<3|z.samplingfrequencyindex>>>1,z.samplingfrequencyindex<<7|z.channelcount<<3,6,1,2]))};var ta=function(){return W(q.ftyp,r,u,r,y)};var Pa=function(z){return W(q.hdlr,
M[z])};var mb=function(z){var H=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,z.duration>>>24&255,z.duration>>>16&255,z.duration>>>8&255,z.duration&255,85,196,0,0]);z.samplerate&&(H[12]=z.samplerate>>>24&255,H[13]=z.samplerate>>>16&255,H[14]=z.samplerate>>>8&255,H[15]=z.samplerate&255);return W(q.mdhd,H)};var Oa=function(z){return W(q.mdia,mb(z),Pa(z.type),nb(z))};var cb=function(z){return W(q.mfhd,new Uint8Array([0,0,0,0,(z&4278190080)>>24,(z&16711680)>>16,(z&65280)>>8,z&255]))};var nb=function(z){return W(q.minf,
"video"===z.type?W(q.vmhd,L):W(q.smhd,S),qa(),nn(z))};var Kb=function(z){for(var H=z.length,A=[];H--;)A[H]=on(z[H]);return W.apply(null,[q.moov,eg(4294967295)].concat(A).concat(Pc(z)))};var Pc=function(z){for(var H=z.length,A=[];H--;)A[H]=pn(z[H]);return W.apply(null,[q.mvex].concat(A))};var eg=function(z){z=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(z&4278190080)>>24,(z&16711680)>>16,(z&65280)>>8,z&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return W(q.mvhd,z)};var qn=function(z){z=z.samples||[];var H=new Uint8Array(4+z.length),A;for(A=0;A<z.length;A++){var x=z[A].flags;H[A+4]=x.dependsOn<<4|x.isDependedOn<<2|x.hasRedundancy}return W(q.sdtp,H)};var nn=function(z){return W(q.stbl,m(z),W(q.stts,na),W(q.stsc,ca),W(q.stsz,da),W(q.stco,T))};(function(){m=function(A){return W(q.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===A.type?z(A):H(A))};var z=function(A){var x=
A.sps||[],t=A.pps||[],C=[],D=[],v;for(v=0;v<x.length;v++)C.push((x[v].byteLength&65280)>>>8),C.push(x[v].byteLength&255),C=C.concat(Array.prototype.slice.call(x[v]));for(v=0;v<t.length;v++)D.push((t[v].byteLength&65280)>>>8),D.push(t[v].byteLength&255),D=D.concat(Array.prototype.slice.call(t[v]));x=[q.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(A.width&65280)>>8,A.width&255,(A.height&65280)>>8,A.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,
111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),W(q.avcC,new Uint8Array([1,A.profileIdc,A.profileCompatibility,A.levelIdc,255].concat([x.length],C,[t.length],D))),W(q.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))];A.sarRatio&&(t=A.sarRatio[0],A=A.sarRatio[1],x.push(W(q.pasp,new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255,(A&4278190080)>>24,(A&16711680)>>16,(A&65280)>>8,A&255]))));return W.apply(null,x)};var H=function(A){return W(q.mp4a,
new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(A.channelcount&65280)>>8,A.channelcount&255,(A.samplesize&65280)>>8,A.samplesize&255,0,0,0,0,(A.samplerate&65280)>>8,A.samplerate&255,0,0]),fa(A))}})();var rn=function(z){z=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(z.id&4278190080)>>24,(z.id&16711680)>>16,(z.id&65280)>>8,z.id&255,0,0,0,0,(z.duration&4278190080)>>24,(z.duration&16711680)>>16,(z.duration&65280)>>8,z.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(z.width&65280)>>8,z.width&255,0,0,(z.height&65280)>>8,z.height&255,0,0]);return W(q.tkhd,z)};var sn=function(z){var H=W(q.tfhd,new Uint8Array([0,0,0,58,(z.id&4278190080)>>24,(z.id&16711680)>>16,(z.id&65280)>>8,z.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var A=Math.floor(z.baseMediaDecodeTime/(h+1));var x=Math.floor(z.baseMediaDecodeTime%(h+1));A=W(q.tfdt,new Uint8Array([1,0,0,0,A>>>24&255,A>>>16&255,A>>>8&255,A&255,x>>>24&255,x>>>16&255,x>>>8&255,x&255]));if("audio"===
z.type)return z=p(z,92),W(q.traf,H,A,z);x=qn(z);z=p(z,x.length+92);return W(q.traf,H,A,z,x)};var on=function(z){z.duration=z.duration||4294967295;return W(q.trak,rn(z),Oa(z))};var pn=function(z){var H=new Uint8Array([0,0,0,0,(z.id&4278190080)>>24,(z.id&16711680)>>16,(z.id&65280)>>8,z.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==z.type&&(H[H.length-1]=0);return W(q.trex,H)};(function(){var z=function(x,t){var C=0,D=0,v=0,F=0;x.length&&(void 0!==x[0].duration&&(C=1),void 0!==x[0].size&&(D=2),
void 0!==x[0].flags&&(v=4),void 0!==x[0].compositionTimeOffset&&(F=8));return[0,0,C|D|v|F,1,(x.length&4278190080)>>>24,(x.length&16711680)>>>16,(x.length&65280)>>>8,x.length&255,(t&4278190080)>>>24,(t&16711680)>>>16,(t&65280)>>>8,t&255]};var H=function(x,t){var C;x=x.samples||[];t+=20+16*x.length;var D=z(x,t);t=new Uint8Array(D.length+16*x.length);t.set(D);D=D.length;for(C=0;C<x.length;C++){var v=x[C];t[D++]=(v.duration&4278190080)>>>24;t[D++]=(v.duration&16711680)>>>16;t[D++]=(v.duration&65280)>>>
8;t[D++]=v.duration&255;t[D++]=(v.size&4278190080)>>>24;t[D++]=(v.size&16711680)>>>16;t[D++]=(v.size&65280)>>>8;t[D++]=v.size&255;t[D++]=v.flags.isLeading<<2|v.flags.dependsOn;t[D++]=v.flags.isDependedOn<<6|v.flags.hasRedundancy<<4|v.flags.paddingValue<<1|v.flags.isNonSyncSample;t[D++]=v.flags.degradationPriority&61440;t[D++]=v.flags.degradationPriority&15;t[D++]=(v.compositionTimeOffset&4278190080)>>>24;t[D++]=(v.compositionTimeOffset&16711680)>>>16;t[D++]=(v.compositionTimeOffset&65280)>>>8;t[D++]=
v.compositionTimeOffset&255}return W(q.trun,t)};var A=function(x,t){var C;x=x.samples||[];t+=20+8*x.length;var D=z(x,t);t=new Uint8Array(D.length+8*x.length);t.set(D);D=D.length;for(C=0;C<x.length;C++){var v=x[C];t[D++]=(v.duration&4278190080)>>>24;t[D++]=(v.duration&16711680)>>>16;t[D++]=(v.duration&65280)>>>8;t[D++]=v.duration&255;t[D++]=(v.size&4278190080)>>>24;t[D++]=(v.size&16711680)>>>16;t[D++]=(v.size&65280)>>>8;t[D++]=v.size&255}return W(q.trun,t)};p=function(x,t){return"audio"===x.type?A(x,
t):H(x,t)}})();var Eb={ftyp:ta,mdat:function(z){return W(q.mdat,z)},moof:function(z,H){for(var A=[],x=H.length;x--;)A[x]=sn(H[x]);return W.apply(null,[q.moof,cb(z)].concat(A))},moov:Kb,initSegment:function(z){var H=ta();z=Kb(z);var A=new Uint8Array(H.byteLength+z.byteLength);A.set(H);A.set(z,H.byteLength);return A}},Jj=function(z,H){var A={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};A.dataOffset=H;A.compositionTimeOffset=z.pts-z.dts;
A.duration=z.duration;A.size=4*z.length;A.size+=z.byteLength;z.keyFrame&&(A.flags.dependsOn=2,A.flags.isNonSyncSample=0);return A},Lb={groupNalsIntoFrames:function(z){var H,A=[],x=[];x.byteLength=0;x.nalCount=0;x.duration=0;for(H=A.byteLength=0;H<z.length;H++){var t=z[H];"access_unit_delimiter_rbsp"===t.nalUnitType?(A.length&&(A.duration=t.dts-A.dts,x.byteLength+=A.byteLength,x.nalCount+=A.length,x.duration+=A.duration,x.push(A)),A=[t],A.byteLength=t.data.byteLength,A.pts=t.pts,A.dts=t.dts):("slice_layer_without_partitioning_rbsp_idr"===
t.nalUnitType&&(A.keyFrame=!0),A.duration=t.dts-A.dts,A.byteLength+=t.data.byteLength,A.push(t))}x.length&&(!A.duration||0>=A.duration)&&(A.duration=x[x.length-1].duration);x.byteLength+=A.byteLength;x.nalCount+=A.length;x.duration+=A.duration;x.push(A);return x},groupFramesIntoGops:function(z){var H,A=[],x=[];A.byteLength=0;A.nalCount=0;A.duration=0;A.pts=z[0].pts;A.dts=z[0].dts;x.byteLength=0;x.nalCount=0;x.duration=0;x.pts=z[0].pts;x.dts=z[0].dts;for(H=0;H<z.length;H++){var t=z[H];t.keyFrame?(A.length&&
(x.push(A),x.byteLength+=A.byteLength,x.nalCount+=A.nalCount,x.duration+=A.duration),A=[t],A.nalCount=t.length,A.byteLength=t.byteLength,A.pts=t.pts,A.dts=t.dts,A.duration=t.duration):(A.duration+=t.duration,A.nalCount+=t.length,A.byteLength+=t.byteLength,A.push(t))}x.length&&0>=A.duration&&(A.duration=x[x.length-1].duration);x.byteLength+=A.byteLength;x.nalCount+=A.nalCount;x.duration+=A.duration;x.push(A);return x},extendFirstKeyFrame:function(z){if(!z[0][0].keyFrame&&1<z.length){var H=z.shift();
z.byteLength-=H.byteLength;z.nalCount-=H.nalCount;z[0][0].dts=H.dts;z[0][0].pts=H.pts;z[0][0].duration+=H.duration}return z},generateSampleTable:function(z,H){var A,x=H||0,t=[];for(H=0;H<z.length;H++){var C=z[H];for(A=0;A<C.length;A++){var D=C[A];D=Jj(D,x);x+=D.size;t.push(D)}}return t},concatenateNalData:function(z){var H,A,x,t=0,C=new Uint8Array(z.byteLength+4*z.nalCount),D=new DataView(C.buffer);for(H=0;H<z.length;H++){var v=z[H];for(A=0;A<v.length;A++){var F=v[A];for(x=0;x<F.length;x++){var w=
F[x];D.setUint32(t,w.data.byteLength);t+=4;C.set(w.data,t);t+=w.data.byteLength}}}return C},generateSampleTableForFrame:function(z,H){var A=[];z=Jj(z,H||0);A.push(z);return A},concatenateNalDataForFrame:function(z){var H,A=0,x=new Uint8Array(z.byteLength+4*z.length),t=new DataView(x.buffer);for(H=0;H<z.length;H++){var C=z[H];t.setUint32(A,C.data.byteLength);A+=4;x.set(C.data,A);A+=C.data.byteLength}return x}},bc=[33,16,5,32,164,27],fg=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ua=function(z){for(var H=
[];z--;)H.push(0);return H},tn=function(z){return Object.keys(z).reduce(function(H,A){H[A]=new Uint8Array(z[A].reduce(function(x,t){return x.concat(t)},[]));return H},{})},gg;var Kj=function(z){return 9E4*z};var Lj=function(z,H){return z*H};var hg=function(z){return z/9E4};var Mj=function(z,H){return z/H};var Ta={ONE_SECOND_IN_TS:9E4,secondsToVideoTs:Kj,secondsToAudioTs:Lj,videoTsToSeconds:hg,audioTsToSeconds:Mj,audioTsToVideoTs:function(z,H){return Kj(Mj(z,H))},videoTsToAudioTs:function(z,H){return Lj(hg(z),
H)},metadataTsToSeconds:function(z,H,A){return hg(A?z:z-H)}},Nj=Ta.secondsToVideoTs,Ua=Ta.videoTsToSeconds,cc={prefixWithSilence:function(z,H,A,x){var t,C=t=0;if(H.length){var D=Ta.audioTsToVideoTs(z.baseMediaDecodeTime,z.samplerate);var v=Math.ceil(Ta.ONE_SECOND_IN_TS/(z.samplerate/1024));A&&x&&(t=D-Math.max(A,x),t=Math.floor(t/v),C=t*v);if(!(1>t||C>Ta.ONE_SECOND_IN_TS/2)){gg||(A={96E3:[bc,[227,64],ua(154),[56]],88200:[bc,[231],ua(170),[56]],64E3:[bc,[248,192],ua(240),[56]],48E3:[bc,[255,192],ua(268),
[55,148,128],ua(54),[112]],44100:[bc,[255,192],ua(268),[55,163,128],ua(84),[112]],32E3:[bc,[255,192],ua(268),[55,234],ua(226),[112]],24E3:[bc,[255,192],ua(268),[55,255,128],ua(268),[111,112],ua(126),[224]],16E3:[bc,[255,192],ua(268),[55,255,128],ua(268),[111,255],ua(269),[223,108],ua(195),[1,192]],12E3:[fg,ua(268),[3,127,248],ua(268),[6,255,240],ua(268),[13,255,224],ua(268),[27,253,128],ua(259),[56]],11025:[fg,ua(268),[3,127,248],ua(268),[6,255,240],ua(268),[13,255,224],ua(268),[27,255,192],ua(268),
[55,175,128],ua(108),[112]],8E3:[fg,ua(268),[3,121,16],ua(47),[7]]},gg=tn(A));A=gg[z.samplerate];A||(A=H[0].data);for(x=0;x<t;x++)D=H[0],H.splice(0,0,{data:A,dts:D.dts-v,pts:D.pts-v});z.baseMediaDecodeTime-=Math.floor(Ta.videoTsToAudioTs(C,z.samplerate))}}},trimAdtsFramesByEarliestDts:function(z,H,A){if(H.minSegmentDts>=A)return z;H.minSegmentDts=Infinity;return z.filter(function(x){return x.dts>=A?(H.minSegmentDts=Math.min(H.minSegmentDts,x.dts),H.minSegmentPts=H.minSegmentDts,!0):!1})},generateSampleTable:function(z){var H,
A=[];for(H=0;H<z.length;H++){var x=z[H];A.push({size:x.data.byteLength,duration:1024})}return A},concatenateFrameData:function(z){var H,A=0;var x=Uint8Array;var t=0;for(H=0;H<z.length;H++){var C=z[H];t+=C.data.byteLength}C=new x(t);for(x=0;x<z.length;x++)H=z[x],C.set(H.data,A),A+=H.data.byteLength;return C}},un=Ta.ONE_SECOND_IN_TS,Da={clearDtsInfo:function(z){delete z.minSegmentDts;delete z.maxSegmentDts;delete z.minSegmentPts;delete z.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(z,H){var A=
z.minSegmentDts;H||(A-=z.timelineStartInfo.dts);H=z.timelineStartInfo.baseMediaDecodeTime;H=Math.max(0,H+A);"audio"===z.type&&(z=z.samplerate/un,H=Math.floor(H*z));return H},collectDtsInfo:function(z,H){"number"===typeof H.pts&&(void 0===z.timelineStartInfo.pts&&(z.timelineStartInfo.pts=H.pts),z.minSegmentPts=void 0===z.minSegmentPts?H.pts:Math.min(z.minSegmentPts,H.pts),z.maxSegmentPts=void 0===z.maxSegmentPts?H.pts:Math.max(z.maxSegmentPts,H.pts));"number"===typeof H.dts&&(void 0===z.timelineStartInfo.dts&&
(z.timelineStartInfo.dts=H.dts),z.minSegmentDts=void 0===z.minSegmentDts?H.dts:Math.min(z.minSegmentDts,H.dts),z.maxSegmentDts=void 0===z.maxSegmentDts?H.dts:Math.max(z.maxSegmentDts,H.dts))}},rd={parseSei:function(z){for(var H=0,A={payloadType:-1,payloadSize:0},x=0,t=0;H<z.byteLength&&128!==z[H];){for(;255===z[H];)x+=255,H++;for(x+=z[H++];255===z[H];)t+=255,H++;t+=z[H++];if(!A.payload&&4===x)if("GA94"===String.fromCharCode(z[H+3],z[H+4],z[H+5],z[H+6])){A.payloadType=x;A.payloadSize=t;A.payload=z.subarray(H,
H+t);break}else A.payload=void 0;H+=t;t=x=0}return A},parseUserData:function(z){return 181!==z.payload[0]||49!==(z.payload[1]<<8|z.payload[2])||"GA94"!==String.fromCharCode(z.payload[3],z.payload[4],z.payload[5],z.payload[6])||3!==z.payload[7]?null:z.payload.subarray(8,z.payload.length-1)},parseCaptionPackets:function(z,H){var A=[],x;if(!(H[0]&64))return A;var t=H[0]&31;for(x=0;x<t;x++){var C=3*x;var D={type:H[C+2]&3,pts:z};H[C+2]&4&&(D.ccData=H[C+3]<<8|H[C+4],A.push(D))}return A},discardEmulationPreventionBytes:function(z){for(var H=
z.byteLength,A=[],x=1,t;x<H-2;)0===z[x]&&0===z[x+1]&&3===z[x+2]?(A.push(x+2),x+=2):x++;if(0===A.length)return z;H-=A.length;t=new Uint8Array(H);var C=0;for(x=0;x<H;C++,x++)C===A[0]&&(C++,A.shift()),t[x]=z[C];return t},USER_DATA_REGISTERED_ITU_T_T35:4},ob=function H(){H.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new za(0,0),new za(0,1),new za(1,0),new za(1,1)];this.reset();this.ccStreams_.forEach(function(A){A.on("data",this.trigger.bind(this,"data"));A.on("partialdone",this.trigger.bind(this,
"partialdone"));A.on("done",this.trigger.bind(this,"done"))},this)};ob.prototype=new f;ob.prototype.push=function(H){if("sei_rbsp"===H.nalUnitType){var A=rd.parseSei(H.escapedRBSP);A.payloadType===rd.USER_DATA_REGISTERED_ITU_T_T35&&(A=rd.parseUserData(A))&&(H.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:H.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(A=rd.parseCaptionPackets(H.pts,A),this.captionPackets_=this.captionPackets_.concat(A),
this.latestDts_!==H.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=H.dts))}};ob.prototype.flushCCStreams=function(H){this.ccStreams_.forEach(function(A){return"flush"===H?A.flush():A.partialFlush()},this)};ob.prototype.flushStream=function(H){this.captionPackets_.length&&(this.captionPackets_.forEach(function(A,x){A.presortIndex=x}),this.captionPackets_.sort(function(A,x){return A.pts===x.pts?A.presortIndex-x.presortIndex:A.pts-x.pts}),this.captionPackets_.forEach(function(A){2>A.type&&
this.dispatchCea608Packet(A)},this),this.captionPackets_.length=0);this.flushCCStreams(H)};ob.prototype.flush=function(){return this.flushStream("flush")};ob.prototype.partialFlush=function(){return this.flushStream("partialFlush")};ob.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(H){H.reset()})};ob.prototype.dispatchCea608Packet=function(H){this.setsTextOrXDSActive(H)?this.activeCea608Channel_[H.type]=
null:this.setsChannel1Active(H)?this.activeCea608Channel_[H.type]=0:this.setsChannel2Active(H)&&(this.activeCea608Channel_[H.type]=1);null!==this.activeCea608Channel_[H.type]&&this.ccStreams_[(H.type<<1)+this.activeCea608Channel_[H.type]].push(H)};ob.prototype.setsChannel1Active=function(H){return 4096===(H.ccData&30720)};ob.prototype.setsChannel2Active=function(H){return 6144===(H.ccData&30720)};ob.prototype.setsTextOrXDSActive=function(H){return 256===(H.ccData&28928)||4138===(H.ccData&30974)||
6186===(H.ccData&30974)};var vn={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,
801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ke=function(H){if(null===H)return"";H=vn[H]||H;return String.fromCharCode(H)},wn=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],pc=function(){for(var H=[],A=15;A--;)H.push("");return H},za=function t(A,x){t.prototype.init.call(this);
this.field_=A||0;this.dataChannel_=x||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(C){var D=C.ccData&32639;if(D===this.lastControlCode_)this.lastControlCode_=null;else{4096===(D&61440)?this.lastControlCode_=D:D!==this.PADDING_&&(this.lastControlCode_=null);var v=D>>>8;var F=D&255;D!==this.PADDING_&&(D===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":D===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(C.pts),this.flushDisplayed(C.pts),
F=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=F,this.startPts_=C.pts):D===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(C.pts)):D===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(C.pts)):D===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(C.pts)):D===this.CARRIAGE_RETURN_?(this.clearFormatting(C.pts),this.flushDisplayed(C.pts),this.shiftRowsUp_(),this.startPts_=C.pts):D===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,
-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):D===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(C.pts),this.displayed_=pc()):D===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=pc():D===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(C.pts),this.displayed_=pc()),this.mode_="paintOn",this.startPts_=C.pts):this.isSpecialCharacter(v,F)?(D=ke((v&3)<<8|F),this[this.mode_](C.pts,D),this.column_++):this.isExtCharacter(v,F)?("popOn"===this.mode_?
this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),D=ke((v&3)<<8|F),this[this.mode_](C.pts,D),this.column_++):this.isMidRowCode(v,F)?(this.clearFormatting(C.pts),this[this.mode_](C.pts," "),this.column_++,14===(F&14)&&this.addFormatting(C.pts,["i"]),1===(F&1)&&this.addFormatting(C.pts,["u"])):this.isOffsetControlCode(v,F)?this.column_+=F&3:this.isPAC(v,F)?(v=wn.indexOf(D&7968),"rollUp"===this.mode_&&(0>v-this.rollUpRows_+
1&&(v=this.rollUpRows_-1),this.setRollUp(C.pts,v)),v!==this.row_&&(this.clearFormatting(C.pts),this.row_=v),F&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(C.pts,["u"]),16===(D&16)&&(this.column_=4*((D&14)>>1)),this.isColorPAC(F)&&14===(F&14)&&this.addFormatting(C.pts,["i"])):this.isNormalChar(v)&&(0===F&&(F=null),D=ke(v),D+=ke(F),this[this.mode_](C.pts,D),this.column_+=D.length))}}};za.prototype=new f;za.prototype.flushDisplayed=function(A){var x=this.displayed_.map(function(t){try{return t.trim()}catch(C){return console.error("Skipping malformed caption."),
""}}).join("\n").replace(/^\n+|\n+$/g,"");x.length&&this.trigger("data",{startPts:this.startPts_,endPts:A,text:x,stream:this.name_})};za.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=pc();this.nonDisplayed_=pc();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};za.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&
(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|
46};za.prototype.isSpecialCharacter=function(A,x){return A===this.EXT_&&48<=x&&63>=x};za.prototype.isExtCharacter=function(A,x){return(A===this.EXT_+1||A===this.EXT_+2)&&32<=x&&63>=x};za.prototype.isMidRowCode=function(A,x){return A===this.EXT_&&32<=x&&47>=x};za.prototype.isOffsetControlCode=function(A,x){return A===this.OFFSET_&&33<=x&&35>=x};za.prototype.isPAC=function(A,x){return A>=this.BASE_&&A<this.BASE_+8&&64<=x&&127>=x};za.prototype.isColorPAC=function(A){return 64<=A&&79>=A||96<=A&&127>=
A};za.prototype.isNormalChar=function(A){return 32<=A&&127>=A};za.prototype.setRollUp=function(A,x){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(A),this.nonDisplayed_=pc(),this.displayed_=pc());if(void 0!==x&&x!==this.row_)for(A=0;A<this.rollUpRows_;A++)this.displayed_[x-A]=this.displayed_[this.row_-A],this.displayed_[this.row_-A]="";void 0===x&&(x=this.row_);this.topRow_=x-this.rollUpRows_+1};za.prototype.addFormatting=function(A,x){this.formatting_=this.formatting_.concat(x);
x=x.reduce(function(t,C){return t+"\x3c"+C+"\x3e"},"");this[this.mode_](A,x)};za.prototype.clearFormatting=function(A){if(this.formatting_.length){var x=this.formatting_.reverse().reduce(function(t,C){return t+"\x3c/"+C+"\x3e"},"");this.formatting_=[];this[this.mode_](A,x)}};za.prototype.popOn=function(A,x){this.nonDisplayed_[this.row_]+=x};za.prototype.rollUp=function(A,x){this.displayed_[this.row_]+=x};za.prototype.shiftRowsUp_=function(){var A;for(A=0;A<this.topRow_;A++)this.displayed_[A]="";for(A=
this.row_+1;15>A;A++)this.displayed_[A]="";for(A=this.topRow_;A<this.row_;A++)this.displayed_[A]=this.displayed_[A+1];this.displayed_[this.row_]=""};za.prototype.paintOn=function(A,x){this.displayed_[this.row_]+=x};var xn=za,vb={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Oj=function(A,x){var t=1;for(A>x&&(t=-1);4294967296<Math.abs(x-A);)A+=8589934592*t;return A},Pj=function t(x){var C,D;t.prototype.init.call(this);this.type_=x||"shared";this.push=function(v){if("shared"===this.type_||
v.type===this.type_)void 0===D&&(D=v.dts),v.dts=Oj(v.dts,D),v.pts=Oj(v.pts,D),C=v.dts,this.trigger("data",v)};this.flush=function(){D=C;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){C=D=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}};Pj.prototype=new f;var sd=function(x,t,C){for(var D="";t<C;t++)D+="%"+("00"+x[t].toString(16)).slice(-2);return D},le=function(x){return x[0]<<21|x[1]<<14|x[2]<<7|
x[3]},Qj={TXXX:function(x){var t;if(3===x.data[0]){for(t=1;t<x.data.length;t++)if(0===x.data[t]){x.description=decodeURIComponent(sd(x.data,1,t));x.value=decodeURIComponent(sd(x.data,t+1,x.data.length)).replace(/\0*$/,"");break}x.data=x.value}},WXXX:function(x){var t;if(3===x.data[0])for(t=1;t<x.data.length;t++)if(0===x.data[t]){x.description=decodeURIComponent(sd(x.data,1,t));x.url=decodeURIComponent(sd(x.data,t+1,x.data.length));break}},PRIV:function(x){var t;for(t=0;t<x.data.length;t++)if(0===
x.data[t]){x.owner=unescape(sd(x.data,0,t));break}x.privateData=x.data.subarray(t+1);x.data=x.privateData}};var ig=function(x){var t=!(!x||!x.debug);x=x&&x.descriptor;var C=0,D=[],v=0,F;ig.prototype.init.call(this);this.dispatchType=vb.METADATA_STREAM_TYPE.toString(16);if(x)for(F=0;F<x.length;F++)this.dispatchType+=("00"+x[F].toString(16)).slice(-2);this.push=function(w){var J;if("timed-metadata"===w.type)if(w.dataAlignmentIndicator&&(v=0,D.length=0),0===D.length&&(10>w.data.length||73!==w.data[0]||
68!==w.data[1]||51!==w.data[2]))t&&console.log("Skipping unrecognized metadata packet");else if(D.push(w),v+=w.data.byteLength,1===D.length&&(C=le(w.data.subarray(6,10)),C+=10),!(v<C)){w={data:new Uint8Array(C),frames:[],pts:D[0].pts,dts:D[0].dts};for(J=0;J<C;)w.data.set(D[0].data.subarray(0,C-J),J),J+=D[0].data.byteLength,v-=D[0].data.byteLength,D.shift();J=10;w.data[5]&64&&(J=J+4+le(w.data.subarray(10,14)),C-=le(w.data.subarray(16,20)));do{var E=le(w.data.subarray(J+4,J+8));if(1>E)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");
var O=String.fromCharCode(w.data[J],w.data[J+1],w.data[J+2],w.data[J+3]);O={id:O,data:w.data.subarray(J+10,J+E+10)};O.key=O.id;if(Qj[O.id]&&(Qj[O.id](O),"com.apple.streaming.transportStreamTimestamp"===O.owner)){var R=O.data,Y=(R[3]&1)<<30|R[4]<<22|R[5]<<14|R[6]<<6|R[7]>>>2;Y*=4;Y+=R[7]&3;O.timeStamp=Y;void 0===w.pts&&void 0===w.dts&&(w.pts=O.timeStamp,w.dts=O.timeStamp);this.trigger("timestamp",O)}w.frames.push(O);J+=10;J+=E}while(J<C);this.trigger("data",w)}}};ig.prototype=new f;var jg=function(){var x=
new Uint8Array(188),t=0;jg.prototype.init.call(this);this.push=function(C){var D=0,v=188;if(t){var F=new Uint8Array(C.byteLength+t);F.set(x.subarray(0,t));F.set(C,t);t=0}else F=C;for(;v<F.byteLength;)71===F[D]&&71===F[v]?(this.trigger("data",F.subarray(D,v)),D+=188,v+=188):(D++,v++);D<F.byteLength&&(x.set(F.subarray(D),0),t=F.byteLength-D)};this.flush=function(){188===t&&71===x[0]&&(this.trigger("data",x),t=0);this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};
this.reset=function(){t=0;this.trigger("reset")}};jg.prototype=new f;var me=function(){me.prototype.init.call(this);var x=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var t=function(v,F){var w=0;F.payloadUnitStartIndicator&&(w+=v[w]+1);"pat"===F.type?C(v.subarray(w),F):D(v.subarray(w),F)};var C=function(v,F){F.section_number=v[7];F.last_section_number=v[8];x.pmtPid=(v[10]&31)<<8|v[11];F.pmtPid=x.pmtPid};var D=function(v,F){var w;if(v[5]&1){x.programMapTable={video:null,audio:null,
"timed-metadata":{}};var J=3+((v[1]&15)<<8|v[2])-4;for(w=12+((v[10]&15)<<8|v[11]);w<J;){var E=v[w],O=(v[w+1]&31)<<8|v[w+2];E===vb.H264_STREAM_TYPE&&null===x.programMapTable.video?x.programMapTable.video=O:E===vb.ADTS_STREAM_TYPE&&null===x.programMapTable.audio?x.programMapTable.audio=O:E===vb.METADATA_STREAM_TYPE&&(x.programMapTable["timed-metadata"][O]=E);w+=((v[w+3]&15)<<8|v[w+4])+5}F.programMapTable=x.programMapTable}};this.push=function(v){var F={},w=4;F.payloadUnitStartIndicator=!!(v[1]&64);
F.pid=v[1]&31;F.pid<<=8;F.pid|=v[2];1<(v[3]&48)>>>4&&(w+=v[w]+1);if(0===F.pid)F.type="pat",t(v.subarray(w),F),this.trigger("data",F);else if(F.pid===this.pmtPid)for(F.type="pmt",t(v.subarray(w),F),this.trigger("data",F);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([v,w,F]):this.processPes_(v,w,F)};this.processPes_=function(v,F,w){w.streamType=w.pid===this.programMapTable.video?vb.H264_STREAM_TYPE:
w.pid===this.programMapTable.audio?vb.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][w.pid];w.type="pes";w.data=v.subarray(F);this.trigger("data",w)}};me.prototype=new f;me.STREAM_TYPES={h264:27,adts:15};var kg=function(){var x=this,t={data:[],size:0},C={data:[],size:0},D={data:[],size:0},v,F=function(w,J,E){var O=new Uint8Array(w.size),R={type:J},Y,Q=0;if(w.data.length&&!(9>w.size)){R.trackId=w.data[0].pid;for(Y=0;Y<w.data.length;Y++){var V=w.data[Y];O.set(V.data,Q);Q+=V.data.byteLength}R.packetLength=
6+(O[4]<<8|O[5]);R.dataAlignmentIndicator=0!==(O[6]&4);Y=O[7];Y&192&&(R.pts=(O[9]&14)<<27|(O[10]&255)<<20|(O[11]&254)<<12|(O[12]&255)<<5|(O[13]&254)>>>3,R.pts*=4,R.pts+=(O[13]&6)>>>1,R.dts=R.pts,Y&64&&(R.dts=(O[14]&14)<<27|(O[15]&255)<<20|(O[16]&254)<<12|(O[17]&255)<<5|(O[18]&254)>>>3,R.dts*=4,R.dts+=(O[18]&6)>>>1));R.data=O.subarray(9+O[8]);J="video"===J||R.packetLength<=w.size;if(E||J)w.size=0,w.data.length=0;J&&x.trigger("data",R)}};kg.prototype.init.call(this);this.push=function(w){({pat:function(){},
pes:function(){switch(w.streamType){case vb.H264_STREAM_TYPE:var J=t;var E="video";break;case vb.ADTS_STREAM_TYPE:J=C;E="audio";break;case vb.METADATA_STREAM_TYPE:J=D;E="timed-metadata";break;default:return}w.payloadUnitStartIndicator&&F(J,E,!0);J.data.push(w);J.size+=w.data.byteLength},pmt:function(){var J={type:"metadata",tracks:[]};v=w.programMapTable;null!==v.video&&J.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+v.video,codec:"avc",type:"video"});null!==v.audio&&J.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},
id:+v.audio,codec:"adts",type:"audio"});x.trigger("data",J)}})[w.type]()};this.reset=function(){t.size=0;t.data.length=0;C.size=0;C.data.length=0;this.trigger("reset")};this.flushStreams_=function(){F(t,"video");F(C,"audio");F(D,"timed-metadata")};this.flush=function(){this.flushStreams_();this.trigger("done")}};kg.prototype=new f;var Ia={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:jg,TransportParseStream:me,ElementaryStream:kg,TimestampRolloverStream:Pj,CaptionStream:ob,Cea608Stream:xn,
MetadataStream:ig},ne;for(ne in vb)vb.hasOwnProperty(ne)&&(Ia[ne]=vb[ne]);var yn=Ta.ONE_SECOND_IN_TS,Rj=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var Qc=function(x){var t,C=0;Qc.prototype.init.call(this);this.push=function(D){var v=0;x||(C=0);if("audio"===D.type){if(t){var F=t;t=new Uint8Array(F.byteLength+D.data.byteLength);t.set(F);t.set(D.data,F.byteLength)}else t=D.data;for(;v+5<t.length;)if(255!==t[v]||240!==(t[v+1]&246))v++;else{F=2*(~t[v+1]&1);var w=(t[v+3]&3)<<
11|t[v+4]<<3|(t[v+5]&224)>>5;var J=1024*((t[v+6]&3)+1);var E=J*yn/Rj[(t[v+2]&60)>>>2];w=v+w;if(t.byteLength<w)break;this.trigger("data",{pts:D.pts+C*E,dts:D.dts+C*E,sampleCount:J,audioobjecttype:(t[v+2]>>>6&3)+1,channelcount:(t[v+2]&1)<<2|(t[v+3]&192)>>>6,samplerate:Rj[(t[v+2]&60)>>>2],samplingfrequencyindex:(t[v+2]&60)>>>2,samplesize:16,data:t.subarray(v+7+F,w)});C++;if(t.byteLength===w){t=void 0;break}t=t.subarray(w)}}};this.flush=function(){C=0;this.trigger("done")};this.reset=function(){t=void 0;
this.trigger("reset")};this.endTimeline=function(){t=void 0;this.trigger("endedtimeline")}};Qc.prototype=new f;var zn=function(x){var t=x.byteLength,C=0,D=0;this.length=function(){return 8*t};this.bitsAvailable=function(){return 8*t+D};this.loadWord=function(){var v=x.byteLength-t,F=new Uint8Array(4),w=Math.min(4,t);if(0===w)throw Error("no bytes available");F.set(x.subarray(v,v+w));C=(new DataView(F.buffer)).getUint32(0);D=8*w;t-=w};this.skipBits=function(v){if(!(D>v)){v-=D;var F=Math.floor(v/8);
v-=8*F;t-=F;this.loadWord()}C<<=v;D-=v};this.readBits=function(v){var F=Math.min(D,v),w=C>>>32-F;D-=F;0<D?C<<=F:0<t&&this.loadWord();F=v-F;return 0<F?w<<F|this.readBits(F):w};this.skipLeadingZeros=function(){var v;for(v=0;v<D;++v)if(0!==(C&2147483648>>>v))return C<<=v,D-=v,v;this.loadWord();return v+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=
function(){var v=this.skipLeadingZeros();return this.readBits(v+1)-1};this.readExpGolomb=function(){var v=this.readUnsignedExpGolomb();return 1&v?1+v>>>1:-1*(v>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var lg=function(){var x=0,t,C;lg.prototype.init.call(this);this.push=function(D){if(C){var v=new Uint8Array(C.byteLength+D.data.byteLength);v.set(C);v.set(D.data,C.byteLength);C=v}else C=D.data;for(D=C.byteLength;x<
D-3;x++)if(1===C[x+2]){t=x+5;break}for(;t<D;)switch(C[t]){case 0:if(0!==C[t-1]){t+=2;break}else if(0!==C[t-2]){t++;break}x+3!==t-2&&this.trigger("data",C.subarray(x+3,t-2));do t++;while(1!==C[t]&&t<D);x=t-2;t+=3;break;case 1:if(0!==C[t-1]||0!==C[t-2]){t+=3;break}this.trigger("data",C.subarray(x+3,t-2));x=t-2;t+=3;break;default:t+=3}C=C.subarray(x);t-=x;x=0};this.reset=function(){C=null;x=0;this.trigger("reset")};this.flush=function(){C&&3<C.byteLength&&this.trigger("data",C.subarray(x+3));C=null;
x=0;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")}};lg.prototype=new f;var An={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var oe=function(){var x=new lg,t,C,D;oe.prototype.init.call(this);var v=this;this.push=function(E){"video"===E.type&&(t=E.trackId,C=E.pts,D=E.dts,x.push(E))};x.on("data",function(E){var O={trackId:t,pts:C,dts:D,data:E};switch(E[0]&31){case 5:O.nalUnitType="slice_layer_without_partitioning_rbsp_idr";
break;case 6:O.nalUnitType="sei_rbsp";O.escapedRBSP=w(E.subarray(1));break;case 7:O.nalUnitType="seq_parameter_set_rbsp";O.escapedRBSP=w(E.subarray(1));O.config=J(O.escapedRBSP);break;case 8:O.nalUnitType="pic_parameter_set_rbsp";break;case 9:O.nalUnitType="access_unit_delimiter_rbsp"}v.trigger("data",O)});x.on("done",function(){v.trigger("done")});x.on("partialdone",function(){v.trigger("partialdone")});x.on("reset",function(){v.trigger("reset")});x.on("endedtimeline",function(){v.trigger("endedtimeline")});
this.flush=function(){x.flush()};this.partialFlush=function(){x.partialFlush()};this.reset=function(){x.reset()};this.endTimeline=function(){x.endTimeline()};var F=function(E,O){var R=8,Y=8,Q;for(Q=0;Q<E;Q++)0!==Y&&(Y=O.readExpGolomb(),Y=(R+Y+256)%256),R=0===Y?R:Y};var w=function(E){for(var O=E.byteLength,R=[],Y=1,Q;Y<O-2;)0===E[Y]&&0===E[Y+1]&&3===E[Y+2]?(R.push(Y+2),Y+=2):Y++;if(0===R.length)return E;O-=R.length;Q=new Uint8Array(O);var V=0;for(Y=0;Y<O;V++,Y++)V===R[0]&&(V++,R.shift()),Q[Y]=E[V];
return Q};var J=function(E){var O=0,R=0,Y=0,Q=0,V=1;E=new zn(E);var ea=E.readUnsignedByte();var aa=E.readUnsignedByte();var la=E.readUnsignedByte();E.skipUnsignedExpGolomb();if(An[ea]){var ra=E.readUnsignedExpGolomb();3===ra&&E.skipBits(1);E.skipUnsignedExpGolomb();E.skipUnsignedExpGolomb();E.skipBits(1);if(E.readBoolean()){var Ja=3!==ra?8:12;for(ra=0;ra<Ja;ra++)E.readBoolean()&&(6>ra?F(16,E):F(64,E))}}E.skipUnsignedExpGolomb();ra=E.readUnsignedExpGolomb();if(0===ra)E.readUnsignedExpGolomb();else if(1===
ra)for(E.skipBits(1),E.skipExpGolomb(),E.skipExpGolomb(),Ja=E.readUnsignedExpGolomb(),ra=0;ra<Ja;ra++)E.skipExpGolomb();E.skipUnsignedExpGolomb();E.skipBits(1);ra=E.readUnsignedExpGolomb();Ja=E.readUnsignedExpGolomb();var wb=E.readBits(1);0===wb&&E.skipBits(1);E.skipBits(1);E.readBoolean()&&(O=E.readUnsignedExpGolomb(),R=E.readUnsignedExpGolomb(),Y=E.readUnsignedExpGolomb(),Q=E.readUnsignedExpGolomb());if(E.readBoolean()&&E.readBoolean()){var Fb=E.readUnsignedByte();switch(Fb){case 1:var sa=[1,1];
break;case 2:sa=[12,11];break;case 3:sa=[10,11];break;case 4:sa=[16,11];break;case 5:sa=[40,33];break;case 6:sa=[24,11];break;case 7:sa=[20,11];break;case 8:sa=[32,11];break;case 9:sa=[80,33];break;case 10:sa=[18,11];break;case 11:sa=[15,11];break;case 12:sa=[64,33];break;case 13:sa=[160,99];break;case 14:sa=[4,3];break;case 15:sa=[3,2];break;case 16:sa=[2,1];break;case 255:sa=[E.readUnsignedByte()<<8|E.readUnsignedByte(),E.readUnsignedByte()<<8|E.readUnsignedByte()]}sa&&(V=sa[0]/sa[1])}return{profileIdc:ea,
levelIdc:la,profileCompatibility:aa,width:Math.ceil((16*(ra+1)-2*O-2*R)*V),height:(2-wb)*(Ja+1)*16-2*Y-2*Q,sarRatio:sa}}};oe.prototype=new f;var Bn=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],Sj=function(x,t){var C=x[t+6]<<21|x[t+7]<<14|x[t+8]<<7|x[t+9];x=x[t+5];C=0<=C?C:0;return(x&16)>>4?C+20:C+10},Cn=function D(t,C){if(10>t.length-C||73!==t[C]||68!==t[C+1]||51!==t[C+2])return C;C+=Sj(t,C);return D(t,C)},Tj=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},pe={isLikelyAacData:function(t){var C=
Cn(t,0);return t.length>=C+2&&255===(t[C]&255)&&240===(t[C+1]&240)&&16===(t[C+1]&22)},parseId3TagSize:Sj,parseAdtsSize:function(t,C){return t[C+3]&6144|t[C+4]<<3|(t[C+5]&224)>>5},parseType:function(t,C){return 73===t[C]&&68===t[C+1]&&51===t[C+2]?"timed-metadata":t[C]&1&&240===(t[C+1]&240)?"audio":null},parseSampleRate:function(t){for(var C=0;C+5<t.length;)if(255!==t[C]||240!==(t[C+1]&246))C++;else return Bn[(t[C+2]&60)>>>2];return null},parseAacTimestamp:function(t){var C=10;t[5]&64&&(C=C+4+Tj(t.subarray(10,
14)));do{var D=Tj(t.subarray(C+4,C+8));if(1>D)break;var v=String.fromCharCode(t[C],t[C+1],t[C+2],t[C+3]);if("PRIV"===v){v=t.subarray(C+10,C+D+10);for(var F=0;F<v.byteLength;F++)if(0===v[F]){var w=unescape,J,E=v,O=F,R="";for(J=0;J<O;J++)R+="%"+("00"+E[J].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===w(R))return t=v.subarray(F+1),C=(t[3]&1)<<30|t[4]<<22|t[5]<<14|t[6]<<6|t[7]>>>2,C*=4,C+=t[7]&3;break}}C+=10;C+=D}while(C<t.byteLength);return null}};var qe=function(){var t=
new Uint8Array,C=0;qe.prototype.init.call(this);this.setTimestamp=function(D){C=D};this.push=function(D){var v=0;if(t.length){var F=t.length;t=new Uint8Array(D.byteLength+F);t.set(t.subarray(0,F));t.set(D,F)}else t=D;for(;3<=t.length-v;)if(73===t[v]&&68===t[v+1]&&51===t[v+2]){if(10>t.length-v)break;D=pe.parseId3TagSize(t,v);if(v+D>t.length)break;F={type:"timed-metadata",data:t.subarray(v,v+D)};this.trigger("data",F);v+=D}else if(255===(t[v]&255)&&240===(t[v+1]&240)){if(7>t.length-v)break;D=pe.parseAdtsSize(t,
v);if(v+D>t.length)break;F={type:"audio",data:t.subarray(v,v+D),pts:C,dts:C};this.trigger("data",F);v+=D}else v++;t=0<t.length-v?t.subarray(v):new Uint8Array};this.reset=function(){t=new Uint8Array;this.trigger("reset")};this.endTimeline=function(){t=new Uint8Array;this.trigger("endedtimeline")}};qe.prototype=new f;var mg=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],ng="width height profileIdc levelIdc profileCompatibility sarRatio".split(" "),Dn=pe.isLikelyAacData,
En=Ta.ONE_SECOND_IN_TS,Uj=function(t,C){var D;if(t.length!==C.length)return!1;for(D=0;D<t.length;D++)if(t[D]!==C[D])return!1;return!0},Fn=function(t,C,D,v,F,w){return{start:{dts:t,pts:t+(D-C)},end:{dts:t+(v-C),pts:t+(F-D)},prependedContentDuration:w,baseMediaDecodeTime:t}};var re=function(t,C){var D=[],v=0,F=0,w=0,J=Infinity;C=C||{};re.prototype.init.call(this);this.push=function(E){Da.collectDtsInfo(t,E);t&&mg.forEach(function(O){t[O]=E[O]});D.push(E)};this.setEarliestDts=function(E){F=E};this.setVideoBaseMediaDecodeTime=
function(E){J=E};this.setAudioAppendStart=function(E){w=E};this.flush=function(){if(0!==D.length){var E=cc.trimAdtsFramesByEarliestDts(D,t,F);t.baseMediaDecodeTime=Da.calculateTrackBaseMediaDecodeTime(t,C.keepOriginalTimestamps);cc.prefixWithSilence(t,E,w,J);t.samples=cc.generateSampleTable(E);var O=Eb.mdat(cc.concatenateFrameData(E));D=[];var R=Eb.moof(v,[t]);var Y=new Uint8Array(R.byteLength+O.byteLength);v++;Y.set(R);Y.set(O,R.byteLength);Da.clearDtsInfo(t);R=Math.ceil(1024*En/t.samplerate);E.length&&
this.trigger("timingInfo",{start:E[0].pts,end:E[0].pts+E.length*R});this.trigger("data",{track:t,boxes:Y})}this.trigger("done","AudioSegmentStream")};this.reset=function(){Da.clearDtsInfo(t);D=[];this.trigger("reset")}};re.prototype=new f;var og=function(t,C){var D=0,v=[],F=[],w,J;C=C||{};og.prototype.init.call(this);delete t.minPTS;this.gopCache_=[];this.push=function(E){Da.collectDtsInfo(t,E);"seq_parameter_set_rbsp"!==E.nalUnitType||w||(w=E.config,t.sps=[E.data],ng.forEach(function(O){t[O]=w[O]},
this));"pic_parameter_set_rbsp"!==E.nalUnitType||J||(J=E.data,t.pps=[E.data]);v.push(E)};this.flush=function(){var E;var O=0;for(var R,Y;v.length&&"access_unit_delimiter_rbsp"!==v[0].nalUnitType;)v.shift();if(0!==v.length){var Q=Lb.groupNalsIntoFrames(v);Q=Lb.groupFramesIntoGops(Q);Q[0][0].keyFrame||((E=this.getGopForFusion_(v[0],t))?(O=E.duration,Q.unshift(E),Q.byteLength+=E.byteLength,Q.nalCount+=E.nalCount,Q.pts=E.pts,Q.dts=E.dts,Q.duration+=E.duration):Q=Lb.extendFirstKeyFrame(Q));if(F.length){E=
C.alignGopsAtEnd?this.alignGopsAtEnd_(Q):this.alignGopsAtStart_(Q);if(!E){this.gopCache_.unshift({gop:Q.pop(),pps:t.pps,sps:t.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);v=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}Da.clearDtsInfo(t);Q=E}Da.collectDtsInfo(t,Q);t.samples=Lb.generateSampleTable(Q);E=Eb.mdat(Lb.concatenateNalData(Q));t.baseMediaDecodeTime=Da.calculateTrackBaseMediaDecodeTime(t,C.keepOriginalTimestamps);this.trigger("processedGopsInfo",Q.map(function(V){return{pts:V.pts,
dts:V.dts,byteLength:V.byteLength}}));R=Q[0];Y=Q[Q.length-1];this.trigger("segmentTimingInfo",Fn(t.baseMediaDecodeTime,R.dts,R.pts,Y.dts+Y.duration,Y.pts+Y.duration,O));this.trigger("timingInfo",{start:Q[0].pts,end:Q[Q.length-1].pts+Q[Q.length-1].duration});this.gopCache_.unshift({gop:Q.pop(),pps:t.pps,sps:t.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);v=[];this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime);this.trigger("timelineStartInfo",t.timelineStartInfo);O=Eb.moof(D,
[t]);Q=new Uint8Array(O.byteLength+E.byteLength);D++;Q.set(O);Q.set(E,O.byteLength);this.trigger("data",{track:t,boxes:Q})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.reset=function(){this.resetStream_();v=[];this.gopCache_.length=0;F.length=0;this.trigger("reset")};this.resetStream_=function(){Da.clearDtsInfo(t);J=w=void 0};this.getGopForFusion_=function(E){var O=Infinity,R;for(R=0;R<this.gopCache_.length;R++){var Y=this.gopCache_[R];var Q=Y.gop;if(t.pps&&Uj(t.pps[0],Y.pps[0])&&
t.sps&&Uj(t.sps[0],Y.sps[0])&&!(Q.dts<t.timelineStartInfo.dts)&&(Q=E.dts-Q.dts-Q.duration,-1E4<=Q&&45E3>=Q&&(!V||O>Q))){var V=Y;O=Q}}return V?V.gop:null};this.alignGopsAtStart_=function(E){var O,R;var Y=E.byteLength;var Q=E.nalCount;var V=E.duration;for(O=R=0;O<F.length&&R<E.length;){var ea=F[O];var aa=E[R];if(ea.pts===aa.pts)break;aa.pts>ea.pts?O++:(R++,Y-=aa.byteLength,Q-=aa.nalCount,V-=aa.duration)}if(0===R)return E;if(R===E.length)return null;E=E.slice(R);E.byteLength=Y;E.duration=V;E.nalCount=
Q;E.pts=E[0].pts;E.dts=E[0].dts;return E};this.alignGopsAtEnd_=function(E){var O;var R=F.length-1;var Y=E.length-1;var Q=null;for(O=!1;0<=R&&0<=Y;){var V=F[R];var ea=E[Y];if(V.pts===ea.pts){O=!0;break}V.pts>ea.pts?R--:(R===F.length-1&&(Q=Y),Y--)}if(!O&&null===Q)return null;R=O?Y:Q;if(0===R)return E;E=E.slice(R);R=E.reduce(function(aa,la){aa.byteLength+=la.byteLength;aa.duration+=la.duration;aa.nalCount+=la.nalCount;return aa},{byteLength:0,duration:0,nalCount:0});E.byteLength=R.byteLength;E.duration=
R.duration;E.nalCount=R.nalCount;E.pts=E[0].pts;E.dts=E[0].dts;return E};this.alignGopsWith=function(E){F=E}};og.prototype=new f;var Rc=function(t,C){this.numberOfTracks=0;this.metadataStream=C;t=t||{};this.remuxTracks="undefined"!==typeof t.remux?!!t.remux:!0;this.keepOriginalTimestamps="boolean"===typeof t.keepOriginalTimestamps?t.keepOriginalTimestamps:!1;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=
0;Rc.prototype.init.call(this);this.push=function(D){if(D.text)return this.pendingCaptions.push(D);if(D.frames)return this.pendingMetadata.push(D);this.pendingTracks.push(D.track);this.pendingBytes+=D.boxes.byteLength;"video"===D.track.type&&(this.videoTrack=D.track,this.pendingBoxes.push(D.boxes));"audio"===D.track.type&&(this.audioTrack=D.track,this.pendingBoxes.unshift(D.boxes))}};Rc.prototype=new f;Rc.prototype.flush=function(t){var C=0,D={captions:[],captionStreams:{},metadata:[],info:{}},v=
0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(v=this.videoTrack.timelineStartInfo.pts,ng.forEach(function(F){D.info[F]=this.videoTrack[F]},this)):this.audioTrack&&(v=this.audioTrack.timelineStartInfo.pts,mg.forEach(function(F){D.info[F]=this.audioTrack[F]},
this));if(this.videoTrack||this.audioTrack){D.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;t=Eb.initSegment(this.pendingTracks);D.initSegment=new Uint8Array(t.byteLength);D.initSegment.set(t);D.data=new Uint8Array(this.pendingBytes);for(t=0;t<this.pendingBoxes.length;t++)D.data.set(this.pendingBoxes[t],C),C+=this.pendingBoxes[t].byteLength;for(t=0;t<this.pendingCaptions.length;t++)C=this.pendingCaptions[t],C.startTime=Ta.metadataTsToSeconds(C.startPts,
v,this.keepOriginalTimestamps),C.endTime=Ta.metadataTsToSeconds(C.endPts,v,this.keepOriginalTimestamps),D.captionStreams[C.stream]=!0,D.captions.push(C);for(t=0;t<this.pendingMetadata.length;t++)C=this.pendingMetadata[t],C.cueTime=Ta.metadataTsToSeconds(C.pts,v,this.keepOriginalTimestamps),D.metadata.push(C);D.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=
0;this.trigger("data",D);for(t=0;t<D.captions.length;t++)C=D.captions[t],this.trigger("caption",C);for(t=0;t<D.metadata.length;t++)C=D.metadata[t],this.trigger("id3Frame",C)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};Rc.prototype.setRemux=function(t){this.remuxTracks=t};var pg=function(t){var C=this,D=!0,v,F;pg.prototype.init.call(this);t=t||{};this.baseMediaDecodeTime=t.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var w=
{};this.transmuxPipeline_=w;w.type="aac";w.metadataStream=new Ia.MetadataStream;w.aacStream=new qe;w.audioTimestampRolloverStream=new Ia.TimestampRolloverStream("audio");w.timedMetadataTimestampRolloverStream=new Ia.TimestampRolloverStream("timed-metadata");w.adtsStream=new Qc;w.coalesceStream=new Rc(t,w.metadataStream);w.headOfPipeline=w.aacStream;w.aacStream.pipe(w.audioTimestampRolloverStream).pipe(w.adtsStream);w.aacStream.pipe(w.timedMetadataTimestampRolloverStream).pipe(w.metadataStream).pipe(w.coalesceStream);
w.metadataStream.on("timestamp",function(J){w.aacStream.setTimestamp(J.timeStamp)});w.aacStream.on("data",function(J){"timed-metadata"!==J.type&&"audio"!==J.type||w.audioSegmentStream||(F=F||{timelineStartInfo:{baseMediaDecodeTime:C.baseMediaDecodeTime},codec:"adts",type:"audio"},w.coalesceStream.numberOfTracks++,w.audioSegmentStream=new re(F,t),w.audioSegmentStream.on("timingInfo",C.trigger.bind(C,"audioTimingInfo")),w.adtsStream.pipe(w.audioSegmentStream).pipe(w.coalesceStream),C.trigger("trackinfo",
{hasAudio:!!F,hasVideo:!!v}))});w.coalesceStream.on("data",this.trigger.bind(this,"data"));w.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var w={};this.transmuxPipeline_=w;w.type="ts";w.metadataStream=new Ia.MetadataStream;w.packetStream=new Ia.TransportPacketStream;w.parseStream=new Ia.TransportParseStream;w.elementaryStream=new Ia.ElementaryStream;w.timestampRolloverStream=new Ia.TimestampRolloverStream;w.adtsStream=new Qc;w.h264Stream=new oe;w.captionStream=
new Ia.CaptionStream;w.coalesceStream=new Rc(t,w.metadataStream);w.headOfPipeline=w.packetStream;w.packetStream.pipe(w.parseStream).pipe(w.elementaryStream).pipe(w.timestampRolloverStream);w.timestampRolloverStream.pipe(w.h264Stream);w.timestampRolloverStream.pipe(w.adtsStream);w.timestampRolloverStream.pipe(w.metadataStream).pipe(w.coalesceStream);w.h264Stream.pipe(w.captionStream).pipe(w.coalesceStream);w.elementaryStream.on("data",function(J){var E;if("metadata"===J.type){for(E=J.tracks.length;E--;)v||
"video"!==J.tracks[E].type?F||"audio"!==J.tracks[E].type||(F=J.tracks[E],F.timelineStartInfo.baseMediaDecodeTime=C.baseMediaDecodeTime):(v=J.tracks[E],v.timelineStartInfo.baseMediaDecodeTime=C.baseMediaDecodeTime);v&&!w.videoSegmentStream&&(w.coalesceStream.numberOfTracks++,w.videoSegmentStream=new og(v,t),w.videoSegmentStream.on("timelineStartInfo",function(O){F&&!t.keepOriginalTimestamps&&(F.timelineStartInfo=O,w.audioSegmentStream.setEarliestDts(O.dts-C.baseMediaDecodeTime))}),w.videoSegmentStream.on("processedGopsInfo",
C.trigger.bind(C,"gopInfo")),w.videoSegmentStream.on("segmentTimingInfo",C.trigger.bind(C,"videoSegmentTimingInfo")),w.videoSegmentStream.on("baseMediaDecodeTime",function(O){F&&w.audioSegmentStream.setVideoBaseMediaDecodeTime(O)}),w.videoSegmentStream.on("timingInfo",C.trigger.bind(C,"videoTimingInfo")),w.h264Stream.pipe(w.videoSegmentStream).pipe(w.coalesceStream));F&&!w.audioSegmentStream&&(w.coalesceStream.numberOfTracks++,w.audioSegmentStream=new re(F,t),w.audioSegmentStream.on("timingInfo",
C.trigger.bind(C,"audioTimingInfo")),w.adtsStream.pipe(w.audioSegmentStream).pipe(w.coalesceStream));C.trigger("trackinfo",{hasAudio:!!F,hasVideo:!!v})}});w.coalesceStream.on("data",this.trigger.bind(this,"data"));w.coalesceStream.on("id3Frame",function(J){J.dispatchType=w.metadataStream.dispatchType;C.trigger("id3Frame",J)});w.coalesceStream.on("caption",this.trigger.bind(this,"caption"));w.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(w){var J=this.transmuxPipeline_;
t.keepOriginalTimestamps||(this.baseMediaDecodeTime=w);F&&(F.timelineStartInfo.dts=void 0,F.timelineStartInfo.pts=void 0,Da.clearDtsInfo(F),J.audioTimestampRolloverStream&&J.audioTimestampRolloverStream.discontinuity());v&&(J.videoSegmentStream&&(J.videoSegmentStream.gopCache_=[]),v.timelineStartInfo.dts=void 0,v.timelineStartInfo.pts=void 0,Da.clearDtsInfo(v),J.captionStream.reset());J.timestampRolloverStream&&J.timestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(w){F&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(w)};
this.setRemux=function(w){var J=this.transmuxPipeline_;t.remux=w;J&&J.coalesceStream&&J.coalesceStream.setRemux(w)};this.alignGopsWith=function(w){v&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(w)};this.push=function(w){if(D){var J=Dn(w);J&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():J||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();D=!1}this.transmuxPipeline_.headOfPipeline.push(w)};this.flush=function(){D=!0;this.transmuxPipeline_.headOfPipeline.flush()};
this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()};this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};pg.prototype=new f;var Gn=Ta.ONE_SECOND_IN_TS,qg=function v(C,D){var F=[],w=0,J=0,E=0,O=Infinity,R=null,Y=null;D=D||{};v.prototype.init.call(this);this.push=function(Q){Da.collectDtsInfo(C,Q);C&&mg.forEach(function(V){C[V]=
Q[V]});F.push(Q)};this.setEarliestDts=function(Q){J=Q};this.setVideoBaseMediaDecodeTime=function(Q){O=Q};this.setAudioAppendStart=function(Q){E=Q};this.processFrames_=function(){if(0!==F.length){var Q=cc.trimAdtsFramesByEarliestDts(F,C,J);if(0!==Q.length){C.baseMediaDecodeTime=Da.calculateTrackBaseMediaDecodeTime(C,D.keepOriginalTimestamps);cc.prefixWithSilence(C,Q,E,O);C.samples=cc.generateSampleTable(Q);var V=Eb.mdat(cc.concatenateFrameData(Q));F=[];var ea=Eb.moof(w,[C]);w++;C.initSegment=Eb.initSegment([C]);
var aa=new Uint8Array(ea.byteLength+V.byteLength);aa.set(ea);aa.set(V,ea.byteLength);Da.clearDtsInfo(C);null===R&&(Y=R=Q[0].pts);Y+=1024*Gn/C.samplerate*Q.length;this.trigger("timingInfo",{start:R});this.trigger("data",{track:C,boxes:aa})}}};this.flush=function(){this.processFrames_();this.trigger("timingInfo",{start:R,end:Y});this.resetTiming_();this.trigger("done","AudioSegmentStream")};this.partialFlush=function(){this.processFrames_();this.trigger("partialdone","AudioSegmentStream")};this.endTimeline=
function(){this.flush();this.trigger("endedtimeline","AudioSegmentStream")};this.resetTiming_=function(){Da.clearDtsInfo(C);Y=R=null};this.reset=function(){this.resetTiming_();F=[];this.trigger("reset")}};qg.prototype=new f;var Vj=function F(D,v){var w=0,J=[],E=[],O,R,Y=null,Q=null,V,ea=!0;v=v||{};F.prototype.init.call(this);this.push=function(aa){Da.collectDtsInfo(D,aa);"undefined"===typeof D.timelineStartInfo.dts&&(D.timelineStartInfo.dts=aa.dts);"seq_parameter_set_rbsp"!==aa.nalUnitType||O||(O=
aa.config,D.sps=[aa.data],ng.forEach(function(la){D[la]=O[la]},this));"pic_parameter_set_rbsp"!==aa.nalUnitType||R||(R=aa.data,D.pps=[aa.data]);J.push(aa)};this.processNals_=function(aa){for(J=E.concat(J);J.length&&"access_unit_delimiter_rbsp"!==J[0].nalUnitType;)J.shift();if(0!==J.length){var la=Lb.groupNalsIntoFrames(J);if(la.length){E=la[la.length-1];aa&&(la.pop(),la.duration-=E.duration,la.nalCount-=E.length,la.byteLength-=E.byteLength);if(la.length){this.trigger("timelineStartInfo",D.timelineStartInfo);
if(ea){V=Lb.groupFramesIntoGops(la);if(!V[0][0].keyFrame){V=Lb.extendFirstKeyFrame(V);if(!V[0][0].keyFrame){J=[].concat.apply([],la).concat(E);E=[];return}la=[].concat.apply([],V);la.duration=V.duration}ea=!1}null===Y&&(Q=Y=la[0].pts);Q+=la.duration;this.trigger("timingInfo",{start:Y,end:Q});for(aa=0;aa<la.length;aa++){var ra=la[aa];D.samples=Lb.generateSampleTableForFrame(ra);var Ja=Eb.mdat(Lb.concatenateNalDataForFrame(ra));Da.clearDtsInfo(D);Da.collectDtsInfo(D,ra);D.baseMediaDecodeTime=Da.calculateTrackBaseMediaDecodeTime(D,
v.keepOriginalTimestamps);var wb=Eb.moof(w,[D]);w++;D.initSegment=Eb.initSegment([D]);var Fb=new Uint8Array(wb.byteLength+Ja.byteLength);Fb.set(wb);Fb.set(Ja,wb.byteLength);this.trigger("data",{track:D,boxes:Fb,sequence:w,videoFrameDts:ra.dts,videoFramePts:ra.pts})}}J=[]}}};this.resetTimingAndConfig_=function(){R=O=void 0;Q=Y=null};this.partialFlush=function(){this.processNals_(!0);this.trigger("partialdone","VideoSegmentStream")};this.flush=function(){this.processNals_(!1);this.resetTimingAndConfig_();
this.trigger("done","VideoSegmentStream")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline","VideoSegmentStream")};this.reset=function(){this.resetTimingAndConfig_();E=[];J=[];ea=!0;this.trigger("reset")}};Vj.prototype=new f;var Hn=pe.isLikelyAacData,Wj=function(D){D.prototype=new f;D.prototype.init.call(D);return D},In=function(D){var v={type:"ts",tracks:{audio:null,video:null},packet:new Ia.TransportPacketStream,parse:new Ia.TransportParseStream,elementary:new Ia.ElementaryStream,
timestampRollover:new Ia.TimestampRolloverStream,adts:new Qc,h264:new oe,captionStream:new Ia.CaptionStream,metadataStream:new Ia.MetadataStream};v.headOfPipeline=v.packet;v.packet.pipe(v.parse).pipe(v.elementary).pipe(v.timestampRollover);v.timestampRollover.pipe(v.h264);v.h264.pipe(v.captionStream);v.timestampRollover.pipe(v.metadataStream);v.timestampRollover.pipe(v.adts);v.elementary.on("data",function(F){if("metadata"===F.type){for(var w=0;w<F.tracks.length;w++)v.tracks[F.tracks[w].type]||(v.tracks[F.tracks[w].type]=
F.tracks[w],v.tracks[F.tracks[w].type].timelineStartInfo.baseMediaDecodeTime=D.baseMediaDecodeTime);v.tracks.video&&!v.videoSegmentStream&&(v.videoSegmentStream=new Vj(v.tracks.video,D),v.videoSegmentStream.on("timelineStartInfo",function(J){v.tracks.audio&&!D.keepOriginalTimestamps&&v.audioSegmentStream.setEarliestDts(J.dts-D.baseMediaDecodeTime)}),v.videoSegmentStream.on("timingInfo",v.trigger.bind(v,"videoTimingInfo")),v.videoSegmentStream.on("data",function(J){v.trigger("data",{type:"video",data:J})}),
v.videoSegmentStream.on("done",v.trigger.bind(v,"done")),v.videoSegmentStream.on("partialdone",v.trigger.bind(v,"partialdone")),v.videoSegmentStream.on("endedtimeline",v.trigger.bind(v,"endedtimeline")),v.h264.pipe(v.videoSegmentStream));v.tracks.audio&&!v.audioSegmentStream&&(v.audioSegmentStream=new qg(v.tracks.audio,D),v.audioSegmentStream.on("data",function(J){v.trigger("data",{type:"audio",data:J})}),v.audioSegmentStream.on("done",v.trigger.bind(v,"done")),v.audioSegmentStream.on("partialdone",
v.trigger.bind(v,"partialdone")),v.audioSegmentStream.on("endedtimeline",v.trigger.bind(v,"endedtimeline")),v.audioSegmentStream.on("timingInfo",v.trigger.bind(v,"audioTimingInfo")),v.adts.pipe(v.audioSegmentStream));v.trigger("trackinfo",{hasAudio:!!v.tracks.audio,hasVideo:!!v.tracks.video})}});v.captionStream.on("data",function(F){var w=v.tracks.video?v.tracks.video.timelineStartInfo.pts||0:0;F.startTime=Ta.metadataTsToSeconds(F.startPts,w,D.keepOriginalTimestamps);F.endTime=Ta.metadataTsToSeconds(F.endPts,
w,D.keepOriginalTimestamps);v.trigger("caption",F)});v=Wj(v);v.metadataStream.on("data",v.trigger.bind(v,"id3Frame"));return v},Jn=function(D){var v={type:"aac",tracks:{audio:null},metadataStream:new Ia.MetadataStream,aacStream:new qe,audioRollover:new Ia.TimestampRolloverStream("audio"),timedMetadataRollover:new Ia.TimestampRolloverStream("timed-metadata"),adtsStream:new Qc(!0)};v.headOfPipeline=v.aacStream;v.aacStream.pipe(v.audioRollover).pipe(v.adtsStream);v.aacStream.pipe(v.timedMetadataRollover).pipe(v.metadataStream);
v.metadataStream.on("timestamp",function(F){v.aacStream.setTimestamp(F.timeStamp)});v.aacStream.on("data",function(F){"timed-metadata"!==F.type&&"audio"!==F.type||v.audioSegmentStream||(v.tracks.audio=v.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:D.baseMediaDecodeTime},codec:"adts",type:"audio"},v.audioSegmentStream=new qg(v.tracks.audio,D),v.audioSegmentStream.on("data",function(w){v.trigger("data",{type:"audio",data:w})}),v.audioSegmentStream.on("partialdone",v.trigger.bind(v,"partialdone")),
v.audioSegmentStream.on("done",v.trigger.bind(v,"done")),v.audioSegmentStream.on("endedtimeline",v.trigger.bind(v,"endedtimeline")),v.audioSegmentStream.on("timingInfo",v.trigger.bind(v,"audioTimingInfo")),v.adtsStream.pipe(v.audioSegmentStream),v.trigger("trackinfo",{hasAudio:!!v.tracks.audio,hasVideo:!!v.tracks.video}))});v=Wj(v);v.metadataStream.on("data",v.trigger.bind(v,"id3Frame"));return v},Xj=function(D,v){D.on("data",v.trigger.bind(v,"data"));D.on("done",v.trigger.bind(v,"done"));D.on("partialdone",
v.trigger.bind(v,"partialdone"));D.on("endedtimeline",v.trigger.bind(v,"endedtimeline"));D.on("audioTimingInfo",v.trigger.bind(v,"audioTimingInfo"));D.on("videoTimingInfo",v.trigger.bind(v,"videoTimingInfo"));D.on("trackinfo",v.trigger.bind(v,"trackinfo"));D.on("id3Frame",function(F){F.dispatchType=D.metadataStream.dispatchType;F.cueTime=Ta.videoTsToSeconds(F.pts);v.trigger("id3Frame",F)});D.on("caption",function(F){v.trigger("caption",F)})},Yj=function F(v){var w=null,J=!0;v=v||{};F.prototype.init.call(this);
v.baseMediaDecodeTime=v.baseMediaDecodeTime||0;this.push=function(E){if(J){var O=Hn(E);!O||w&&"aac"===w.type?O||w&&"ts"===w.type||(w=In(v),Xj(w,this)):(w=Jn(v),Xj(w,this));J=!1}w.headOfPipeline.push(E)};this.flush=function(){w&&(J=!0,w.headOfPipeline.flush())};this.partialFlush=function(){w&&w.headOfPipeline.partialFlush()};this.endTimeline=function(){w&&w.headOfPipeline.endTimeline()};this.reset=function(){w&&w.headOfPipeline.reset()};this.setBaseMediaDecodeTime=function(E){v.keepOriginalTimestamps||
(v.baseMediaDecodeTime=E);w&&(w.tracks.audio&&(w.tracks.audio.timelineStartInfo.dts=void 0,w.tracks.audio.timelineStartInfo.pts=void 0,Da.clearDtsInfo(w.tracks.audio),w.audioRollover&&w.audioRollover.discontinuity()),w.tracks.video&&(w.videoSegmentStream&&(w.videoSegmentStream.gopCache_=[]),w.tracks.video.timelineStartInfo.dts=void 0,w.tracks.video.timelineStartInfo.pts=void 0,Da.clearDtsInfo(w.tracks.video)),w.timestampRollover&&w.timestampRollover.discontinuity())};this.setRemux=function(E){v.remux=
E;w&&w.coalesceStream&&w.coalesceStream.setRemux(E)};this.setAudioAppendStart=function(E){w&&w.tracks.audio&&w.audioSegmentStream&&w.audioSegmentStream.setAudioAppendStart(E)};this.alignGopsWith=function(E){}};Yj.prototype=new f;var td=function J(F,w){var E=[],O;if(!w.length)return null;for(O=0;O<F.byteLength;){var R=(F[O]<<24|F[O+1]<<16|F[O+2]<<8|F[O+3])>>>0;var Y=F.subarray(O+4,O+8);var Q=""+String.fromCharCode(Y[0]);Q+=String.fromCharCode(Y[1]);Q+=String.fromCharCode(Y[2]);Q+=String.fromCharCode(Y[3]);
R=1<R?O+R:F.byteLength;Q===w[0]&&(1===w.length?E.push(F.subarray(O+8,R)):(O=J(F.subarray(O+8,R),w.slice(1)),O.length&&(E=E.concat(O))));O=R}return E},Zj=function(F){return{isLeading:(F[0]&12)>>>2,dependsOn:F[0]&3,isDependedOn:(F[1]&192)>>>6,hasRedundancy:(F[1]&48)>>>4,paddingValue:(F[1]&14)>>>1,isNonSyncSample:F[1]&1,degradationPriority:F[2]<<8|F[3]}},Kn=function(F){var w={version:F[0],flags:new Uint8Array(F.subarray(1,4)),samples:[]},J=new DataView(F.buffer,F.byteOffset,F.byteLength),E=w.flags[2]&
1,O=w.flags[2]&4,R=w.flags[1]&1,Y=w.flags[1]&2,Q=w.flags[1]&4,V=w.flags[1]&8,ea=J.getUint32(4),aa=8;E&&(w.dataOffset=J.getInt32(aa),aa+=4);O&&ea&&(E={flags:Zj(F.subarray(aa,aa+4))},aa+=4,R&&(E.duration=J.getUint32(aa),aa+=4),Y&&(E.size=J.getUint32(aa),aa+=4),V&&(E.compositionTimeOffset=1===w.version?J.getInt32(aa):J.getUint32(aa),aa+=4),w.samples.push(E),ea--);for(;ea--;)E={},R&&(E.duration=J.getUint32(aa),aa+=4),Y&&(E.size=J.getUint32(aa),aa+=4),Q&&(E.flags=Zj(F.subarray(aa,aa+4)),aa+=4),V&&(E.compositionTimeOffset=
1===w.version?J.getInt32(aa):J.getUint32(aa),aa+=4),w.samples.push(E);return w},Ln=rd.discardEmulationPreventionBytes,Mn=function(F,w,J){var E=w,O=J.defaultSampleDuration||0,R=J.defaultSampleSize||0,Y=J.trackId,Q=[];F.forEach(function(V){V=Kn(V).samples;V.forEach(function(ea){void 0===ea.duration&&(ea.duration=O);void 0===ea.size&&(ea.size=R);ea.trackId=Y;ea.dts=E;void 0===ea.compositionTimeOffset&&(ea.compositionTimeOffset=0);ea.pts=E+ea.compositionTimeOffset;E+=ea.duration});Q=Q.concat(V)});return Q},
Nn=function(F,w){var J=td(F,["moof","traf"]),E={},O=[];td(F,["mdat"]).forEach(function(R,Y){O.push({mdat:R,traf:J[Y]})});O.forEach(function(R){var Y=R.mdat,Q=R.traf,V=td(Q,["tfhd"])[0];R=new DataView(V.buffer,V.byteOffset,V.byteLength);V={version:V[0],flags:new Uint8Array(V.subarray(1,4)),trackId:R.getUint32(4)};var ea=V.flags[2]&1,aa=V.flags[2]&2,la=V.flags[2]&8,ra=V.flags[2]&16,Ja=V.flags[2]&32,wb=V.flags[0]&65536,Fb=V.flags[0]&131072;var sa=8;ea&&(sa+=4,V.baseDataOffset=R.getUint32(12),sa+=4);
aa&&(V.sampleDescriptionIndex=R.getUint32(sa),sa+=4);la&&(V.defaultSampleDuration=R.getUint32(sa),sa+=4);ra&&(V.defaultSampleSize=R.getUint32(sa),sa+=4);Ja&&(V.defaultSampleFlags=R.getUint32(sa));wb&&(V.durationIsEmpty=!0);!ea&&Fb&&(V.baseDataOffsetIsMoof=!0);R=V.trackId;ea=td(Q,["tfdt"]);0<ea.length?(ea=ea[0],aa=ea[0],new Uint8Array(ea.subarray(1,4)),la=(ea[4]<<24|ea[5]<<16|ea[6]<<8|ea[7])>>>0,1===aa&&(la*=Math.pow(2,32),la+=(ea[8]<<24|ea[9]<<16|ea[10]<<8|ea[11])>>>0),ea=la):ea=0;Q=td(Q,["trun"]);
if(w===R&&0<Q.length){Q=Mn(Q,ea,V);V=new DataView(Y.buffer,Y.byteOffset,Y.byteLength);ea=[];for(aa=0;aa+4<Y.length;aa+=la)if(la=V.getUint32(aa),aa+=4,!(0>=la))switch(Y[aa]&31){case 6:ra=Y.subarray(aa+1,aa+1+la);a:{Ja=aa;for(wb=0;wb<Q.length;wb++){Fb=Q[wb];if(Ja<Fb.size){Ja=Fb;break a}Ja-=Fb.size}Ja=null}ra={nalUnitType:"sei_rbsp",size:la,data:ra,escapedRBSP:Ln(ra),trackId:R};if(Ja){ra.pts=Ja.pts;ra.dts=Ja.dts;var rg=Ja}else if(rg)ra.pts=rg.pts,ra.dts=rg.dts;else{console.log("We've encountered a nal unit without data. See mux.js#233.");
break}ea.push(ra)}E[R]||(E[R]=[]);E[R]=E[R].concat(ea)}});return E},On=function(){var F=!1,w,J,E,O,R,Y;this.isInitialized=function(){return F};this.init=function(Q){w=new ob;F=!0;Y=Q?Q.isPartial:!1;w.on("data",function(V){V.startTime=V.startPts/O;V.endTime=V.endPts/O;R.captions.push(V);R.captionStreams[V.stream]=!0})};this.isNewInit=function(Q,V){return Q&&0===Q.length||V&&"object"===typeof V&&0===Object.keys(V).length?!1:E!==Q[0]||O!==V[E]};this.parse=function(Q,V,ea){if(this.isInitialized()){if(!V||
!ea)return null;if(this.isNewInit(V,ea))E=V[0],O=ea[E];else if(null===E||!O)return J.push(Q),null}else return null;for(;0<J.length;){var aa=J.shift();this.parse(aa,V,ea)}V=E;ea=O;Q=null===V?null:{seiNals:Nn(Q,V)[V],timescale:ea};if(null===Q||!Q.seiNals)return null;this.pushNals(Q.seiNals);this.flushStream();return R};this.pushNals=function(Q){if(!this.isInitialized()||!Q||0===Q.length)return null;Q.forEach(function(V){w.push(V)})};this.flushStream=function(){if(!this.isInitialized())return null;Y?
w.partialFlush():w.flush()};this.clearParsedCaptions=function(){R.captions=[];R.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized())return null;w.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){J=[];O=E=null;R?this.clearParsedCaptions():R={captions:[],captionStreams:{}};this.resetCaptionStream()};this.reset()},sg=function(F){return"AudioSegmentStream"===F?"audio":"VideoSegmentStream"===F?"video":""},Pn=
function(F,w){w.on("data",function(J){var E=J.initSegment;J.initSegment={data:E.buffer,byteOffset:E.byteOffset,byteLength:E.byteLength};E=J.data;J.data=E.buffer;F.postMessage({action:"data",segment:J,byteOffset:E.byteOffset,byteLength:E.byteLength},[J.data])});w.on("done",function(J){F.postMessage({action:"done"})});w.on("gopInfo",function(J){F.postMessage({action:"gopInfo",gopInfo:J})});w.on("videoSegmentTimingInfo",function(J){var E={start:{decode:Ua(J.start.dts),presentation:Ua(J.start.pts)},end:{decode:Ua(J.end.dts),
presentation:Ua(J.end.pts)},baseMediaDecodeTime:Ua(J.baseMediaDecodeTime)};J.prependedContentDuration&&(E.prependedContentDuration=Ua(J.prependedContentDuration));F.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:E})});w.on("id3Frame",function(J){F.postMessage({action:"id3Frame",id3Frame:J})});w.on("caption",function(J){F.postMessage({action:"caption",caption:J})});w.on("trackinfo",function(J){F.postMessage({action:"trackinfo",trackInfo:J})});w.on("audioTimingInfo",function(J){F.postMessage({action:"audioTimingInfo",
audioTimingInfo:{start:Ua(J.start),end:Ua(J.end)}})});w.on("videoTimingInfo",function(J){F.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Ua(J.start),end:Ua(J.end)}})})},Qn=function(F,w){w.on("data",function(J){var E={boxes:{data:J.data.boxes.buffer,byteOffset:J.data.boxes.byteOffset,byteLength:J.data.boxes.byteLength},initSegment:{data:J.data.track.initSegment.buffer,byteOffset:J.data.track.initSegment.byteOffset,byteLength:J.data.track.initSegment.byteLength},type:J.type,sequence:J.data.sequence};
"undefined"!==typeof J.data.videoFrameDts&&(E.videoFrameDtsTime=Ua(J.data.videoFrameDts));"undefined"!==typeof J.data.videoFramePts&&(E.videoFramePtsTime=Ua(J.data.videoFramePts));F.postMessage({action:"data",segment:E},[E.boxes.data,E.initSegment.data])});w.on("id3Frame",function(J){F.postMessage({action:"id3Frame",id3Frame:J})});w.on("caption",function(J){F.postMessage({action:"caption",caption:J})});w.on("done",function(J){F.postMessage({action:"done",type:sg(J)})});w.on("partialdone",function(J){F.postMessage({action:"partialdone",
type:sg(J)})});w.on("endedsegment",function(J){F.postMessage({action:"endedSegment",type:sg(J)})});w.on("trackinfo",function(J){F.postMessage({action:"trackinfo",trackInfo:J})});w.on("audioTimingInfo",function(J){if(null===J.start)F.postMessage({action:"audioTimingInfo",audioTimingInfo:J});else{var E={start:Ua(J.start)};J.end&&(E.end=Ua(J.end));F.postMessage({action:"audioTimingInfo",audioTimingInfo:E})}});w.on("videoTimingInfo",function(J){var E={start:Ua(J.start)};J.end&&(E.end=Ua(J.end));F.postMessage({action:"videoTimingInfo",
videoTimingInfo:E})})},ak=function(){function F(J,E){this.options=E||{};this.self=J;this.init()}var w=F.prototype;w.init=function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=this.options.handlePartialData?new Yj(this.options):new pg(this.options);this.options.handlePartialData?Qn(this.self,this.transmuxer):Pn(this.self,this.transmuxer)};w.pushMp4Captions=function(J){this.captionParser||(this.captionParser=new On,this.captionParser.init());var E=new Uint8Array(J.data,J.byteOffset,
J.byteLength);J=this.captionParser.parse(E,J.trackIds,J.timescales);this.self.postMessage({action:"mp4Captions",captions:J&&J.captions||[],data:E.buffer},[E.buffer])};w.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()};w.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()};w.push=function(J){J=new Uint8Array(J.data,J.byteOffset,J.byteLength);this.transmuxer.push(J)};w.reset=function(){this.transmuxer.reset()};w.setTimestampOffset=
function(J){this.transmuxer.setBaseMediaDecodeTime(Math.round(Nj(J.timestampOffset||0)))};w.setAudioAppendStart=function(J){this.transmuxer.setAudioAppendStart(Math.ceil(Nj(J.appendStart)))};w.setRemux=function(J){this.transmuxer.setRemux(J.remux)};w.flush=function(J){this.transmuxer.flush();k.postMessage({action:"done",type:"transmuxed"})};w.partialFlush=function(J){this.transmuxer.partialFlush();k.postMessage({action:"partialdone",type:"transmuxed"})};w.endTimeline=function(){this.transmuxer.endTimeline();
k.postMessage({action:"endedtimeline",type:"transmuxed"})};w.alignGopsWith=function(J){this.transmuxer.alignGopsWith(J.gopsToAlignWith.slice())};return F}();return new function(F){F.onmessage=function(w){if("init"===w.data.action&&w.data.options)this.messageHandlers=new ak(F,w.data.options);else if(this.messageHandlers||(this.messageHandlers=new ak(F)),w.data&&w.data.action&&"init"!==w.data.action&&this.messageHandlers[w.data.action])this.messageHandlers[w.data.action](w.data)}}(k)})()}),bk=function(g,
l){l=l.attributes||{};return g&&g.mediaGroups&&g.mediaGroups.AUDIO&&l.AUDIO&&g.mediaGroups.AUDIO[l.AUDIO]},ud=function(g,l){var k=l.attributes||{};var f=l.attributes||{};f=f.CODECS?nd(f.CODECS):void 0;f=f||{};if(bk(g,l)&&!f.audio){a:if(bk(g,l)){l=g.mediaGroups.AUDIO[(l.attributes||{}).AUDIO];for(h in l)if(!l[h].uri&&!l[h].playlists){var h=!0;break a}h=!1}else h=!0;!h&&(g=Em(g,k.AUDIO))&&(f.audio=g.audio)}g={};f.video&&(g.video=dj(""+f.video.type+f.video.details));f.audio&&(g.audio=dj(""+f.audio.type+
f.audio.details));return g},Sc=function(g){return K.log.debug?K.log.debug.bind(K,"VHS:",g+" \x3e"):function(){}},se=Sc("PlaylistSelector"),ck=function(g){if(g&&g.playlist){var l=g.playlist;return JSON.stringify({id:l.id,bandwidth:g.bandwidth,width:g.width,height:g.height,codecs:l.attributes&&l.attributes.CODECS||""})}},dk=function(g,l){return g?(g=G.getComputedStyle(g))?g[l]:"":""},vd=function(g,l){var k=g.slice();g.sort(function(f,h){var m=l(f,h);return 0===m?k.indexOf(f)-k.indexOf(h):m})},tg=function(g,
l){if(g.attributes.BANDWIDTH)var k=g.attributes.BANDWIDTH;k=k||G.Number.MAX_VALUE;if(l.attributes.BANDWIDTH)var f=l.attributes.BANDWIDTH;f=f||G.Number.MAX_VALUE;return k-f},Sn=function(g,l,k,f,h){var m={bandwidth:l,width:k,height:f,limitRenditionByPlayerDimensions:h},p=g.playlists.map(function(I){var M=I.attributes.RESOLUTION&&I.attributes.RESOLUTION.width,L=I.attributes.RESOLUTION&&I.attributes.RESOLUTION.height;var S=(S=I.attributes.BANDWIDTH)||G.Number.MAX_VALUE;return{bandwidth:S,width:M,height:L,
playlist:I}});vd(p,function(I,M){return I.bandwidth-M.bandwidth});p=p.filter(function(I){return!gb.isIncompatible(I.playlist)});g=p.filter(function(I){return gb.isEnabled(I.playlist)});g.length||(g=p.filter(function(I){return!gb.isDisabled(I.playlist)}));var q=g.filter(function(I){return I.bandwidth*hb.BANDWIDTH_VARIANCE<l}),r=q[q.length-1],u=q.filter(function(I){return I.bandwidth===r.bandwidth})[0];if(!1===h){var y=u||g[0]||p[0];if(y&&y.playlist)return p="sortedPlaylistReps",u&&(p="bandwidthBestRep"),
g[0]&&(p="enabledPlaylistReps"),se("choosing "+ck(y)+" using "+p+" with options",m),y.playlist;se("could not choose a playlist with options",m);return null}q=q.filter(function(I){return I.width&&I.height});vd(q,function(I,M){return I.width-M.width});h=q.filter(function(I){return I.width===k&&I.height===f});r=h[h.length-1];h=h.filter(function(I){return I.bandwidth===r.bandwidth})[0];if(!h){var B=q.filter(function(I){return I.width>k||I.height>f});y=B.filter(function(I){return I.width===B[0].width&&
I.height===B[0].height});r=y[y.length-1];y=y.filter(function(I){return I.bandwidth===r.bandwidth})[0]}if((p=y||h||u||g[0]||p[0])&&p.playlist)return q="sortedPlaylistReps",y?q="resolutionPlusOneRep":h?q="resolutionBestRep":u?q="bandwidthBestRep":g[0]&&(q="enabledPlaylistReps"),se("choosing "+ck(p)+" using "+q+" with options",m),p.playlist;se("could not choose a playlist with options",m);return null},Tn=function(g){var l=g.currentTime,k=g.bandwidth,f=g.duration,h=g.segmentDuration,m=g.timeUntilRebuffer,
p=g.currentTimeline,q=g.syncController;g=g.master.playlists.filter(function(u){return!gb.isIncompatible(u)});var r=g.filter(gb.isEnabled);r.length||(r=g.filter(function(u){return!gb.isDisabled(u)}));g=r.filter(gb.hasAttribute.bind(null,"BANDWIDTH")).map(function(u){var y=q.getSyncPoint(u,f,p,l)?1:2;y=gb.estimateSegmentRequestTime(h,k,u)*y-m;return{playlist:u,rebufferingImpact:y}});r=g.filter(function(u){return 0>=u.rebufferingImpact});vd(r,function(u,y){return tg(y.playlist,u.playlist)});if(r.length)return r[0];
vd(g,function(u,y){return u.rebufferingImpact-y.rebufferingImpact});return g[0]||null},Un=function(g){var l=g.inbandTextTracks,k=g.captionArray,f=g.timestampOffset;if(k){var h=G.WebKitDataCue||G.VTTCue;k.forEach(function(m){l[m.stream].addCue(new h(m.startTime+f,m.endTime+f,m.text))})}},Vn=function(g){Object.defineProperties(g.frame,{id:{get:function(){K.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return g.value.key}},value:{get:function(){K.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");
return g.value.data}},privateData:{get:function(){K.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return g.value.data}}})},Wn=function(g){var l=g.metadataArray,k=g.timestampOffset,f=g.videoDuration;if(l){var h=G.WebKitDataCue||G.VTTCue,m=g.inbandTextTracks.metadataTrack_;if(m&&(l.forEach(function(u){var y=u.cueTime+k;!("number"!==typeof y||G.isNaN(y)||0>y)&&Infinity>y&&u.frames.forEach(function(B){var I=new h(y,y,B.value||B.url||B.data||"");I.frame=B;I.value=B;Vn(I);
m.addCue(I)})}),m.cues&&m.cues.length)){g=m.cues;l=[];for(var p=0;p<g.length;p++)g[p]&&l.push(g[p]);var q=l.reduce(function(u,y){var B=u[y.startTime]||[];B.push(y);u[y.startTime]=B;return u},{}),r=Object.keys(q).sort(function(u,y){return Number(u)-Number(y)});r.forEach(function(u,y){var B=Number(r[y+1])||f;q[u].forEach(function(I){I.endTime=B})})}}},wd=function(g,l,k){var f;if(k&&k.cues)for(f=k.cues.length;f--;){var h=k.cues[f];h.startTime>=g&&h.endTime<=l&&k.removeCue(h)}},Xn=function(g,l,k,f){l=
Math.ceil(9E4*(l-f));var h=Math.ceil(9E4*(k-f));k=g.slice();for(f=g.length;f--&&!(g[f].pts<=h););if(-1===f)return k;for(h=f+1;h--&&!(g[h].pts<=l););h=Math.max(h,0);k.splice(h,f-h+1);return k},Yn=function(g,l){if(!g&&!l||!g&&l||g&&!l)return!1;if(g===l)return!0;var k=Object.keys(g).sort(),f=Object.keys(l).sort();if(k.length!==f.length)return!1;for(var h=0;h<k.length;h++){var m=k[h];if(m!==f[h]||g[m]!==l[m])return!1}return!0},ek=function(g){var l=g.segmentTimeline,k=g.currentTimeline,f=g.startOfSegment,
h=g.buffered;return g.overrideCheck||l!==k?h.length?h.end(h.length-1):f:null},fk=function(g){var l=g.timelineChangeController,k=g.segmentTimeline,f=g.loaderType,h=g.audioDisabled;return g.currentTimeline===k?!1:"audio"===f?(g=l.lastTimelineChange({type:"main"}),!g||g.to!==k):"main"===f&&h?(g=l.pendingTimelineChange({type:"audio"}))&&g.to===k?!1:!0:!1},ug=function(g){function l(f,h){var m=g.call(this)||this;if(!f)throw new TypeError("Initialization settings are required");if("function"!==typeof f.currentTime)throw new TypeError("No currentTime getter specified");
if(!f.mediaSource)throw new TypeError("No MediaSource specified");m.bandwidth=f.bandwidth;m.throughput={rate:0,count:0};m.roundTrip=NaN;m.resetStats_();m.mediaIndex=null;m.hasPlayed_=f.hasPlayed;m.currentTime_=f.currentTime;m.seekable_=f.seekable;m.seeking_=f.seeking;m.duration_=f.duration;m.mediaSource_=f.mediaSource;m.vhs_=f.vhs;m.loaderType_=f.loaderType;m.currentMediaInfo_=void 0;m.startingMediaInfo_=void 0;m.segmentMetadataTrack_=f.segmentMetadataTrack;m.goalBufferLength_=f.goalBufferLength;
m.sourceType_=f.sourceType;m.sourceUpdater_=f.sourceUpdater;m.inbandTextTracks_=f.inbandTextTracks;m.state_="INIT";m.handlePartialData_=f.handlePartialData;m.timelineChangeController_=f.timelineChangeController;m.shouldSaveSegmentTimingInfo_=!0;m.checkBufferTimeout_=null;m.error_=void 0;m.currentTimeline_=-1;m.pendingSegment_=null;m.xhrOptions_=null;m.pendingSegments_=[];m.audioDisabled_=!1;m.isPendingTimestampOffset_=!1;m.gopBuffer_=[];m.timeMapping_=0;m.safeAppend_=11<=K.browser.IE_VERSION;m.appendInitSegment_=
{audio:!0,video:!0};m.playlistOfLastInitSegment_={audio:null,video:null};m.callQueue_=[];m.loadQueue_=[];m.metadataQueue_={id3:[],caption:[]};m.activeInitSegmentId_=null;m.initSegments_={};m.cacheEncryptionKeys_=f.cacheEncryptionKeys;m.keyCache_={};m.decrypter_=f.decrypter;m.syncController_=f.syncController;m.syncPoint_={segmentIndex:0,time:0};m.transmuxer_=m.createTransmuxer_();m.triggerSyncInfoUpdate_=function(){return m.trigger("syncinfoupdate")};m.syncController_.on("syncinfoupdate",m.triggerSyncInfoUpdate_);
m.mediaSource_.addEventListener("sourceopen",function(){m.isEndOfStream_()||(m.ended_=!1)});m.fetchAtBuffer_=!1;m.logger_=Sc("SegmentLoader["+m.loaderType_+"]");Object.defineProperty(ia(m),"state",{get:function(){return this.state_},set:function(p){p!==this.state_&&(this.logger_(this.state_+" -\x3e "+p),this.state_=p,this.trigger("statechange"))}});m.sourceUpdater_.on("ready",function(){m.hasEnoughInfoToAppend_()&&m.processCallQueue_()});if("main"===m.loaderType_)m.timelineChangeController_.on("pendingtimelinechange",
function(){m.hasEnoughInfoToAppend_()&&m.processCallQueue_()});if("audio"===m.loaderType_)m.timelineChangeController_.on("timelinechange",function(){m.hasEnoughInfoToLoad_()&&m.processLoadQueue_();m.hasEnoughInfoToAppend_()&&m.processCallQueue_()});return m}Z(l,g);var k=l.prototype;k.createTransmuxer_=function(){var f=new Rn;f.postMessage({action:"init",options:{remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,handlePartialData:this.handlePartialData_}});return f};k.resetStats_=
function(){this.mediaSecondsLoaded=this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=this.mediaBytesTransferred=0};k.dispose=function(){this.trigger("dispose");this.state="DISPOSED";this.pause();this.abort_();this.transmuxer_&&(this.transmuxer_.terminate(),je.dispose());this.resetStats_();this.checkBufferTimeout_&&G.clearTimeout(this.checkBufferTimeout_);this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",
this.triggerSyncInfoUpdate_);this.off()};k.setAudio=function(f){this.audioDisabled_=!f;f?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())};k.abort=function(){"WAITING"!==this.state?this.pendingSegment_&&(this.pendingSegment_=null):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())};k.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests();this.pendingSegment_=null;this.callQueue_=[];this.loadQueue_=
[];this.metadataQueue_.id3=[];this.metadataQueue_.caption=[];this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_)};k.checkForAbort_=function(f){return"APPENDING"!==this.state||this.pendingSegment_?this.pendingSegment_&&this.pendingSegment_.requestId===f?!1:!0:(this.state="READY",!0)};k.error=function(f){"undefined"!==typeof f&&(this.logger_("error occurred:",f),this.error_=f);this.pendingSegment_=null;return this.error_};k.endOfStream=function(){this.ended_=!0;this.transmuxer_&&
je.reset(this.transmuxer_);this.gopBuffer_.length=0;this.pause();this.trigger("ended")};k.buffered_=function(){if(!this.sourceUpdater_||!this.startingMediaInfo_)return K.createTimeRanges();if("main"===this.loaderType_){var f=this.startingMediaInfo_,h=f.hasAudio,m=f.hasVideo;f=f.isMuxed;if(m&&h&&!this.audioDisabled_&&!f)return this.sourceUpdater_.buffered();if(m)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()};k.initSegmentForMap=function(f,h){void 0===h&&(h=!1);
if(!f)return null;var m=he(f),p=this.initSegments_[m];h&&!p&&f.bytes&&(this.initSegments_[m]=p={resolvedUri:f.resolvedUri,byterange:f.byterange,bytes:f.bytes,tracks:f.tracks,timescales:f.timescales});return p||f};k.segmentKey=function(f,h){void 0===h&&(h=!1);if(!f)return null;var m=f.resolvedUri,p=this.keyCache_[m];this.cacheEncryptionKeys_&&h&&!p&&f.bytes&&(this.keyCache_[m]=p={resolvedUri:f.resolvedUri,bytes:f.bytes});f={resolvedUri:(p||f).resolvedUri};p&&(f.bytes=p.bytes);return f};k.couldBeginLoading_=
function(){return this.playlist_&&!this.paused()};k.load=function(){this.monitorBuffer_();if(this.playlist_){this.syncController_.setDateTimeMapping(this.playlist_);if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}};k.init_=function(){this.state="READY";this.resetEverything();return this.monitorBuffer_()};k.playlist=function(f,h){void 0===h&&(h={});if(f){var m=this.playlist_,p=this.pendingSegment_;
this.playlist_=f;this.xhrOptions_=h;"INIT"===this.state&&(f.syncInfo={mediaSequence:f.mediaSequence,time:0});h=null;m&&(m.id?h=m.id:m.uri&&(h=m.uri));this.logger_("playlist update ["+h+" \x3d\x3e "+(f.id||f.uri)+"]");this.trigger("syncinfoupdate");if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();m&&m.uri===f.uri?(h=f.mediaSequence-m.mediaSequence,this.logger_("live window shift ["+h+"]"),null!==this.mediaIndex&&(this.mediaIndex-=h),p&&(p.mediaIndex-=h,0<=p.mediaIndex&&(p.segment=
f.segments[p.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(m,f)):((null!==this.mediaIndex||this.handlePartialData_)&&this.resyncLoader(),this.currentMediaInfo_=void 0,this.trigger("playlistupdate"))}};k.pause=function(){this.checkBufferTimeout_&&(G.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)};k.paused=function(){return null===this.checkBufferTimeout_};k.resetEverything=function(f){this.ended_=!1;this.appendInitSegment_={audio:!0,video:!0};this.resetLoader();this.remove(0,
Infinity,f);this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})};k.resetLoader=function(){this.fetchAtBuffer_=!1;this.resyncLoader()};k.resyncLoader=function(){this.transmuxer_&&je.reset(this.transmuxer_);this.syncPoint_=this.mediaIndex=null;this.isPendingTimestampOffset_=!1;this.callQueue_=[];this.loadQueue_=[];this.metadataQueue_.id3=[];this.metadataQueue_.caption=[];this.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})};k.remove=
function(f,h,m){void 0===m&&(m=function(){});Infinity===h&&(h=this.duration_());if(this.sourceUpdater_&&this.currentMediaInfo_){var p=1,q=function(){p--;0===p&&m()};this.audioDisabled_||(p++,this.sourceUpdater_.removeAudio(f,h,q));"main"===this.loaderType_&&this.currentMediaInfo_&&this.currentMediaInfo_.hasVideo&&(this.gopBuffer_=Xn(this.gopBuffer_,f,h,this.timeMapping_),p++,this.sourceUpdater_.removeVideo(f,h,q));for(var r in this.inbandTextTracks_)wd(f,h,this.inbandTextTracks_[r]);wd(f,h,this.segmentMetadataTrack_);
q()}};k.monitorBuffer_=function(){this.checkBufferTimeout_&&G.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=G.setTimeout(this.monitorBufferTick_.bind(this),1)};k.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_();this.checkBufferTimeout_&&G.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=G.setTimeout(this.monitorBufferTick_.bind(this),500)};k.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,
this.duration_(),this.currentTimeline_,this.currentTime_()));var f=this.buffered_(),h=this.checkBuffer_(f,this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);h&&(h.timestampOffset=ek({segmentTimeline:h.timeline,currentTimeline:this.currentTimeline_,startOfSegment:h.startOfSegment,buffered:f,overrideCheck:this.isPendingTimestampOffset_}),this.isPendingTimestampOffset_=!1,"number"===typeof h.timestampOffset&&this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,
from:this.currentTimeline_,to:h.timeline}),this.loadSegment_(h))}};k.isEndOfStream_=function(f,h){void 0===f&&(f=this.mediaIndex);void 0===h&&(h=this.playlist_);if(!h||!this.mediaSource_)return!1;f=f+1===h.segments.length;return h.endList&&"open"===this.mediaSource_.readyState&&f};k.checkBuffer_=function(f,h,m,p,q,r){var u=0;f.length&&(u=f.end(f.length-1));f=Math.max(0,u-q);if(!h.segments.length||f>=this.goalBufferLength_()||!p&&1<=f)return null;p=!1;if(null===r)u=this.getSyncSegmentCandidate_(h),
p=!0;else if(null!==m){var y=(y=h.segments[m])&&y.end?y.end:u;u=m+1}else this.fetchAtBuffer_?(y=gb.getMediaInfoForTime(h,u,r.segmentIndex,r.time),u=y.mediaIndex,y=y.startTime):(y=gb.getMediaInfoForTime(h,q,r.segmentIndex,r.time),u=y.mediaIndex,y=y.startTime);if((q=this.generateSegmentInfo_(h,u,y,p))&&(!this.mediaSource_||!this.playlist_||q.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_()))return this.logger_("checkBuffer_ returning "+q.uri,{segmentInfo:q,
playlist:h,currentMediaIndex:m,nextMediaIndex:u,startOfSegment:y,isSyncRequest:p}),q};k.getSyncSegmentCandidate_=function(f){var h=this;if(-1===this.currentTimeline_)return 0;var m=f.segments.map(function(p,q){return{timeline:p.timeline,segmentIndex:q}}).filter(function(p){return p.timeline===h.currentTimeline_});return m.length?m[Math.min(m.length-1,1)].segmentIndex:Math.max(f.segments.length-1,0)};k.generateSegmentInfo_=function(f,h,m,p){if(0>h||h>=f.segments.length)return null;var q=f.segments[h],
r=this.sourceUpdater_.audioBuffered(),u=this.sourceUpdater_.videoBuffered(),y,B;r.length&&(y=r.end(r.length-1)-this.sourceUpdater_.audioTimestampOffset());if(u.length)if(r=this.gopBuffer_,u=this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),"undefined"!==typeof u&&null!==u&&r.length){u=Math.ceil(9E4*(u-this.timeMapping_+3));for(B=0;B<r.length&&!(r[B].pts>u);B++);B=r.slice(B)}else B=[];return{requestId:"segment-loader-"+Math.random(),uri:q.resolvedUri,mediaIndex:h,isSyncRequest:p,startOfSegment:m,
playlist:f,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:q.timeline,duration:q.duration,segment:q,byteLength:0,transmuxer:this.transmuxer_,audioAppendStart:y,gopsToAlignWith:B}};k.abortRequestEarly_=function(f){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||1E3>Date.now()-(f.firstBytesReceivedAt||Date.now()))return!1;var h=this.currentTime_(),m=f.bandwidth,p=this.pendingSegment_.duration;f=gb.estimateSegmentRequestTime(p,m,this.playlist_,
f.bytesReceived);var q=this.buffered_(),r=this.vhs_.tech_.playbackRate();void 0===r&&(r=1);q=((q.length?q.end(q.length-1):0)-h)/r-1;if(f<=q)return!1;if(h=Tn({master:this.vhs_.playlists.master,currentTime:h,bandwidth:m,duration:this.duration_(),segmentDuration:p,timeUntilRebuffer:q,currentTimeline:this.currentTimeline_,syncController:this.syncController_})){m=f-q-h.rebufferingImpact;p=.5;q<=Oc&&(p=1);if(!h.playlist||h.playlist.uri===this.playlist_.uri||m<p)return!1;this.bandwidth=h.playlist.attributes.BANDWIDTH*
hb.BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return!0}};k.handleAbort_=function(){this.mediaRequestsAborted+=1};k.handleProgress_=function(f,h){this.checkForAbort_(h.requestId)||this.abortRequestEarly_(h.stats)||this.trigger("progress")};k.handleTrackInfo_=function(f,h){this.checkForAbort_(f.requestId)||this.abortRequestEarly_(f.stats)||this.checkForIllegalMediaSwitch(h)||(h=h||{},Yn(this.currentMediaInfo_,h)||(this.appendInitSegment_={audio:!0,video:!0},this.currentMediaInfo_=
this.startingMediaInfo_=h,this.logger_("trackinfo update",h),this.trigger("trackinfo")),this.checkForAbort_(f.requestId)||this.abortRequestEarly_(f.stats)||(this.pendingSegment_.trackInfo=h,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))};k.handleTimingInfo_=function(f,h,m,p){if(!this.checkForAbort_(f.requestId)&&!this.abortRequestEarly_(f.stats)){f=this.pendingSegment_;var q=h+"TimingInfo";f[q]=f[q]||{};f[q][m]=p;this.logger_("timinginfo: "+h+" - "+m+" - "+p);this.hasEnoughInfoToAppend_()&&
this.processCallQueue_()}};k.handleCaptions_=function(f,h){var m=this;if(!this.checkForAbort_(f.requestId)&&!this.abortRequestEarly_(f.stats))if(0===h.length)this.logger_("SegmentLoader received no captions from a caption event");else if(this.pendingSegment_.hasAppendedData_){var p=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),q={};h.forEach(function(r){q[r.stream]=q[r.stream]||{startTime:Infinity,captions:[],
endTime:0};var u=q[r.stream];u.startTime=Math.min(u.startTime,r.startTime+p);u.endTime=Math.max(u.endTime,r.endTime+p);u.captions.push(r)});Object.keys(q).forEach(function(r){var u=q[r],y=u.startTime,B=u.endTime;u=u.captions;var I=m.inbandTextTracks_;m.logger_("adding cues from "+y+" -\x3e "+B+" for "+r);var M=m.vhs_.tech_;if(!I[r]){M.trigger({type:"usage",name:"vhs-608"});M.trigger({type:"usage",name:"hls-608"});var L=M.textTracks().getTrackById(r);I[r]=L?L:M.addRemoteTextTrack({kind:"captions",
id:r,label:r},!1).track}wd(y,B,I[r]);Un({captionArray:u,inbandTextTracks:I,timestampOffset:p})});this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,f,h))};k.handleId3_=function(f,h,m){if(!this.checkForAbort_(f.requestId)&&!this.abortRequestEarly_(f.stats))if(this.pendingSegment_.hasAppendedData_){f=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();
var p=this.inbandTextTracks_;p.metadataTrack_||(p.metadataTrack_=this.vhs_.tech_.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,p.metadataTrack_.inBandMetadataTrackDispatchType=m);Wn({inbandTextTracks:this.inbandTextTracks_,metadataArray:h,timestampOffset:f,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,f,h,m))};k.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(f){return f()});this.metadataQueue_.caption.forEach(function(f){return f()});
this.metadataQueue_.id3=[];this.metadataQueue_.caption=[]};k.processCallQueue_=function(){var f=this.callQueue_;this.callQueue_=[];f.forEach(function(h){return h()})};k.processLoadQueue_=function(){var f=this.loadQueue_;this.loadQueue_=[];f.forEach(function(h){return h()})};k.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var f=this.pendingSegment_;return f?this.currentMediaInfo_?fk({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,
segmentTimeline:f.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})?!1:!0:!0:!1};k.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;var f=this.pendingSegment_;if(!f||!f.trackInfo)return!1;if(!this.handlePartialData_){var h=this.currentMediaInfo_,m=h.isMuxed;if(h.hasVideo&&!f.videoTimingInfo||h.hasAudio&&!this.audioDisabled_&&!m&&!f.audioTimingInfo)return!1}return fk({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,
segmentTimeline:f.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})?!1:!0};k.handleData_=function(f,h){if(!this.checkForAbort_(f.requestId)&&!this.abortRequestEarly_(f.stats))if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())this.callQueue_.push(this.handleData_.bind(this,f,h));else{var m=this.pendingSegment_;this.setTimeMapping_(m.timeline);this.updateMediaSecondsLoaded_(m.segment);if("closed"!==this.mediaSource_.readyState){f.map&&(f.map=this.initSegmentForMap(f.map,
!0),m.segment.map=f.map);f.key&&this.segmentKey(f.key,!0);m.isFmp4=f.isFmp4;m.timingInfo=m.timingInfo||{};if(m.isFmp4)this.trigger("fmp4"),m.timingInfo.start=m[h.type+"TimingInfo"].start;else{f="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo;var p;f&&(p=this.handlePartialData_?h.videoFramePtsTime:m.videoTimingInfo.start);m.timingInfo.start=this.trueSegmentStart_({currentStart:m.timingInfo.start,playlist:m.playlist,mediaIndex:m.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),
useVideoTimingInfo:f,firstVideoFrameTimeForData:p,videoTimingInfo:m.videoTimingInfo,audioTimingInfo:m.audioTimingInfo})}this.updateAppendInitSegmentStatus(m,h.type);this.updateSourceBufferTimestampOffset_(m);m.hasAppendedData_=!0;this.processMetadataQueue_();this.appendData_(m,h)}}};k.updateAppendInitSegmentStatus=function(f,h){"main"!==this.loaderType_||"number"!==typeof f.timestampOffset||f.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0});this.playlistOfLastInitSegment_[h]!==
f.playlist&&(this.appendInitSegment_[h]=!0)};k.getInitSegmentAndUpdateState_=function(f){var h=f.type,m=f.initSegment,p=f.map;f=f.playlist;if(p){var q=he(p);if(this.activeInitSegmentId_===q)return null;m=this.initSegmentForMap(p,!0).bytes;this.activeInitSegmentId_=q}return m&&this.appendInitSegment_[h]?(this.playlistOfLastInitSegment_[h]=f,this.appendInitSegment_[h]=p?!0:!1,this.activeInitSegmentId_=null,m):null};k.appendToSourceBuffer_=function(f){var h=this,m=f.segmentInfo,p=f.type,q=f.initSegment,
r=f.data;f=[r];r=r.byteLength;q&&(f.unshift(q),r+=q.byteLength);var u=cn({bytes:r,segments:f});this.sourceUpdater_.appendBuffer({segmentInfo:m,type:p,bytes:u},function(y){y&&(h.error(p+" append of "+u.length+"b failed for segment #"+m.mediaIndex+" in playlist "+m.playlist.id),h.trigger("appenderror"))})};k.handleVideoSegmentTimingInfo_=function(f,h){this.pendingSegment_&&f===this.pendingSegment_.requestId&&(f=this.pendingSegment_.segment,f.videoTimingInfo||(f.videoTimingInfo={}),f.videoTimingInfo.transmuxerPrependedSeconds=
h.prependedContentDuration||0,f.videoTimingInfo.transmuxedPresentationStart=h.start.presentation,f.videoTimingInfo.transmuxedPresentationEnd=h.end.presentation,f.videoTimingInfo.baseMediaDecodeTime=h.baseMediaDecodeTime)};k.appendData_=function(f,h){var m=h.type,p=h.data;!p||!p.byteLength||"audio"===m&&this.audioDisabled_||(h=this.getInitSegmentAndUpdateState_({type:m,initSegment:h.initSegment,playlist:f.playlist,map:f.isFmp4?f.segment.map:null}),this.appendToSourceBuffer_({segmentInfo:f,type:m,initSegment:h,
data:p}))};k.loadSegment_=function(f){var h=this;this.state="WAITING";this.pendingSegment_=f;this.trimBackBuffer_(f);"number"===typeof f.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"});this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(f):this.loadQueue_.push(function(){var m=h.buffered_();"number"===typeof f.timestampOffset&&(f.timestampOffset=ek({segmentTimeline:f.timeline,currentTimeline:h.currentTimeline_,startOfSegment:f.startOfSegment,
buffered:m,overrideCheck:!0}));delete f.audioAppendStart;m=h.sourceUpdater_.audioBuffered();m.length&&(f.audioAppendStart=m.end(m.length-1)-h.sourceUpdater_.audioTimestampOffset());h.updateTransmuxerAndRequestSegment_(f)})};k.updateTransmuxerAndRequestSegment_=function(f){this.shouldUpdateTransmuxerTimestampOffset_(f.timestampOffset)&&(this.gopBuffer_.length=0,f.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",
timestampOffset:f.timestampOffset}));var h=this.createSimplifiedSegmentObj_(f);f.abortRequests=mn({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:h,handlePartialData:this.handlePartialData_,abortFn:this.handleAbort_.bind(this),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleVideoSegmentTimingInfo_.bind(this,f.requestId),captionsFn:this.handleCaptions_.bind(this),
id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this)})};k.trimBackBuffer_=function(f){f=this.seekable_();var h=this.currentTime_(),m=this.playlist_.targetDuration||10,p=h-hb.BACK_BUFFER_LENGTH;f.length&&(p=Math.max(p,f.start(0)));f=Math.min(h-m,p);0<f&&this.remove(0,f)};k.createSimplifiedSegmentObj_=function(f){var h=f.segment,m={resolvedUri:h.resolvedUri,byterange:h.byterange,requestId:f.requestId,transmuxer:f.transmuxer,audioAppendStart:f.audioAppendStart,
gopsToAlignWith:f.gopsToAlignWith},p=f.playlist.segments[f.mediaIndex];p&&p.end&&p.timeline===h.timeline&&(m.baseStartTime=p.end+f.timestampOffset);h.key&&(f=h.key.iv||new Uint32Array([0,0,0,f.mediaIndex+f.playlist.mediaSequence]),m.key=this.segmentKey(h.key),m.key.iv=f);h.map&&(m.map=this.initSegmentForMap(h.map));return m};k.saveTransferStats_=function(f){this.mediaRequests+=1;f&&(this.mediaBytesTransferred+=f.bytesReceived,this.mediaTransferDuration+=f.roundTripTime)};k.saveBandwidthRelatedStats_=
function(f){this.bandwidth=f.bandwidth;this.roundTrip=f.roundTripTime;this.pendingSegment_.byteLength=f.bytesReceived};k.handleTimeout_=function(){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger("bandwidthupdate")};k.segmentRequestFinished_=function(f,h,m){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,f,h,m));else if(this.saveTransferStats_(h.stats),this.pendingSegment_&&h.requestId===this.pendingSegment_.requestId)if(f)this.pendingSegment_=
null,this.state="READY",-102!==f.code&&(this.pause(),-101===f.code?this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(f),this.trigger("error")));else{this.saveBandwidthRelatedStats_(h.stats);f=this.pendingSegment_;f.endOfAllRequests=h.endOfAllRequests;if(m.gopInfo){h=this.gopBuffer_;m=m.gopInfo;if(m.length)if(this.safeAppend_)h=m.slice();else{var p=m[0].pts,q=0;for(q;q<h.length&&!(h[q].pts>=p);q++);h=h.slice(0,q).concat(m)}this.gopBuffer_=h}this.state="APPENDING";h=this.isEndOfStream_(f.mediaIndex,
f.playlist);m=null!==this.mediaIndex;p=f.timeline!==this.currentTimeline_&&0<f.timeline;!f.isFmp4&&(h||m&&p)&&je.endTimeline(this.transmuxer_);this.trigger("appending");this.waitForAppendsToComplete_(f)}};k.setTimeMapping_=function(f){f=this.syncController_.mappingForTimeline(f);null!==f&&(this.timeMapping_=f)};k.updateMediaSecondsLoaded_=function(f){this.mediaSecondsLoaded="number"===typeof f.start&&"number"===typeof f.end?this.mediaSecondsLoaded+(f.end-f.start):this.mediaSecondsLoaded+f.duration};
k.shouldUpdateTransmuxerTimestampOffset_=function(f){return null===f?!1:"main"===this.loaderType_&&f!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&f!==this.sourceUpdater_.audioTimestampOffset()?!0:!1};k.trueSegmentStart_=function(f){var h=f.currentStart,m=f.mediaIndex,p=f.firstVideoFrameTimeForData,q=f.currentVideoTimestampOffset,r=f.audioTimingInfo;if("undefined"!==typeof h)return h;if(!f.useVideoTimingInfo)return r.start;h=f.playlist.segments[m-1];return 0!==m&&h&&"undefined"!==
typeof h.start&&h.end===p+q?f.videoTimingInfo.start:p};k.waitForAppendsToComplete_=function(f){if(this.currentMediaInfo_){var h=this.currentMediaInfo_,m=h.hasAudio,p=h.hasVideo;h=h.isMuxed;p="main"===this.loaderType_&&p;m=!this.audioDisabled_&&m&&!h;f.waitingOnAppends=0;f.hasAppendedData_?(p&&f.waitingOnAppends++,m&&f.waitingOnAppends++,p&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,f)),m&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,f))):(f.timingInfo||
"number"!==typeof f.timestampOffset||(this.isPendingTimestampOffset_=!0),f.timingInfo={start:0},f.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(f),this.processMetadataQueue_()),this.checkAppendsDone_(f))}else this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:Infinity}),this.trigger("error")};k.checkAppendsDone_=function(f){this.checkForAbort_(f.requestId)||(f.waitingOnAppends--,0===f.waitingOnAppends&&
this.handleAppendsDone_())};k.checkForIllegalMediaSwitch=function(f){var h=this.currentMediaInfo_;return(f="main"===this.loaderType_&&h&&f?f.hasAudio||f.hasVideo?h.hasVideo&&!f.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!h.hasVideo&&f.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":
null:"Neither audio nor video found in segment.":null)?(this.error({message:f,blacklistDuration:Infinity}),this.trigger("error"),!0):!1};k.updateSourceBufferTimestampOffset_=function(f){if(null!==f.timestampOffset&&"number"===typeof f.timingInfo.start&&!f.changedTimestampOffset&&"main"===this.loaderType_){var h=!1;f.timestampOffset-=f.timingInfo.start;f.changedTimestampOffset=!0;f.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(f.timestampOffset),
h=!0);f.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(f.timestampOffset),h=!0);h&&this.trigger("timestampoffset")}};k.updateTimingInfoEnd_=function(f){f.timingInfo=f.timingInfo||{};var h="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo&&f.videoTimingInfo?f.videoTimingInfo:f.audioTimingInfo;h&&(f.timingInfo.end="number"===typeof h.end?h.end:h.start+f.duration)};k.handleAppendsDone_=function(){this.pendingSegment_&&this.trigger("appendsdone");
if(this.pendingSegment_){var f=this.pendingSegment_;this.updateTimingInfoEnd_(f);this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:f,shouldSaveTimelineMapping:"main"===this.loaderType_});var h=this.logger_;var m=f.segment;var p=f.playlist,q=p.mediaSequence,r=p.segments;m=["appending ["+f.mediaIndex+"] of ["+q+", "+(q+(void 0===r?[]:r).length)+"] from playlist ["+p.id+"]","["+m.start+" \x3d\x3e "+m.end+"] in timeline ["+f.timeline+"]"].join(" ");h.call(this,
m);this.recordThroughput_(f);this.pendingSegment_=null;this.state="READY";f.isSyncRequest?this.trigger("syncinfoupdate"):(this.addSegmentMetadataCue_(f),this.fetchAtBuffer_=!0,this.currentTimeline_!==f.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:f.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:f.timeline})),this.currentTimeline_=
f.timeline,this.trigger("syncinfoupdate"),h=f.segment,h.end&&this.currentTime_()-h.end>3*f.playlist.targetDuration?this.resetEverything():(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=f.mediaIndex,this.isEndOfStream_(f.mediaIndex,f.playlist)&&this.endOfStream(),this.trigger("appended"),this.paused()||this.monitorBuffer_()))}else this.state="READY",this.paused()||this.monitorBuffer_()};k.recordThroughput_=function(f){var h=this.throughput.rate,m=
Date.now()-f.endOfAllRequests+1;this.throughput.rate+=(Math.floor(f.byteLength/m*8E3)-h)/++this.throughput.count};k.addSegmentMetadataCue_=function(f){if(this.segmentMetadataTrack_){var h=f.segment,m=h.start,p=h.end;if("number"===typeof m&&isFinite(m)&&"number"===typeof p&&isFinite(p)){wd(m,p,this.segmentMetadataTrack_);var q=G.WebKitDataCue||G.VTTCue;f={custom:h.custom,dateTimeObject:h.dateTimeObject,dateTimeString:h.dateTimeString,bandwidth:f.playlist.attributes.BANDWIDTH,resolution:f.playlist.attributes.RESOLUTION,
codecs:f.playlist.attributes.CODECS,byteLength:f.byteLength,uri:f.uri,timeline:f.timeline,playlist:f.playlist.id,start:m,end:p};h=JSON.stringify(f);m=new q(m,p,h);m.value=f;this.segmentMetadataTrack_.addCue(m)}}};return l}(K.EventTarget),gk=function(g){return"string"!==typeof g?g:g.replace(/./,function(l){return l.toUpperCase()})},Zn=["video","audio"],vg=function(g,l){var k=l[g+"Buffer"];return k&&k.updating||l.queuePending[g]},wg=function f(l,k){if(0!==k.queue.length){var h=0,m=k.queue[h];if("mediaSource"===
m.type)k.updating()||"closed"===k.mediaSource.readyState||(k.queue.shift(),m.action(k),m.doneFn&&m.doneFn(),f("audio",k),f("video",k));else if("mediaSource"!==l&&k.started_&&"closed"!==k.mediaSource.readyState&&!vg(l,k)){if(m.type!==l){a:{h=k.queue;for(m=0;m<h.length;m++){var p=h[m];if("mediaSource"===p.type){h=null;break a}if(p.type===l){h=m;break a}}h=null}if(null===h)return;m=k.queue[h]}k.queue.splice(h,1);m.action(l,k);m.doneFn?k.queuePending[l]=m:f(l,k)}}},hk=function(l,k){var f=k[l+"Buffer"],
h=gk(l);f&&(f.removeEventListener("updateend",k["on"+h+"UpdateEnd_"]),f.removeEventListener("error",k["on"+h+"Error_"]),k.codecs[l]=null,k[l+"Buffer"]=null)},Mb=function(l,k){return l&&k&&-1!==Array.prototype.indexOf.call(l.sourceBuffers,k)},pb={appendBuffer:function(l,k){return function(f,h){var m=h[f+"Buffer"];Mb(h.mediaSource,m)&&(h.logger_("Appending segment "+k.mediaIndex+"'s "+l.length+" bytes to "+f+"Buffer"),m.appendBuffer(l))}},remove:function(l,k){return function(f,h){var m=h[f+"Buffer"];
Mb(h.mediaSource,m)&&(h.logger_("Removing "+l+" to "+k+" from "+f+"Buffer"),m.remove(l,k))}},timestampOffset:function(l){return function(k,f){var h=f[k+"Buffer"];Mb(f.mediaSource,h)&&(f.logger_("Setting "+k+"timestampOffset to "+l),h.timestampOffset=l)}},callback:function(l){return function(k,f){l()}},endOfStream:function(l){return function(k){if("open"===k.mediaSource.readyState){k.logger_("Calling mediaSource endOfStream("+(l||"")+")");try{k.mediaSource.endOfStream(l)}catch(f){K.log.warn("Failed to call media source endOfStream",
f)}}}},duration:function(l){return function(k){k.logger_("Setting mediaSource duration to "+l);try{k.mediaSource.duration=l}catch(f){K.log.warn("Failed to set media source duration",f)}}},abort:function(){return function(l,k){if("open"===k.mediaSource.readyState){var f=k[l+"Buffer"];if(Mb(k.mediaSource,f)){k.logger_("calling abort on "+l+"Buffer");try{f.abort()}catch(h){K.log.warn("Failed to abort on "+l+"Buffer",h)}}}}},addSourceBuffer:function(l,k){return function(f){var h=gk(l),m=cj(k);f.logger_("Adding "+
l+"Buffer with codec "+k+" to mediaSource");m=f.mediaSource.addSourceBuffer(m);m.addEventListener("updateend",f["on"+h+"UpdateEnd_"]);m.addEventListener("error",f["on"+h+"Error_"]);f.codecs[l]=k;f[l+"Buffer"]=m}},removeSourceBuffer:function(l){return function(k){var f=k[l+"Buffer"];hk(l,k);if(Mb(k.mediaSource,f)){k.logger_("Removing "+l+"Buffer with codec "+k.codecs[l]+" from mediaSource");try{k.mediaSource.removeSourceBuffer(f)}catch(h){K.log.warn("Failed to removeSourceBuffer "+l+"Buffer",h)}}}},
changeType:function(l){return function(k,f){var h=f[k+"Buffer"],m=cj(l);Mb(f.mediaSource,h)&&f.codecs[k]!==l&&(f.logger_("changing "+k+"Buffer codec from "+f.codecs[k]+" to "+l),h.changeType(m),f.codecs[k]=l)}}},qb=function(l){var k=l.type,f=l.sourceUpdater;f.queue.push({type:k,action:l.action,doneFn:l.doneFn,name:l.name});wg(k,f)},ik=function(l,k){return function(f){k.queuePending[l]&&(f=k.queuePending[l].doneFn,k.queuePending[l]=null,f&&f(k[l+"Error_"]));wg(l,k)}},jk=function(l){function k(h){var m=
l.call(this)||this;m.mediaSource=h;m.sourceopenListener_=function(){return wg("mediaSource",ia(m))};m.mediaSource.addEventListener("sourceopen",m.sourceopenListener_);m.logger_=Sc("SourceUpdater");m.audioTimestampOffset_=0;m.videoTimestampOffset_=0;m.queue=[];m.queuePending={audio:null,video:null};m.delayedAudioAppendQueue_=[];m.videoAppendQueued_=!1;m.codecs={};m.onVideoUpdateEnd_=ik("video",ia(m));m.onAudioUpdateEnd_=ik("audio",ia(m));m.onVideoError_=function(p){m.videoError_=p};m.onAudioError_=
function(p){m.audioError_=p};m.started_=!1;return m}Z(k,l);var f=k.prototype;f.ready=function(){return this.started_};f.createSourceBuffers=function(h){this.ready()||(this.addOrChangeSourceBuffers(h),this.started_=!0,this.trigger("ready"))};f.addSourceBuffer=function(h,m){qb({type:"mediaSource",sourceUpdater:this,action:pb.addSourceBuffer(h,m),name:"addSourceBuffer"})};f.abort=function(h){qb({type:h,sourceUpdater:this,action:pb.abort(h),name:"abort"})};f.removeSourceBuffer=function(h){this.canRemoveSourceBuffer()?
qb({type:"mediaSource",sourceUpdater:this,action:pb.removeSourceBuffer(h),name:"removeSourceBuffer"}):K.log.error("removeSourceBuffer is not supported!")};f.canRemoveSourceBuffer=function(){return!K.browser.IE_VERSION&&G.MediaSource&&G.MediaSource.prototype&&"function"===typeof G.MediaSource.prototype.removeSourceBuffer};k.canChangeType=function(){return G.SourceBuffer&&G.SourceBuffer.prototype&&"function"===typeof G.SourceBuffer.prototype.changeType};f.canChangeType=function(){return this.constructor.canChangeType()};
f.changeType=function(h,m){this.canChangeType()?qb({type:h,sourceUpdater:this,action:pb.changeType(m),name:"changeType"}):K.log.error("changeType is not supported!")};f.addOrChangeSourceBuffers=function(h){var m=this;if(!h||"object"!==typeof h||0===Object.keys(h).length)throw Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(h).forEach(function(p){var q=h[p];if(!m.ready())return m.addSourceBuffer(p,q);m.canChangeType()&&m.changeType(p,q)})};f.appendBuffer=function(h,m){var p=
this,q=h.segmentInfo,r=h.type,u=h.bytes;this.processedAppend_=!0;"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_?(this.delayedAudioAppendQueue_.push([h,m]),this.logger_("delayed audio append of "+u.length+" until video append")):(qb({type:r,sourceUpdater:this,action:pb.appendBuffer(u,q||{mediaIndex:-1}),doneFn:m,name:"appendBuffer"}),"video"===r&&(this.videoAppendQueued_=!0,this.delayedAudioAppendQueue_.length&&(h=this.delayedAudioAppendQueue_.slice(),this.logger_("queuing delayed audio "+
h.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,h.forEach(function(y){p.appendBuffer.apply(p,y)}))))};f.audioBuffered=function(){return Mb(this.mediaSource,this.audioBuffer)?this.audioBuffer.buffered?this.audioBuffer.buffered:K.createTimeRange():K.createTimeRange()};f.videoBuffered=function(){return Mb(this.mediaSource,this.videoBuffer)?this.videoBuffer.buffered?this.videoBuffer.buffered:K.createTimeRange():K.createTimeRange()};f.buffered=function(){var h=Mb(this.mediaSource,this.videoBuffer)?
this.videoBuffer:null,m=Mb(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return m&&!h?this.audioBuffered():h&&!m?this.videoBuffered():Mm(this.audioBuffered(),this.videoBuffered())};f.setDuration=function(h,m){void 0===m&&(m=Zb);qb({type:"mediaSource",sourceUpdater:this,action:pb.duration(h),name:"duration",doneFn:m})};f.endOfStream=function(h,m){void 0===h&&(h=null);void 0===m&&(m=Zb);"string"!==typeof h&&(h=void 0);qb({type:"mediaSource",sourceUpdater:this,action:pb.endOfStream(h),name:"endOfStream",
doneFn:m})};f.removeAudio=function(h,m,p){void 0===p&&(p=Zb);this.audioBuffered().length&&0!==this.audioBuffered().end(0)?qb({type:"audio",sourceUpdater:this,action:pb.remove(h,m),doneFn:p,name:"remove"}):p()};f.removeVideo=function(h,m,p){void 0===p&&(p=Zb);this.videoBuffered().length&&0!==this.videoBuffered().end(0)?qb({type:"video",sourceUpdater:this,action:pb.remove(h,m),doneFn:p,name:"remove"}):p()};f.updating=function(){return vg("audio",this)||vg("video",this)?!0:!1};f.audioTimestampOffset=
function(h){"undefined"!==typeof h&&this.audioBuffer&&this.audioTimestampOffset_!==h&&(qb({type:"audio",sourceUpdater:this,action:pb.timestampOffset(h),name:"timestampOffset"}),this.audioTimestampOffset_=h);return this.audioTimestampOffset_};f.videoTimestampOffset=function(h){"undefined"!==typeof h&&this.videoBuffer&&this.videoTimestampOffset!==h&&(qb({type:"video",sourceUpdater:this,action:pb.timestampOffset(h),name:"timestampOffset"}),this.videoTimestampOffset_=h);return this.videoTimestampOffset_};
f.audioQueueCallback=function(h){this.audioBuffer&&qb({type:"audio",sourceUpdater:this,action:pb.callback(h),name:"callback"})};f.videoQueueCallback=function(h){this.videoBuffer&&qb({type:"video",sourceUpdater:this,action:pb.callback(h),name:"callback"})};f.dispose=function(){var h=this;this.trigger("dispose");Zn.forEach(function(m){h.abort(m);if(h.canRemoveSourceBuffer())h.removeSourceBuffer(m);else h[m+"QueueCallback"](function(){return hk(m,h)})});this.videoAppendQueued_=!1;this.delayedAudioAppendQueue_.length=
0;this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_);this.off()};return k}(K.EventTarget),kk=new Uint8Array(["\n","\n"].map(function(l){return l.charCodeAt(0)})),$n=function(l){function k(h,m){void 0===m&&(m={});m=l.call(this,h,m)||this;m.handlePartialData_=!1;m.mediaSource_=null;m.subtitlesTrack_=null;m.loaderType_="subtitle";m.featuresNativeTextTracks_=h.featuresNativeTextTracks;m.shouldSaveSegmentTimingInfo_=!1;return m}Z(k,l);var f=k.prototype;
f.createTransmuxer_=function(){return null};f.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return K.createTimeRanges();var h=this.subtitlesTrack_.cues;return K.createTimeRanges([[h[0].startTime,h[h.length-1].startTime]])};f.initSegmentForMap=function(h,m){void 0===m&&(m=!1);if(!h)return null;var p=he(h),q=this.initSegments_[p];m&&!q&&h.bytes&&(m=new Uint8Array(kk.byteLength+h.bytes.byteLength),m.set(h.bytes),m.set(kk,h.bytes.byteLength),this.initSegments_[p]=q=
{resolvedUri:h.resolvedUri,byterange:h.byterange,bytes:m});return q||h};f.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()};f.init_=function(){this.state="READY";this.resetEverything();return this.monitorBuffer_()};f.track=function(h){if("undefined"===typeof h)return this.subtitlesTrack_;this.subtitlesTrack_=h;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_};f.remove=function(h,m){wd(h,m,this.subtitlesTrack_)};f.fillBuffer_=
function(){var h=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var m=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(m=this.skipEmptySegments_(m))null===this.syncController_.timestampOffsetForTimeline(m.timeline)?(this.syncController_.one("timestampoffset",function(){h.state="READY";h.paused()||h.monitorBuffer_()}),this.state=
"WAITING_ON_TIMELINE"):this.loadSegment_(m)};f.skipEmptySegments_=function(h){for(;h&&h.segment.empty;)h=this.generateSegmentInfo_(h.playlist,h.mediaIndex+1,h.startOfSegment+h.duration,h.isSyncRequest);return h};f.stopForError=function(h){this.error(h);this.state="READY";this.pause();this.trigger("error")};f.segmentRequestFinished_=function(h,m,p){var q=this;if(this.subtitlesTrack_)if(this.saveTransferStats_(m.stats),this.pendingSegment_)if(h)-101===h.code&&this.handleTimeout_(),-102===h.code?this.mediaRequestsAborted+=
1:this.mediaRequestsErrored+=1,this.stopForError(h);else{this.saveBandwidthRelatedStats_(m.stats);this.state="APPENDING";this.trigger("appending");var r=this.pendingSegment_,u=r.segment;u.map&&(u.map.bytes=m.map.bytes);r.bytes=m.bytes;if("function"!==typeof G.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var y=function(){q.subtitlesTrack_.tech_.off("vttjsloaded",B);q.stopForError({message:"Error loading vtt.js"})};var B=function(){q.subtitlesTrack_.tech_.off("vttjserror",y);q.segmentRequestFinished_(h,
m,p)};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",B);this.subtitlesTrack_.tech_.one("vttjserror",y)}else{u.requested=!0;try{this.parseVTTCues_(r)}catch(I){this.stopForError({message:I.message});return}this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_);r.timingInfo=r.cues.length?{start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:{start:r.startOfSegment,end:r.startOfSegment+r.duration};r.isSyncRequest?(this.trigger("syncinfoupdate"),
this.pendingSegment_=null,this.state="READY"):(r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=u.duration,r.cues.forEach(function(I){q.remove(I.startTime,I.endTime);q.subtitlesTrack_.addCue(q.featuresNativeTextTracks_?new G.VTTCue(I.startTime,I.endTime,I.text):I)}),this.handleAppendsDone_())}}else this.state="READY",this.mediaRequestsAborted+=1;else this.state="READY"};f.handleData_=function(){};f.updateTimingInfoEnd_=function(){};f.parseVTTCues_=function(h){var m=!1;if("function"===typeof G.TextDecoder)var p=
new G.TextDecoder("utf8");else p=G.WebVTT.StringDecoder(),m=!0;p=new G.WebVTT.Parser(G,G.vttjs,p);h.cues=[];h.timestampmap={MPEGTS:0,LOCAL:0};p.oncue=h.cues.push.bind(h.cues);p.ontimestampmap=function(r){h.timestampmap=r};p.onparsingerror=function(r){K.log.warn("Error encountered when parsing cues: "+r.message)};if(h.segment.map){var q=h.segment.map.bytes;m&&(q=decodeURIComponent(escape(String.fromCharCode.apply(null,q))));p.parse(q)}q=h.bytes;m&&(q=decodeURIComponent(escape(String.fromCharCode.apply(null,
q))));p.parse(q);p.flush()};f.updateTimeMapping_=function(h,m,p){var q=h.segment;if(m)if(h.cues.length){var r=h.timestampmap,u=r.MPEGTS/9E4-r.LOCAL+m.mapping;h.cues.forEach(function(y){y.startTime+=u;y.endTime+=u});p.syncInfo||(p.syncInfo={mediaSequence:p.mediaSequence+h.mediaIndex,time:Math.min(h.cues[0].startTime,h.cues[h.cues.length-1].startTime-q.duration)})}else q.empty=!0};return k}(ug),lk=[{name:"VOD",run:function(l,k,f,h,m){return Infinity!==f?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",
run:function(l,k,f,h,m){if(!l.datetimeToDisplayTime)return null;k=k.segments||[];h=f=null;m=m||0;for(var p=0;p<k.length;p++){var q=k[p];if(q.dateTimeObject){q=q.dateTimeObject.getTime()/1E3+l.datetimeToDisplayTime;var r=Math.abs(m-q);if(null!==h&&(0===r||h<r))break;h=r;f={time:q,segmentIndex:p}}}return f}},{name:"Segment",run:function(l,k,f,h,m){l=k.segments||[];f=k=null;m=m||0;for(var p=0;p<l.length;p++){var q=l[p];if(q.timeline===h&&"undefined"!==typeof q.start){var r=Math.abs(m-q.start);if(null!==
f&&f<r)break;if(!k||null===f||f>=r)f=r,k={time:q.start,segmentIndex:p}}}return k}},{name:"Discontinuity",run:function(l,k,f,h,m){f=null;m=m||0;if(k.discontinuityStarts&&k.discontinuityStarts.length){h=null;for(var p=0;p<k.discontinuityStarts.length;p++){var q=k.discontinuityStarts[p],r=l.discontinuities[k.discontinuitySequence+p+1];if(r){var u=Math.abs(m-r.time);if(null!==h&&h<u)break;if(!f||null===h||h>=u)h=u,f={time:r.time,segmentIndex:q}}}}return f}},{name:"Playlist",run:function(l,k,f,h,m){return k.syncInfo?
{time:k.syncInfo.time,segmentIndex:k.syncInfo.mediaSequence-k.mediaSequence}:null}}],ao=function(l){function k(h){h=l.call(this)||this;h.timelines=[];h.discontinuities=[];h.datetimeToDisplayTime=null;h.logger_=Sc("SyncController");return h}Z(k,l);var f=k.prototype;f.getSyncPoint=function(h,m,p,q){h=this.runStrategies_(h,m,p,q);return h.length?this.selectSyncPoint_(h,{key:"time",value:q}):null};f.getExpiredTime=function(h,m){if(!h||!h.segments)return null;m=this.runStrategies_(h,m,h.discontinuitySequence,
0);if(!m.length)return null;m=this.selectSyncPoint_(m,{key:"segmentIndex",value:0});0<m.segmentIndex&&(m.time*=-1);return Math.abs(m.time+pd(h,m.segmentIndex,0))};f.runStrategies_=function(h,m,p,q){for(var r=[],u=0;u<lk.length;u++){var y=lk[u],B=y.run(this,h,m,p,q);B&&(B.strategy=y.name,r.push({strategy:y.name,syncPoint:B}))}return r};f.selectSyncPoint_=function(h,m){for(var p=h[0].syncPoint,q=Math.abs(h[0].syncPoint[m.key]-m.value),r=h[0].strategy,u=1;u<h.length;u++){var y=Math.abs(h[u].syncPoint[m.key]-
m.value);y<q&&(q=y,p=h[u].syncPoint,r=h[u].strategy)}this.logger_("syncPoint for ["+m.key+": "+m.value+"] chosen with strategy ["+(r+"]: [time:"+p.time+", segmentIndex:")+(p.segmentIndex+"]"));return p};f.saveExpiredSegmentInfo=function(h,m){for(var p=m.mediaSequence-h.mediaSequence-1;0<=p;p--){var q=h.segments[p];if(q&&"undefined"!==typeof q.start){m.syncInfo={mediaSequence:h.mediaSequence+p,time:q.start};this.logger_("playlist refresh sync: [time:"+m.syncInfo.time+", mediaSequence: "+(m.syncInfo.mediaSequence+
"]"));this.trigger("syncinfoupdate");break}}};f.setDateTimeMapping=function(h){!this.datetimeToDisplayTime&&h.segments&&h.segments.length&&h.segments[0].dateTimeObject&&(this.datetimeToDisplayTime=-(h.segments[0].dateTimeObject.getTime()/1E3))};f.saveSegmentTimingInfo=function(h){var m=h.segmentInfo;this.calculateSegmentTimeMapping_(m,m.timingInfo,h.shouldSaveTimelineMapping)&&(this.saveDiscontinuitySyncInfo_(m),m.playlist.syncInfo||(m.playlist.syncInfo={mediaSequence:m.playlist.mediaSequence+m.mediaIndex,
time:m.segment.start}))};f.timestampOffsetForTimeline=function(h){return"undefined"===typeof this.timelines[h]?null:this.timelines[h].time};f.mappingForTimeline=function(h){return"undefined"===typeof this.timelines[h]?null:this.timelines[h].mapping};f.calculateSegmentTimeMapping_=function(h,m,p){var q=h.segment,r=this.timelines[h.timeline];if(null!==h.timestampOffset)r={time:h.startOfSegment,mapping:h.startOfSegment-m.start},p&&(this.timelines[h.timeline]=r,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+
h.timeline+": [time: "+(r.time+"] [mapping: "+r.mapping+"]"))),q.start=h.startOfSegment,q.end=m.end+r.mapping;else if(r)q.start=m.start+r.mapping,q.end=m.end+r.mapping;else return!1;return!0};f.saveDiscontinuitySyncInfo_=function(h){var m=h.playlist,p=h.segment;if(p.discontinuity)this.discontinuities[p.timeline]={time:p.start,accuracy:0};else if(m.discontinuityStarts&&m.discontinuityStarts.length)for(var q=0;q<m.discontinuityStarts.length;q++){var r=m.discontinuityStarts[q],u=m.discontinuitySequence+
q+1,y=r-h.mediaIndex,B=Math.abs(y);if(!this.discontinuities[u]||this.discontinuities[u].accuracy>B)r=0>y?p.start-pd(m,h.mediaIndex,r):p.end+pd(m,h.mediaIndex+1,r),this.discontinuities[u]={time:r,accuracy:B}}};f.dispose=function(){this.trigger("dispose");this.off()};return k}(K.EventTarget),bo=function(l){function k(){var h=l.call(this)||this;h.pendingTimelineChanges_={};h.lastTimelineChanges_={};return h}Z(k,l);var f=k.prototype;f.clearPendingTimelineChange=function(h){this.pendingTimelineChanges_[h]=
null;this.trigger("pendingtimelinechange")};f.pendingTimelineChange=function(h){var m=h.type,p=h.from;h=h.to;"number"===typeof p&&"number"===typeof h&&(this.pendingTimelineChanges_[m]={type:m,from:p,to:h},this.trigger("pendingtimelinechange"));return this.pendingTimelineChanges_[m]};f.lastTimelineChange=function(h){var m=h.type,p=h.from;h=h.to;"number"===typeof p&&"number"===typeof h&&(this.lastTimelineChanges_[m]={type:m,from:p,to:h},delete this.pendingTimelineChanges_[m],this.trigger("timelinechange"));
return this.lastTimelineChanges_[m]};f.dispose=function(){this.trigger("dispose");this.pendingTimelineChanges_={};this.lastTimelineChanges_={};this.off()};return k}(K.EventTarget),co=new sh("./decrypter-worker.worker.js",function(l,k){var f=this;(function(){function h(L,S){for(var P=0;P<S.length;P++){var T=S[P];T.enumerable=T.enumerable||!1;T.configurable=!0;"value"in T&&(T.writable=!0);Object.defineProperty(L,T.key,T)}}var m=function(L,S,P){S&&h(L.prototype,S);P&&h(L,P);return L},p=function(L,S){L.prototype=
Object.create(S.prototype);L.prototype.constructor=L;L.__proto__=S},q=function(){function L(){this.listeners={}}var S=L.prototype;S.on=function(P,T){this.listeners[P]||(this.listeners[P]=[]);this.listeners[P].push(T)};S.off=function(P,T){if(!this.listeners[P])return!1;T=this.listeners[P].indexOf(T);this.listeners[P]=this.listeners[P].slice(0);this.listeners[P].splice(T,1);return-1<T};S.trigger=function(P){var T=this.listeners[P];if(T)if(2===arguments.length)for(var ca=T.length,da=0;da<ca;++da)T[da].call(this,
arguments[1]);else{ca=Array.prototype.slice.call(arguments,1);da=T.length;for(var na=0;na<da;++na)T[na].apply(this,ca)}};S.dispose=function(){this.listeners={}};S.pipe=function(P){this.on("data",function(T){P.push(T)})};return L}(),r=null,u=function(){function L(S){if(!r){var P=[[[],[],[],[],[]],[[],[],[],[],[]]],T=P[0],ca=P[1],da=T[4],na=ca[4],W,qa,fa,ta=[],Pa=[],mb;for(W=0;256>W;W++)Pa[(ta[W]=W<<1^283*(W>>7))^W]=W;for(qa=fa=0;!da[qa];qa^=mb||1,fa=Pa[fa]||1){var Oa=fa^fa<<1^fa<<2^fa<<3^fa<<4;Oa=
Oa>>8^Oa&255^99;da[qa]=Oa;na[Oa]=qa;var cb=ta[W=ta[mb=ta[qa]]];var nb=16843009*cb^65537*W^257*mb^16843008*qa;cb=257*ta[Oa]^16843008*Oa;for(W=0;4>W;W++)T[W][qa]=cb=cb<<24^cb>>>8,ca[W][Oa]=nb=nb<<24^nb>>>8}for(W=0;5>W;W++)T[W]=T[W].slice(0),ca[W]=ca[W].slice(0);r=P}this._tables=[[r[0][0].slice(),r[0][1].slice(),r[0][2].slice(),r[0][3].slice(),r[0][4].slice()],[r[1][0].slice(),r[1][1].slice(),r[1][2].slice(),r[1][3].slice(),r[1][4].slice()]];P=this._tables[0][4];T=this._tables[1];da=S.length;na=1;if(4!==
da&&6!==da&&8!==da)throw Error("Invalid aes key size");qa=S.slice(0);fa=[];this._key=[qa,fa];for(S=da;S<4*da+28;S++){ca=qa[S-1];if(0===S%da||8===da&&4===S%da)ca=P[ca>>>24]<<24^P[ca>>16&255]<<16^P[ca>>8&255]<<8^P[ca&255],0===S%da&&(ca=ca<<8^ca>>>24^na<<24,na=na<<1^283*(na>>7));qa[S]=qa[S-da]^ca}for(da=0;S;da++,S--)ca=qa[da&3?S:S-4],fa[da]=4>=S||4>da?ca:T[0][P[ca>>>24]]^T[1][P[ca>>16&255]]^T[2][P[ca>>8&255]]^T[3][P[ca&255]]}L.prototype.decrypt=function(S,P,T,ca,da,na){var W=this._key[1];S^=W[0];ca^=
W[1];T^=W[2];P^=W[3];var qa=W.length/4-2,fa,ta=4;var Pa=this._tables[1];var mb=Pa[0],Oa=Pa[1],cb=Pa[2],nb=Pa[3],Kb=Pa[4];for(fa=0;fa<qa;fa++){Pa=mb[S>>>24]^Oa[ca>>16&255]^cb[T>>8&255]^nb[P&255]^W[ta];var Pc=mb[ca>>>24]^Oa[T>>16&255]^cb[P>>8&255]^nb[S&255]^W[ta+1];var eg=mb[T>>>24]^Oa[P>>16&255]^cb[S>>8&255]^nb[ca&255]^W[ta+2];P=mb[P>>>24]^Oa[S>>16&255]^cb[ca>>8&255]^nb[T&255]^W[ta+3];ta+=4;S=Pa;ca=Pc;T=eg}for(fa=0;4>fa;fa++)da[(3&-fa)+na]=Kb[S>>>24]<<24^Kb[ca>>16&255]<<16^Kb[T>>8&255]<<8^Kb[P&255]^
W[ta++],Pa=S,S=ca,ca=T,T=P,P=Pa};return L}(),y=function(L){function S(){var T=L.call(this,q)||this;T.jobs=[];T.delay=1;T.timeout_=null;return T}p(S,L);var P=S.prototype;P.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};P.push=function(T){this.jobs.push(T);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))};return S}(q),B=function(L){return L<<24|(L&65280)<<8|(L&16711680)>>8|L>>>24},I=
function(){function L(S,P,T,ca){var da=L.STEP,na=new Int32Array(S.buffer),W=new Uint8Array(S.byteLength);S=0;this.asyncStream_=new y;this.asyncStream_.push(this.decryptChunk_(na.subarray(S,S+da),P,T,W));for(S=da;S<na.length;S+=da)T=new Uint32Array([B(na[S-4]),B(na[S-3]),B(na[S-2]),B(na[S-1])]),this.asyncStream_.push(this.decryptChunk_(na.subarray(S,S+da),P,T,W));this.asyncStream_.push(function(){ca(null,W.subarray(0,W.byteLength-W[W.byteLength-1]))})}L.prototype.decryptChunk_=function(S,P,T,ca){return function(){var da=
new Int32Array(S.buffer,S.byteOffset,S.byteLength>>2),na=new u(Array.prototype.slice.call(P)),W=new Uint8Array(S.byteLength),qa=new Int32Array(W.buffer),fa;var ta=T[0];var Pa=T[1];var mb=T[2];var Oa=T[3];for(fa=0;fa<da.length;fa+=4){var cb=B(da[fa]);var nb=B(da[fa+1]);var Kb=B(da[fa+2]);var Pc=B(da[fa+3]);na.decrypt(cb,nb,Kb,Pc,qa,fa);qa[fa]=B(qa[fa]^ta);qa[fa+1]=B(qa[fa+1]^Pa);qa[fa+2]=B(qa[fa+2]^mb);qa[fa+3]=B(qa[fa+3]^Oa);ta=cb;Pa=nb;mb=Kb;Oa=Pc}ca.set(W,S.byteOffset)}};m(L,null,[{key:"STEP",get:function(){return 32E3}}]);
return L}(),M=function(L){var S={};Object.keys(L).forEach(function(P){var T=L[P];ArrayBuffer.isView(T)?S[P]={bytes:T.buffer,byteOffset:T.byteOffset,byteLength:T.byteLength}:S[P]=T});return S};return new function(L){L.onmessage=function(S){var P=S.data;S=new Uint8Array(P.encrypted.bytes,P.encrypted.byteOffset,P.encrypted.byteLength);var T=new Uint32Array(P.key.bytes,P.key.byteOffset,P.key.byteLength/4),ca=new Uint32Array(P.iv.bytes,P.iv.byteOffset,P.iv.byteLength/4);new I(S,T,ca,function(da,na){L.postMessage(M({source:P.source,
decrypted:na}),[na.buffer])})}}(f)})()}),eo=function(l){var k=l["default"]?"main":"alternative";l.characteristics&&0<=l.characteristics.indexOf("public.accessibility.describes-video")&&(k="main-desc");return k},te=function(l,k){l.abort();l.pause();k&&k.activePlaylistLoader&&(k.activePlaylistLoader.pause(),k.activePlaylistLoader=null)},fo=function(l,k){return function(){var f=k.segmentLoaders,h=f[l],m=f.main;f=k.mediaTypes[l];var p=f.activeTrack();p=f.activeGroup(p);var q=f.activePlaylistLoader;te(h,
f);p&&(p.playlistLoader?(h.resyncLoader(),h=p.playlistLoader,f.activePlaylistLoader=h,h.load()):q&&m.resetEverything())}},go=function(l,k){return function(){var f=k.segmentLoaders[l];f.abort();f.pause()}},ho=function(l,k){return function(){var f=k.segmentLoaders,h=f[l],m=f.main;f=k.mediaTypes[l];var p=f.activeTrack(),q=f.activeGroup(p),r=f.activePlaylistLoader;te(h,f);if(q){if("AUDIO"===l){if(!q.playlistLoader){m.setAudio(!0);m.resetEverything();return}h.setAudio(!0);m.setAudio(!1)}r===q.playlistLoader?
(h=q.playlistLoader,f.activePlaylistLoader=h,h.load()):(h.track&&h.track(p),h.resetEverything(),h=q.playlistLoader,f.activePlaylistLoader=h,h.load())}}},ue={AUDIO:function(l,k){return function(){var f=k.mediaTypes[l],h=k.blacklistCurrentPlaylist;te(k.segmentLoaders[l],f);var m=f.activeTrack(),p=f.activeGroup();p=(p.filter(function(r){return r["default"]})[0]||p[0]).id;p=f.tracks[p];if(m===p)h({message:"Problem encountered loading the default audio track."});else{K.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");
for(var q in f.tracks)f.tracks[q].enabled=f.tracks[q]===p;f.onTrackChanged()}}},SUBTITLES:function(l,k){return function(){var f=k.segmentLoaders[l],h=k.mediaTypes[l];K.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");te(f,h);if(f=h.activeTrack())f.mode="disabled";h.onTrackChanged()}}},mk={AUDIO:function(l,k,f){if(k){var h=f.tech,m=f.requestOptions,p=f.segmentLoaders[l];k.on("loadedmetadata",function(){var q=k.media();p.playlist(q,m);(!h.paused()||q.endList&&"none"!==
h.preload())&&p.load()});k.on("loadedplaylist",function(){p.playlist(k.media(),m);h.paused()||p.load()});k.on("error",ue[l](l,f))}},SUBTITLES:function(l,k,f){var h=f.tech,m=f.requestOptions,p=f.segmentLoaders[l],q=f.mediaTypes[l];k.on("loadedmetadata",function(){var r=k.media();p.playlist(r,m);p.track(q.activeTrack());(!h.paused()||r.endList&&"none"!==h.preload())&&p.load()});k.on("loadedplaylist",function(){p.playlist(k.media(),m);h.paused()||p.load()});k.on("error",ue[l](l,f))}},io={AUDIO:function(l,
k){var f=k.vhs,h=k.sourceType,m=k.segmentLoaders[l],p=k.requestOptions,q=k.master,r=q.mediaGroups,u=q.playlists;q=k.mediaTypes[l];var y=q.groups,B=q.tracks,I=k.masterPlaylistLoader;r[l]&&0!==Object.keys(r[l]).length||(r[l]={main:{"default":{"default":!0}}});q=function(L){y[L]||(y[L]=[]);var S=u.filter(function(ca){return ca.attributes[l]===L}),P=function(ca){var da=r[l][L][ca];S.filter(function(W){return W.resolvedUri===da.resolvedUri}).length&&delete da.resolvedUri;var na=void 0;na="vhs-json"===
h&&da.playlists?new Nc(da.playlists[0],f,p):da.resolvedUri?new Nc(da.resolvedUri,f,p):da.playlists&&"dash"===h?new ag(da.playlists[0],f,p,I):null;da=K.mergeOptions({id:ca,playlistLoader:na},da);mk[l](l,da.playlistLoader,k);y[L].push(da);"undefined"===typeof B[ca]&&(na=new K.AudioTrack({id:ca,kind:eo(da),enabled:!1,language:da.language,"default":da["default"],label:ca}),B[ca]=na)},T;for(T in r[l][L])P(T)};for(var M in r[l])q(M);m.on("error",ue[l](l,k))},SUBTITLES:function(l,k){var f=k.tech,h=k.vhs,
m=k.sourceType,p=k.segmentLoaders[l],q=k.requestOptions,r=k.master.mediaGroups,u=k.mediaTypes[l],y=u.groups;u=u.tracks;var B=k.masterPlaylistLoader,I;for(I in r[l]){y[I]||(y[I]=[]);for(var M in r[l][I])if(!r[l][I][M].forced){var L=r[l][I][M],S=void 0;"hls"===m?S=new Nc(L.resolvedUri,h,q):"dash"===m?S=new ag(L.playlists[0],h,q,B):"vhs-json"===m&&(S=new Nc(L.playlists?L.playlists[0]:L.resolvedUri,h,q));L=K.mergeOptions({id:M,playlistLoader:S},L);mk[l](l,L.playlistLoader,k);y[I].push(L);"undefined"===
typeof u[M]&&(L=f.addRemoteTextTrack({id:M,kind:"subtitles","default":L["default"]&&L.autoselect,language:L.language,label:M},!1).track,u[M]=L)}}p.on("error",ue[l](l,k))},"CLOSED-CAPTIONS":function(l,k){var f=k.tech,h=k.master.mediaGroups,m=k.mediaTypes[l];k=m.groups;m=m.tracks;for(var p in h[l]){k[p]||(k[p]=[]);for(var q in h[l][p]){var r=h[l][p][q];r.instreamId.match(/CC\d/)&&(k[p].push(K.mergeOptions({id:q},r)),"undefined"===typeof m[q]&&(r=f.addRemoteTextTrack({id:r.instreamId,kind:"captions",
"default":r["default"]&&r.autoselect,language:r.language,label:q},!1).track,m[q]=r))}}}},jo=function(l,k){return function(f){var h=k.mediaTypes[l].groups,m=k.masterPlaylistLoader.media();if(!m)return null;var p=null;m.attributes[l]&&(p=h[m.attributes[l]]);p=p||h.main;return"undefined"===typeof f?p:null===f?null:p.filter(function(q){return q.id===f.id})[0]||null}},ko={AUDIO:function(l,k){return function(){var f=k.mediaTypes[l].tracks,h;for(h in f)if(f[h].enabled)return f[h];return null}},SUBTITLES:function(l,
k){return function(){var f=k.mediaTypes[l].tracks,h;for(h in f)if("showing"===f[h].mode||"hidden"===f[h].mode)return f[h];return null}}},lo=function(l){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(u){io[u](u,l)});var k=l.mediaTypes,f=l.masterPlaylistLoader,h=l.tech,m=l.vhs;["AUDIO","SUBTITLES"].forEach(function(u){k[u].activeGroup=jo(u,l);k[u].activeTrack=ko[u](u,l);k[u].onGroupChanged=fo(u,l);k[u].onGroupChanging=go(u,l);k[u].onTrackChanged=ho(u,l)});var p=k.AUDIO.activeGroup();p&&(p=
(p.filter(function(u){return u["default"]})[0]||p[0]).id,k.AUDIO.tracks[p].enabled=!0,k.AUDIO.onTrackChanged());f.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(u){return k[u].onGroupChanged()})});f.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(u){return k[u].onGroupChanging()})});var q=function(){k.AUDIO.onTrackChanged();h.trigger({type:"usage",name:"vhs-audio-change"});h.trigger({type:"usage",name:"hls-audio-change"})};h.audioTracks().addEventListener("change",
q);h.remoteTextTracks().addEventListener("change",k.SUBTITLES.onTrackChanged);m.on("dispose",function(){h.audioTracks().removeEventListener("change",q);h.remoteTextTracks().removeEventListener("change",k.SUBTITLES.onTrackChanged)});h.clearTracks("audio");for(var r in k.AUDIO.tracks)h.audioTracks().addTrack(k.AUDIO.tracks[r])},mo=function(){var l={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(k){l[k]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Zb,activeTrack:Zb,onGroupChanged:Zb,
onTrackChanged:Zb}});return l},qc,no="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred".split(" "),oo=function(l){return this.audioSegmentLoader_[l]+this.mainSegmentLoader_[l]},po=function(l){function k(h){var m=l.call(this)||this;var p=h.src,q=h.handleManifestRedirects,r=h.withCredentials,u=h.tech,y=h.bandwidth,B=h.externVhs,I=h.useCueTags,M=h.blacklistDuration,L=h.enableLowInitialPlaylist,S=h.sourceType,P=h.cacheEncryptionKeys,
T=h.handlePartialData;if(!p)throw Error("A non-empty playlist URL or JSON manifest string is required");qc=B;m.withCredentials=r;m.tech_=u;m.vhs_=u.vhs;m.sourceType_=S;m.useCueTags_=I;m.blacklistDuration=M;m.enableLowInitialPlaylist=L;m.useCueTags_&&(m.cueTagsTrack_=m.tech_.addTextTrack("metadata","ad-cues"),m.cueTagsTrack_.inBandMetadataTrackDispatchType="");m.requestOptions_={withCredentials:r,handleManifestRedirects:q,timeout:null};m.on("error",m.pauseLoading);m.mediaTypes_=mo();m.mediaSource=
new G.MediaSource;m.handleDurationChange_=m.handleDurationChange_.bind(ia(m));m.handleSourceOpen_=m.handleSourceOpen_.bind(ia(m));m.handleSourceEnded_=m.handleSourceEnded_.bind(ia(m));m.mediaSource.addEventListener("durationchange",m.handleDurationChange_);m.mediaSource.addEventListener("sourceopen",m.handleSourceOpen_);m.mediaSource.addEventListener("sourceended",m.handleSourceEnded_);m.seekable_=K.createTimeRanges();m.hasPlayed_=!1;m.syncController_=new ao(h);m.segmentMetadataTrack_=u.addRemoteTextTrack({kind:"metadata",
label:"segment-metadata"},!1).track;m.decrypter_=new co;m.sourceUpdater_=new jk(m.mediaSource);m.inbandTextTracks_={};m.timelineChangeController_=new bo;q={vhs:m.vhs_,mediaSource:m.mediaSource,currentTime:m.tech_.currentTime.bind(m.tech_),seekable:function(){return m.seekable()},seeking:function(){return m.tech_.seeking()},duration:function(){return m.duration()},hasPlayed:function(){return m.hasPlayed_},goalBufferLength:function(){return m.goalBufferLength()},bandwidth:y,syncController:m.syncController_,
decrypter:m.decrypter_,sourceType:m.sourceType_,inbandTextTracks:m.inbandTextTracks_,cacheEncryptionKeys:P,handlePartialData:T,sourceUpdater:m.sourceUpdater_,timelineChangeController:m.timelineChangeController_};m.masterPlaylistLoader_="dash"===m.sourceType_?new ag(p,m.vhs_,m.requestOptions_):new Nc(p,m.vhs_,m.requestOptions_);m.setupMasterPlaylistLoaderListeners_();m.mainSegmentLoader_=new ug(K.mergeOptions(q,{segmentMetadataTrack:m.segmentMetadataTrack_,loaderType:"main"}),h);m.audioSegmentLoader_=
new ug(K.mergeOptions(q,{loaderType:"audio"}),h);m.subtitleSegmentLoader_=new $n(K.mergeOptions(q,{loaderType:"vtt",featuresNativeTextTracks:m.tech_.featuresNativeTextTracks}),h);m.setupSegmentLoaderListeners_();no.forEach(function(ca){m[ca+"_"]=oo.bind(ia(m),ca)});m.logger_=Sc("MPC");m.triggeredFmp4Usage=!1;m.masterPlaylistLoader_.load();return m}Z(k,l);var f=k.prototype;f.setupMasterPlaylistLoaderListeners_=function(){var h=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var m=h.masterPlaylistLoader_.media(),
p=1500*m.targetDuration;Xf(h.masterPlaylistLoader_.master,h.masterPlaylistLoader_.media())?h.requestOptions_.timeout=0:h.requestOptions_.timeout=p;m.endList&&"none"!==h.tech_.preload()&&(h.mainSegmentLoader_.playlist(m,h.requestOptions_),h.mainSegmentLoader_.load());lo({sourceType:h.sourceType_,segmentLoaders:{AUDIO:h.audioSegmentLoader_,SUBTITLES:h.subtitleSegmentLoader_,main:h.mainSegmentLoader_},tech:h.tech_,requestOptions:h.requestOptions_,masterPlaylistLoader:h.masterPlaylistLoader_,vhs:h.vhs_,
master:h.master(),mediaTypes:h.mediaTypes_,blacklistCurrentPlaylist:h.blacklistCurrentPlaylist.bind(h)});h.triggerPresenceUsage_(h.master(),m);h.setupFirstPlay();if(!h.mediaTypes_.AUDIO.activePlaylistLoader||h.mediaTypes_.AUDIO.activePlaylistLoader.media())h.trigger("selectedinitialmedia");else h.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){h.trigger("selectedinitialmedia")})});this.masterPlaylistLoader_.on("loadedplaylist",function(){var m=h.masterPlaylistLoader_.media();
if(!m){h.excludeUnsupportedVariants_();var p;h.enableLowInitialPlaylist&&(p=h.selectInitialPlaylist());p||(p=h.selectPlaylist());h.initialMedia_=p;h.masterPlaylistLoader_.media(h.initialMedia_);if("vhs-json"!==h.sourceType_||!h.initialMedia_.segments)return;m=h.initialMedia_}h.handleUpdatedMediaPlaylist(m)});this.masterPlaylistLoader_.on("error",function(){h.blacklistCurrentPlaylist(h.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){h.mainSegmentLoader_.abort();
h.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",function(){var m=h.masterPlaylistLoader_.media(),p=1500*m.targetDuration;Xf(h.masterPlaylistLoader_.master,h.masterPlaylistLoader_.media())?h.requestOptions_.timeout=0:h.requestOptions_.timeout=p;h.mainSegmentLoader_.playlist(m,h.requestOptions_);h.mainSegmentLoader_.load();h.tech_.trigger({type:"mediachange",bubbles:!0})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var m=h.masterPlaylistLoader_.media();h.stuckAtPlaylistEnd_(m)&&
(h.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),h.tech_.trigger("playliststuck"))});this.masterPlaylistLoader_.on("renditiondisabled",function(){h.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"});h.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){h.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"});h.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})};f.handleUpdatedMediaPlaylist=
function(h){this.useCueTags_&&this.updateAdCues_(h);this.mainSegmentLoader_.playlist(h,this.requestOptions_);this.updateDuration(!h.endList);this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())};f.triggerPresenceUsage_=function(h,m){h=h.mediaGroups||{};var p=!0,q=Object.keys(h.AUDIO),r;for(r in h.AUDIO)for(var u in h.AUDIO[r])h.AUDIO[r][u].uri||(p=!1);p&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",
name:"hls-demuxed"}));Object.keys(h.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"}));qc.Playlist.isAes(m)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"}));q.length&&1<Object.keys(h.AUDIO[q[0]]).length&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}));this.useCueTags_&&(this.tech_.trigger({type:"usage",
name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))};f.setupSegmentLoaderListeners_=function(){var h=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var p=h.selectPlaylist(),q=h.masterPlaylistLoader_.media(),r=h.tech_.buffered();r=r.length?r.end(r.length-1)-h.tech_.currentTime():0;var u=h.bufferLowWaterLine();var y=h.duration();p?q=!q.endList||y<hb.MAX_BUFFER_LOW_WATER_LINE||p.attributes.BANDWIDTH<q.attributes.BANDWIDTH||r>=u?!0:!1:(K.log.warn("We received no playlist to switch to. Please check your stream."),
q=!1);q&&h.masterPlaylistLoader_.media(p);h.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){h.trigger("progress")});this.mainSegmentLoader_.on("error",function(){h.blacklistCurrentPlaylist(h.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("appenderror",function(){h.error=h.mainSegmentLoader_.error_;h.trigger("error")});this.mainSegmentLoader_.on("syncinfoupdate",function(){h.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){h.tech_.trigger({type:"usage",
name:"vhs-timestamp-offset"});h.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){h.onSyncInfoUpdate_()});this.audioSegmentLoader_.on("appenderror",function(){h.error=h.audioSegmentLoader_.error_;h.trigger("error")});this.mainSegmentLoader_.on("ended",function(){h.logger_("main segment loader ended");h.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){h.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},
120)});var m=function(){if(!h.sourceUpdater_.ready())return h.tryToCreateSourceBuffers_();var p=h.getCodecsOrExclude_();p&&h.sourceUpdater_.addOrChangeSourceBuffers(p)};this.mainSegmentLoader_.on("trackinfo",m);this.audioSegmentLoader_.on("trackinfo",m);this.mainSegmentLoader_.on("fmp4",function(){h.triggeredFmp4Usage||(h.tech_.trigger({type:"usage",name:"vhs-fmp4"}),h.tech_.trigger({type:"usage",name:"hls-fmp4"}),h.triggeredFmp4Usage=!0)});this.audioSegmentLoader_.on("fmp4",function(){h.triggeredFmp4Usage||
(h.tech_.trigger({type:"usage",name:"vhs-fmp4"}),h.tech_.trigger({type:"usage",name:"hls-fmp4"}),h.triggeredFmp4Usage=!0)});this.audioSegmentLoader_.on("ended",function(){h.logger_("audioSegmentLoader ended");h.onEndOfStream()})};f.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)};f.load=function(){this.mainSegmentLoader_.load();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&
this.subtitleSegmentLoader_.load()};f.smoothQualityChange_=function(h){void 0===h&&(h=this.selectPlaylist());h!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(h),this.mainSegmentLoader_.resetLoader())};f.fastQualityChange_=function(h){var m=this;void 0===h&&(h=this.selectPlaylist());h!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(h),this.mainSegmentLoader_.resetEverything(function(){K.browser.IE_VERSION||K.browser.IS_EDGE?m.tech_.setCurrentTime(m.tech_.currentTime()+
.04):m.tech_.setCurrentTime(m.tech_.currentTime())}))};f.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0);this.hasPlayed_&&this.load();var h=this.tech_.seekable();if(Infinity===this.tech_.duration()&&this.tech_.currentTime()<h.start(0))return this.tech_.setCurrentTime(h.end(h.length-1))}};f.setupFirstPlay=function(){var h=this,m=this.masterPlaylistLoader_.media();if(!m||this.tech_.paused()||this.hasPlayed_)return!1;if(!m.endList){var p=this.seekable();if(!p.length)return!1;
if(K.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){h.trigger("firstplay");h.tech_.setCurrentTime(p.end(0));h.hasPlayed_=!0}),!1;this.trigger("firstplay");this.tech_.setCurrentTime(p.end(0))}this.hasPlayed_=!0;this.load();return!0};f.handleSourceOpen_=function(){this.tryToCreateSourceBuffers_();if(this.tech_.autoplay()){var h=this.tech_.play();"undefined"!==typeof h&&"function"===typeof h.then&&h.then(null,function(m){})}this.trigger("sourceopen")};
f.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var h=this.inbandTextTracks_.metadataTrack_.cues;if(h&&h.length){var m=this.duration();h[h.length-1].endTime=isNaN(m)||Infinity===Math.abs(m)?Number.MAX_VALUE:m}}};f.handleDurationChange_=function(){this.tech_.trigger("durationchange")};f.onEndOfStream=function(){var h=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(h=!this.mainSegmentLoader_.currentMediaInfo_||this.mainSegmentLoader_.currentMediaInfo_.hasVideo?
h&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_);h&&this.sourceUpdater_.endOfStream()};f.stuckAtPlaylistEnd_=function(h){if(!this.seekable().length)return!1;var m=this.syncController_.getExpiredTime(h,this.duration());if(null===m)return!1;h=qc.Playlist.playlistEnd(h,m);m=this.tech_.currentTime();var p=this.tech_.buffered();if(!p.length)return h-m<=Jb;p=p.end(p.length-1);return p-m<=Jb&&h-p<=Jb};f.blacklistCurrentPlaylist=function(h,m){void 0===h&&(h={});var p=h.playlist||this.masterPlaylistLoader_.media();
m=m||h.blacklistDuration||this.blacklistDuration;if(p){var q=this.masterPlaylistLoader_.master.playlists,r=q.filter(ge);r=1===r.length&&r[0]===p;if(1===q.length&&Infinity!==m)return K.log.warn("Problem encountered with playlist "+p.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(r);if(r){var u=!1;q.forEach(function(y){if(y!==p){var B=y.excludeUntil;"undefined"!==typeof B&&Infinity!==B&&(u=!0,delete y.excludeUntil)}});u&&(K.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),
this.tech_.trigger("retryplaylist"))}p.excludeUntil=Date.now()+1E3*m;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"});this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});if(m=this.selectPlaylist())return(h.internal?this.logger_:K.log.warn)((h.internal?"Internal problem":"Problem")+" encountered with playlist "+p.id+"."+((h.message?" "+h.message:"")+" Switching to playlist "+m.id+".")),m.attributes.AUDIO!==p.attributes.AUDIO&&
this.delegateLoaders_("audio",["abort","pause"]),m.attributes.SUBTITLES!==p.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]),this.masterPlaylistLoader_.media(m,r);this.error="Playback cannot continue. No available working or supported playlists.";this.trigger("error")}else this.error=h,"open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network")};f.pauseLoading=function(){this.delegateLoaders_("all",
["abort","pause"])};f.delegateLoaders_=function(h,m){var p=this,q=[],r="all"===h;(r||"main"===h)&&q.push(this.masterPlaylistLoader_);var u=[];(r||"audio"===h)&&u.push("AUDIO");if(r||"subtitle"===h)u.push("CLOSED-CAPTIONS"),u.push("SUBTITLES");u.forEach(function(y){(y=p.mediaTypes_[y]&&p.mediaTypes_[y].activePlaylistLoader)&&q.push(y)});["main","audio","subtitle"].forEach(function(y){var B=p[y+"SegmentLoader_"];!B||h!==y&&"all"!==h||q.push(B)});q.forEach(function(y){return m.forEach(function(B){if("function"===
typeof y[B])y[B]()})})};f.setCurrentTime=function(h){var m=od(this.tech_.buffered(),h);if(!this.masterPlaylistLoader_||!this.masterPlaylistLoader_.media()||!this.masterPlaylistLoader_.media().segments)return 0;if(m&&m.length)return h;this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),
this.subtitleSegmentLoader_.abort());this.load()};f.duration=function(){if(!this.masterPlaylistLoader_)return 0;var h=this.masterPlaylistLoader_.media();return h?h.endList?this.mediaSource?this.mediaSource.duration:qc.Playlist.duration(h):Infinity:0};f.seekable=function(){return this.seekable_};f.onSyncInfoUpdate_=function(){if(this.masterPlaylistLoader_){var h=this.masterPlaylistLoader_.media();if(h){var m=this.syncController_.getExpiredTime(h,this.duration());if(null!==m){var p=this.masterPlaylistLoader_.master.suggestedPresentationDelay,
q=qc.Playlist.seekable(h,m,p);if(0!==q.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){h=this.mediaTypes_.AUDIO.activePlaylistLoader.media();m=this.syncController_.getExpiredTime(h,this.duration());if(null===m)return;var r=qc.Playlist.seekable(h,m,p);if(0===r.length)return}if(this.seekable_&&this.seekable_.length){var u=this.seekable_.end(0);var y=this.seekable_.start(0)}r?r.start(0)>q.end(0)||q.start(0)>r.end(0)?this.seekable_=q:this.seekable_=K.createTimeRanges([[r.start(0)>q.start(0)?r.start(0):
q.start(0),r.end(0)<q.end(0)?r.end(0):q.end(0)]]):this.seekable_=q;this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===u&&this.seekable_.start(0)===y||(this.logger_("seekable updated ["+kj(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}};f.updateDuration=function(h){this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null);if("open"!==this.mediaSource.readyState)this.updateDuration_=this.updateDuration.bind(this,
h),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);else if(h)h=this.seekable(),h.length&&(isNaN(this.mediaSource.duration)||this.mediaSource.duration<h.end(h.length-1))&&this.sourceUpdater_.setDuration(h.end(h.length-1));else{h=this.tech_.buffered();var m=qc.Playlist.duration(this.masterPlaylistLoader_.media());0<h.length&&(m=Math.max(m,h.end(h.length-1)));this.mediaSource.duration!==m&&this.sourceUpdater_.setDuration(m)}};f.dispose=function(){var h=this;this.trigger("dispose");
this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(m){m=h.mediaTypes_[m].groups;for(var p in m)m[p].forEach(function(q){q.playlistLoader&&q.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose();this.sourceUpdater_.dispose();this.timelineChangeController_.dispose();this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_);this.mediaSource.removeEventListener("durationchange",
this.handleDurationChange_);this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_);this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_);this.off()};f.master=function(){return this.masterPlaylistLoader_.master};f.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_};f.areMediaTypesKnown_=function(){var h=!!this.mediaTypes_.AUDIO.activePlaylistLoader;return!this.mainSegmentLoader_.currentMediaInfo_||h&&!this.audioSegmentLoader_.currentMediaInfo_?
!1:!0};f.getCodecsOrExclude_=function(){var h=this,m={main:this.mainSegmentLoader_.currentMediaInfo_||{},audio:this.audioSegmentLoader_.currentMediaInfo_||{}};m.video=m.main;var p=ud(this.master(),this.media()),q={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;m.main.hasVideo&&(q.video=p.video||m.main.videoCodec||Dm);m.main.isMuxed&&(q.video+=","+(p.audio||m.main.audioCodec||bj));if(m.main.hasAudio&&!m.main.isMuxed||m.audio.hasAudio||r)q.audio=p.audio||m.main.audioCodec||m.audio.audioCodec||bj,
m.audio.isFmp4=m.main.hasAudio&&!m.main.isMuxed?m.main.isFmp4:m.audio.isFmp4;if(q.audio||q.video){var u={},y;["video","audio"].forEach(function(M){var L;if(L=q.hasOwnProperty(M))L=q[M],L=!(m[M].isFmp4?de(L):Rf(L));L&&(L=m[M].isFmp4?"browser":"muxer",u[L]=u[L]||[],u[L].push(q[M]),"audio"===M&&(y=L))});if(r&&y&&this.media().attributes.AUDIO){var B=this.media().attributes.AUDIO;this.master().playlists.forEach(function(M){(M.attributes&&M.attributes.AUDIO)===B&&M!==h.media()&&(M.excludeUntil=Infinity)});
this.logger_("excluding audio group "+B+" as "+y+' does not support codec(s): "'+q.audio+'"')}if(Object.keys(u).length)p=Object.keys(u).reduce(function(M,L){M&&(M+=", ");return M+=L+' does not support codec(s): "'+u[L].join(",")+'"'},"")+".",this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:p,blacklistDuration:Infinity});else{if(this.sourceUpdater_.ready()&&!this.sourceUpdater_.canChangeType()){var I=[];["video","audio"].forEach(function(M){var L=(nd(h.sourceUpdater_.codecs[M]||
"")[M]||{}).type,S=(nd(q[M]||"")[M]||{}).type;L&&S&&L.toLowerCase()!==S.toLowerCase()&&I.push('"'+h.sourceUpdater_.codecs[M]+'" -\x3e "'+q[M]+'"')});if(I.length){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+I.join(", ")+".",blacklistDuration:Infinity,internal:!0});return}}return q}}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:Infinity})};f.tryToCreateSourceBuffers_=function(){if("open"===
this.mediaSource.readyState&&!this.sourceUpdater_.ready()&&this.areMediaTypesKnown_()){var h=this.getCodecsOrExclude_();h&&(this.sourceUpdater_.createSourceBuffers(h),h=[h.video,h.audio].filter(Boolean).join(","),this.excludeIncompatibleVariants_(h))}};f.excludeUnsupportedVariants_=function(){var h=this;this.master().playlists.forEach(function(m){var p=ud(h.master,m);!p.audio||Rf(p.audio)||de(p.audio)||(m.excludeUntil=Infinity);!p.video||Rf(p.video)||de(p.video)||(m.excludeUntil=Infinity)})};f.excludeIncompatibleVariants_=
function(h){var m=this,p=nd(h),q=Object.keys(p).length;this.master().playlists.forEach(function(r){if(Infinity!==r.excludeUntil){var u={},y=2,B=[],I=ud(m.masterPlaylistLoader_.master,r);if(I.audio||I.video)u=[I.video,I.audio].filter(Boolean).join(","),u=nd(u),y=Object.keys(u).length;y!==q&&(B.push('codec count "'+y+'" !\x3d\x3d "'+q+'"'),r.excludeUntil=Infinity);m.sourceUpdater_.canChangeType()||(u.video&&p.video&&u.video.type.toLowerCase()!==p.video.type.toLowerCase()&&(B.push('video codec "'+u.video.type+
'" !\x3d\x3d "'+p.video.type+'"'),r.excludeUntil=Infinity),u.audio&&p.audio&&u.audio.type.toLowerCase()!==p.audio.type.toLowerCase()&&(r.excludeUntil=Infinity,B.push('audio codec "'+u.audio.type+'" !\x3d\x3d "'+p.audio.type+'"')));B.length&&m.logger_("blacklisting "+r.id+": "+B.join(" \x26\x26 "))}})};f.updateAdCues_=function(h){var m=0,p=this.seekable();p.length&&(m=p.start(0));p=this.cueTagsTrack_;void 0===m&&(m=0);if(h.segments)for(var q,r=0;r<h.segments.length;r++){var u=h.segments[r];if(!q)b:{q=
m+u.duration/2;for(var y=p.cues,B=0;B<y.length;B++){var I=y[B];if(q>=I.adStartTime&&q<=I.adEndTime){q=I;break b}}q=null}if(q){if("cueIn"in u){q.endTime=m;q.adEndTime=m;m+=u.duration;q=null;continue}if(m<q.endTime){m+=u.duration;continue}q.endTime+=u.duration}else"cueOut"in u&&(q=new G.VTTCue(m,m+u.duration,u.cueOut),q.adStartTime=m,q.adEndTime=m+parseFloat(u.cueOut),p.addCue(q)),"cueOutCont"in u&&(q=u.cueOutCont.split("/").map(parseFloat),y=q[0],B=q[1],q=new G.VTTCue(m,m+u.duration,""),q.adStartTime=
m-y,q.adEndTime=q.adStartTime+B,p.addCue(q));m+=u.duration}};f.goalBufferLength=function(){var h=this.tech_.currentTime(),m=hb.GOAL_BUFFER_LENGTH;return Math.min(m+h*hb.GOAL_BUFFER_LENGTH_RATE,Math.max(m,hb.MAX_GOAL_BUFFER_LENGTH))};f.bufferLowWaterLine=function(){var h=this.tech_.currentTime(),m=hb.BUFFER_LOW_WATER_LINE;return Math.min(m+h*hb.BUFFER_LOW_WATER_LINE_RATE,Math.max(m,hb.MAX_BUFFER_LOW_WATER_LINE))};return k}(K.EventTarget),qo=function(l,k,f){return function(h){var m=l.master.playlists[k],
p=Wf(m),q=ge(m);if("undefined"===typeof h)return q;h?delete m.disabled:m.disabled=!0;h===q||p||(f(),h?l.trigger("renditionenabled"):l.trigger("renditiondisabled"));return h}},ro=function(l,k,f){var h=l.masterPlaylistController_,m=h[(l.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(h);if(k.attributes.RESOLUTION){var p=k.attributes.RESOLUTION;this.width=p.width;this.height=p.height}this.bandwidth=k.attributes.BANDWIDTH;this.codecs=ud(h.master(),k);this.playlist=k;this.id=f;this.enabled=
qo(l.playlists,k.id,m)},so=function(l){var k=l.playlists;l.representations=function(){return k&&k.master&&k.master.playlists?k.master.playlists.filter(function(f){return!Wf(f)}).map(function(f,h){return new ro(l,f,f.id)}):[]}},nk=["seeking","seeked","pause","playing","error"],to=function(){function l(f){var h=this;this.masterPlaylistController_=f.masterPlaylistController;this.tech_=f.tech;this.seekable=f.seekable;this.allowSeeksWithinUnsafeLiveWindow=f.allowSeeksWithinUnsafeLiveWindow;this.media=
f.media;this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.timer_=this.lastRecordedTime=null;this.logger_=Sc("PlaybackWatcher");this.logger_("initialize");var m=function(){return h.monitorCurrentTime_()},p=function(){return h.techWaiting_()},q=function(){return h.cancelTimer_()},r=function(){return h.fixesBadSeeks_()},u=this.masterPlaylistController_,y=["main","subtitle","audio"],B={};y.forEach(function(I){B[I]={reset:function(){return h.resetSegmentDownloads_(I)},updateend:function(){return h.checkSegmentDownloads_(I)}};
u[I+"SegmentLoader_"].on("appendsdone",B[I].updateend);u[I+"SegmentLoader_"].on("playlistupdate",B[I].reset);h.tech_.on(["seeked","seeking"],B[I].reset)});this.tech_.on("seekablechanged",r);this.tech_.on("waiting",p);this.tech_.on(nk,q);this.tech_.on("canplay",m);this.dispose=function(){h.logger_("dispose");h.tech_.off("seekablechanged",r);h.tech_.off("waiting",p);h.tech_.off(nk,q);h.tech_.off("canplay",m);y.forEach(function(I){u[I+"SegmentLoader_"].off("appendsdone",B[I].updateend);u[I+"SegmentLoader_"].off("playlistupdate",
B[I].reset);h.tech_.off(["seeked","seeking"],B[I].reset)});h.checkCurrentTimeTimeout_&&G.clearTimeout(h.checkCurrentTimeTimeout_);h.cancelTimer_()}}var k=l.prototype;k.monitorCurrentTime_=function(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&G.clearTimeout(this.checkCurrentTimeTimeout_);this.checkCurrentTimeTimeout_=G.setTimeout(this.monitorCurrentTime_.bind(this),250)};k.resetSegmentDownloads_=function(f){var h=this.masterPlaylistController_[f+"SegmentLoader_"];0<this[f+"StalledDownloads_"]&&
this.logger_("resetting possible stalled download count for "+f+" loader");this[f+"StalledDownloads_"]=0;this[f+"Buffered_"]=h.buffered_()};k.checkSegmentDownloads_=function(f){var h=this.masterPlaylistController_,m=h[f+"SegmentLoader_"],p=m.buffered_(),q=Nm(this[f+"Buffered_"],p);this[f+"Buffered_"]=p;q?this.resetSegmentDownloads_(f):(this[f+"StalledDownloads_"]++,this.logger_("found #"+this[f+"StalledDownloads_"]+" "+f+" appends that did not increase buffer (possible stalled download)",{playlistId:m.playlist_&&
m.playlist_.id,buffered:Vf(p)}),10>this[f+"StalledDownloads_"]||(this.logger_(f+" loader stalled download exclusion"),this.resetSegmentDownloads_(f),this.tech_.trigger({type:"usage",name:"vhs-"+f+"-download-exclusion"}),"subtitle"!==f&&h.blacklistCurrentPlaylist({message:"Excessive "+f+" segment downloading detected."},Infinity)))};k.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime();else if(!this.tech_.paused()&&
!this.tech_.seeking()){var f=this.tech_.currentTime(),h=this.tech_.buffered();if(this.lastRecordedTime===f&&(!h.length||f+Jb>=h.end(h.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&f===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):f===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=f)}};k.cancelTimer_=function(){this.consecutiveUpdates=0;this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_));this.timer_=
null};k.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var f=this.seekable(),h=this.tech_.currentTime(),m;this.afterSeekableWindow_(f,h,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(m=f.end(f.length-1));this.beforeSeekableWindow_(f,h)&&(m=f.start(0),m+=m===f.end(0)?0:Jb);if("undefined"!==typeof m)return this.logger_("Trying to seek outside of seekable at time "+h+" with seekable range "+(kj(f)+". Seeking to ")+(m+".")),this.tech_.setCurrentTime(m),!0;f=this.tech_.buffered();m=
this.media().targetDuration;return(!f.length||f.end(0)-f.start(0)<2*m||h>f.start(0)?0:f.start(0)-h<m)?(m=f.start(0)+Jb,this.logger_("Buffered region starts ("+f.start(0)+")  just beyond seek point ("+(h+"). Seeking to "+m+".")),this.tech_.setCurrentTime(m),!0):!1};k.waiting_=function(){if(!this.techWaiting_()){var f=this.tech_.currentTime(),h=this.tech_.buffered();h=od(h,f);h.length&&f+3<=h.end(0)&&(this.cancelTimer_(),this.tech_.setCurrentTime(f),this.logger_("Stopped at "+f+" while inside a buffered region ["+
(h.start(0)+" -\x3e "+h.end(0)+"]. Attempting to resume playback by seeking to the current time.")),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"}))}};k.techWaiting_=function(){var f=this.seekable(),h=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(f,h))return f=f.end(f.length-1),this.logger_("Fell out of live window at time "+
h+". Seeking to live point (seekable end) "+f),this.cancelTimer_(),this.tech_.setCurrentTime(f),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0;f=this.tech_.vhs.masterPlaylistController_.sourceUpdater_;var m=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:f.audioBuffered(),videoBuffered:f.videoBuffered(),currentTime:h}))return this.cancelTimer_(),this.tech_.setCurrentTime(h),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),
this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;f=Uf(m,h);return 0<f.length?(m=f.start(0)-h,this.logger_("Stopped at "+h+", setting timer for "+m+", seeking to "+f.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1E3*m,h),!0):!1};k.afterSeekableWindow_=function(f,h,m,p){void 0===p&&(p=!1);if(!f.length)return!1;var q=f.end(f.length-1)+Jb;!m.endList&&p&&(q=f.end(f.length-1)+3*m.targetDuration);return h>q?!0:!1};k.beforeSeekableWindow_=function(f,h){return f.length&&
0<f.start(0)&&h<f.start(0)-Jb?!0:!1};k.videoUnderflow_=function(f){var h=f.videoBuffered,m=f.audioBuffered;f=f.currentTime;if(h){var p;if(h.length&&m.length){var q=od(h,f-3);h=od(h,f);m=od(m,f);m.length&&!h.length&&q.length&&(p={start:q.end(0),end:m.end(0)})}else Uf(h,f).length||(p=this.gapFromVideoUnderflow_(h,f));return p?(this.logger_("Encountered a gap in video from "+p.start+" to "+p.end+". Seeking to current time "+f),!0):!1}};k.skipTheGap_=function(f){var h=this.tech_.buffered(),m=this.tech_.currentTime();
h=Uf(h,m);this.cancelTimer_();0!==h.length&&m===f&&(this.logger_("skipTheGap_:","currentTime:",m,"scheduled currentTime:",f,"nextRange start:",h.start(0)),this.tech_.setCurrentTime(h.start(0)+Oc),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))};k.gapFromVideoUnderflow_=function(f,h){if(2>f.length)f=K.createTimeRanges();else{for(var m=[],p=1;p<f.length;p++){var q=f.end(p-1),r=f.start(p);m.push([q,r])}f=K.createTimeRanges(m)}for(m=0;m<f.length;m++)if(p=
f.start(m),q=f.end(m),4>h-p&&2<h-p)return{start:p,end:q};return null};return l}(),uo={errorInterval:30,getSource:function(l){var k=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return l(k)}},vo=function h(k,f){var m=0,p=0,q=K.mergeOptions(uo,f);k.ready(function(){k.trigger({type:"usage",name:"vhs-error-reload-initialized"});k.trigger({type:"usage",name:"hls-error-reload-initialized"})});var r=function(){p&&k.currentTime(p)},u=function(I){null!==I&&void 0!==I&&(p=Infinity!==
k.duration()&&k.currentTime()||0,k.one("loadedmetadata",r),k.src(I),k.trigger({type:"usage",name:"vhs-error-reload"}),k.trigger({type:"usage",name:"hls-error-reload"}),k.play())},y=function(){if(Date.now()-m<1E3*q.errorInterval)k.trigger({type:"usage",name:"vhs-error-reload-canceled"}),k.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(q.getSource&&"function"===typeof q.getSource)return m=Date.now(),q.getSource.call(k,u);K.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},
B=function M(){k.off("loadedmetadata",r);k.off("error",y);k.off("dispose",M)};k.on("error",y);k.on("dispose",B);k.reloadSourceOnError=function(M){B();h(k,M)}},ok=function(k){vo(this,k)},Va={PlaylistLoader:Nc,Playlist:gb,utils:Tm,STANDARD_PLAYLIST_SELECTOR:function(){var k=this.useDevicePixelRatio?G.devicePixelRatio||1:1;return Sn(this.playlists.master,this.systemBandwidth,parseInt(dk(this.tech_.el(),"width"),10)*k,parseInt(dk(this.tech_.el(),"height"),10)*k,this.limitRenditionByPlayerDimensions)},
INITIAL_PLAYLIST_SELECTOR:function(){var k=this,f=this.playlists.master.playlists.filter(gb.isEnabled);vd(f,function(h,m){return tg(h,m)});return f.filter(function(h){return!!ud(k.playlists.master,h).video})[0]||null},comparePlaylistBandwidth:tg,comparePlaylistResolution:function(k,f){if(k.attributes.RESOLUTION&&k.attributes.RESOLUTION.width)var h=k.attributes.RESOLUTION.width;h=h||G.Number.MAX_VALUE;if(f.attributes.RESOLUTION&&f.attributes.RESOLUTION.width)var m=f.attributes.RESOLUTION.width;m=m||
G.Number.MAX_VALUE;return h===m&&k.attributes.BANDWIDTH&&f.attributes.BANDWIDTH?k.attributes.BANDWIDTH-f.attributes.BANDWIDTH:h-m},xhr:sj()};"GOAL_BUFFER_LENGTH MAX_GOAL_BUFFER_LENGTH BACK_BUFFER_LENGTH GOAL_BUFFER_LENGTH_RATE BUFFER_LOW_WATER_LINE MAX_BUFFER_LOW_WATER_LINE BUFFER_LOW_WATER_LINE_RATE BANDWIDTH_VARIANCE".split(" ").forEach(function(k){Object.defineProperty(Va,k,{get:function(){K.log.warn("using Vhs."+k+" is UNSAFE be sure you know what you are doing");return hb[k]},set:function(f){K.log.warn("using Vhs."+
k+" is UNSAFE be sure you know what you are doing");"number"!==typeof f||0>f?K.log.warn("value of Vhs."+k+" must be greater than or equal to 0"):hb[k]=f}})});var pk=function(k,f){f=f.media();for(var h=-1,m=0;m<k.length;m++)if(k[m].id===f.id){h=m;break}k.selectedIndex_=h;k.trigger({selectedIndex:h,type:"change"})},wo=function(k,f){f.representations().forEach(function(h){k.addQualityLevel(h)});pk(k,f.playlists)};Va.canPlaySource=function(){return K.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};
var xo=function(k,f,h){if(!k)return k;var m=f&&f.attributes&&f.attributes.CODECS,p=h&&h.attributes&&h.attributes.CODECS;!p&&m&&1<m.split(",").length&&m.split(",").forEach(function(y){y=y.trim();Fm(y)?p=y:Gm(y)&&(m=y)});h=m?'video/mp4;codecs\x3d"'+m+'"':null;var q=p?'audio/mp4;codecs\x3d"'+p+'"':null,r={},u;for(u in k)r[u]={audioContentType:q,videoContentType:h},f.contentProtection&&f.contentProtection[u]&&f.contentProtection[u].pssh&&(r[u].pssh=f.contentProtection[u].pssh),"string"===typeof k[u]&&
(r[u].url=k[u]);return K.mergeOptions(k,r)},yo=function(k,f){return k.reduce(function(h,m){if(!m.contentProtection)return h;var p=f.reduce(function(q,r){var u=m.contentProtection[r];u&&u.pssh&&(q[r]={pssh:u.pssh});return q},{});Object.keys(p).length&&h.push(p);return h},[])},zo=function(k){var f=k.player,h=k.sourceKeySystems,m=k.audioMedia,p=k.mainPlaylists;if(k=xo(h,k.media,m))(f.currentSource().keySystems=k)&&!f.eme?K.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"):11!==
K.browser.IE_VERSION&&f.eme.initializeMediaKeys&&(m=m?p.concat([m]):p,yo(m,Object.keys(h)).forEach(function(q){f.eme.initializeMediaKeys({keySystems:q})}))},qk=function(){if(!G.localStorage)return null;var k=G.localStorage.getItem("videojs-vhs");if(!k)return null;try{return JSON.parse(k)}catch(f){return null}},Ao=function(k){return 0===k.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(k.substring(k.indexOf(",")+1)):k};Va.supportsNativeHls=function(){if(!N||!N.createElement)return!1;
var k=N.createElement("video");return K.getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some(function(f){return/maybe|probably/i.test(k.canPlayType(f))}):!1}();var Bo=N&&N.createElement&&K.getTech("Html5").isSupported()?/maybe|probably/i.test(N.createElement("video").canPlayType("application/dash+xml")):!1;Va.supportsNativeDash=Bo;Va.supportsTypeNatively=function(k){return"hls"===
k?Va.supportsNativeHls:"dash"===k?Va.supportsNativeDash:!1};Va.isSupported=function(){return K.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var xg=function(k){function f(m,p,q){var r=k.call(this,p,K.mergeOptions(q.hls,q.vhs))||this;q.hls&&Object.keys(q.hls).length&&K.log.warn("Using hls options is deprecated. Use vhs instead.");p.options_&&p.options_.playerId&&(q=K(p.options_.playerId),q.hasOwnProperty("hls")||Object.defineProperty(q,"hls",{get:function(){K.log.warn("player.hls is deprecated. Use player.tech().vhs instead.");
p.trigger({type:"usage",name:"hls-player-access"});return ia(r)},configurable:!0}),q.hasOwnProperty("vhs")||Object.defineProperty(q,"vhs",{get:function(){K.log.warn("player.vhs is deprecated. Use player.tech().vhs instead.");p.trigger({type:"usage",name:"vhs-player-access"});return ia(r)},configurable:!0}),q.hasOwnProperty("dash")||Object.defineProperty(q,"dash",{get:function(){K.log.warn("player.dash is deprecated. Use player.tech().vhs instead.");return ia(r)},configurable:!0}),r.player_=q);r.tech_=
p;r.source_=m;r.stats={};r.ignoreNextSeekingEvent_=!1;r.setOptions_();if(r.options_.overrideNative&&p.overrideNativeAudioTracks&&p.overrideNativeVideoTracks)p.overrideNativeAudioTracks(!0),p.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(p.featuresNativeVideoTracks||p.featuresNativeAudioTracks))throw Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");r.on(N,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(u){(u=
N.fullscreenElement||N.webkitFullscreenElement||N.mozFullScreenElement||N.msFullscreenElement)&&u.contains(r.tech_.el())&&r.masterPlaylistController_.smoothQualityChange_()});r.on(r.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())});r.on(r.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()});r.on(r.tech_,"play",r.play);return r}Z(f,k);var h=f.prototype;
h.setOptions_=function(){var m=this;this.options_.withCredentials=this.options_.withCredentials||!1;this.options_.handleManifestRedirects=!1===this.options_.handleManifestRedirects?!1:!0;this.options_.limitRenditionByPlayerDimensions=!1===this.options_.limitRenditionByPlayerDimensions?!1:!0;this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1;this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1;this.options_.useBandwidthFromLocalStorage="undefined"!==typeof this.source_.useBandwidthFromLocalStorage?
this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1;this.options_.customTagParsers=this.options_.customTagParsers||[];this.options_.customTagMappers=this.options_.customTagMappers||[];this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1;this.options_.handlePartialData=this.options_.handlePartialData||!1;"number"!==typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300);if("number"!==typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var p=
qk();p&&p.bandwidth&&(this.options_.bandwidth=p.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"}));p&&p.throughput&&(this.options_.throughput=p.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=hb.INITIAL_BANDWIDTH);
this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===hb.INITIAL_BANDWIDTH;"withCredentials useDevicePixelRatio limitRenditionByPlayerDimensions bandwidth smoothQualityChange customTagParsers customTagMappers handleManifestRedirects cacheEncryptionKeys handlePartialData".split(" ").forEach(function(q){"undefined"!==typeof m.source_[q]&&(m.options_[q]=m.source_[q])});this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions;
this.useDevicePixelRatio=this.options_.useDevicePixelRatio};h.src=function(m,p){var q=this;m&&(this.setOptions_(),this.options_.src=Ao(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Va,this.options_.sourceType=Gi(p),this.options_.seekTo=function(r){q.tech_.setCurrentTime(r)},this.masterPlaylistController_=new po(this.options_),this.playbackWatcher_=new to(K.mergeOptions(this.options_,{seekable:function(){return q.seekable()},media:function(){return q.masterPlaylistController_.media()},
masterPlaylistController:this.masterPlaylistController_})),this.masterPlaylistController_.on("error",function(){var r=K.players[q.tech_.options_.playerId],u=q.masterPlaylistController_.error;"object"!==typeof u||u.code?"string"===typeof u&&(u={message:u,code:3}):u.code=3;r.error(u)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Va.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Va.INITIAL_PLAYLIST_SELECTOR.bind(this),
this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(r){this.masterPlaylistController_.selectPlaylist=r.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(r){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=
r;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(r){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=r;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set:function(){K.log.error('The "systemBandwidth" property is read-only')}}}),
this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return q.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return q.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return q.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return q.masterPlaylistController_.mediaRequestsTimedout_()||
0},enumerable:!0},mediaRequestsErrored:{get:function(){return q.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return q.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return q.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return q.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Vf(q.tech_.buffered())},
enumerable:!0},currentTime:{get:function(){return q.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return q.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return q.tech_.name_},enumerable:!0},duration:{get:function(){return q.tech_.duration()},enumerable:!0},master:{get:function(){return q.playlists.master},enumerable:!0},playerDimensions:{get:function(){return q.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Vf(q.tech_.seekable())},
enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return q.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){if(q.options_.useBandwidthFromLocalStorage){var r={bandwidth:q.bandwidth,throughput:Math.round(q.throughput)};if(G.localStorage){var u=qk();u=u?K.mergeOptions(u,r):r;try{G.localStorage.setItem("videojs-vhs",
JSON.stringify(u))}catch(y){}}}}),this.masterPlaylistController_.on("selectedinitialmedia",function(){so(q)}),this.masterPlaylistController_.sourceUpdater_.on("ready",function(){var r=q.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;zo({player:q.player_,sourceKeySystems:q.source_.keySystems,media:q.playlists.media(),audioMedia:r&&r.media(),mainPlaylists:q.playlists.master.playlists})}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),
this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=G.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_)))};h.setupQualityLevels_=function(){var m=this,p=K.players[this.tech_.options_.playerId];p&&p.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=p.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){wo(m.qualityLevels_,
m)}),this.playlists.on("mediachange",function(){pk(m.qualityLevels_,m.playlists)}))};f.version=function(){return{"@videojs/http-streaming":"2.2.4","mux.js":"5.6.7","mpd-parser":"0.14.0","m3u8-parser":"4.5.0","aes-decrypter":"3.1.0"}};h.version=function(){return this.constructor.version()};h.canChangeType=function(){return jk.canChangeType()};h.play=function(){this.masterPlaylistController_.play()};h.setCurrentTime=function(m){this.masterPlaylistController_.setCurrentTime(m)};h.duration=function(){return this.masterPlaylistController_.duration()};
h.seekable=function(){return this.masterPlaylistController_.seekable()};h.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose();this.masterPlaylistController_&&this.masterPlaylistController_.dispose();this.qualityLevels_&&this.qualityLevels_.dispose();this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls);this.tech_&&this.tech_.vhs&&delete this.tech_.vhs;this.tech_&&delete this.tech_.hls;this.mediaSourceUrl_&&G.URL.revokeObjectURL&&(G.URL.revokeObjectURL(this.mediaSourceUrl_),
this.mediaSourceUrl_=null);k.prototype.dispose.call(this)};h.convertToProgramTime=function(m,p){return Ym({playlist:this.masterPlaylistController_.media(),time:m,callback:p})};h.seekToProgramTime=function(m,p,q,r){void 0===q&&(q=!0);void 0===r&&(r=2);return Zm({programTime:m,playlist:this.masterPlaylistController_.media(),retryCount:r,pauseAfterSeek:q,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:p})};return f}(K.getComponent("Component")),ve={name:"videojs-http-streaming",VERSION:"2.2.4",
canHandleSource:function(k,f){void 0===f&&(f={});f=K.mergeOptions(K.options,f);return ve.canPlayType(k.type,f)},handleSource:function(k,f,h){void 0===h&&(h={});h=K.mergeOptions(K.options,h);f.vhs=new xg(k,f,h);K.hasOwnProperty("hls")||Object.defineProperty(f,"hls",{get:function(){K.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead.");return f.vhs},configurable:!0});f.vhs.xhr=sj();f.vhs.src(k.src,k.type);return f.vhs},canPlayType:function(k,f){void 0===f&&(f={});f=K.mergeOptions(K.options,
f).vhs.overrideNative;f=void 0===f?!K.browser.IS_ANY_SAFARI:f;k=Gi(k);return!k||Va.supportsTypeNatively(k)&&!f?"":"maybe"}};de("avc1.4d400d,mp4a.40.2")&&K.getTech("Html5").registerSourceHandler(ve,0);K.VhsHandler=xg;Object.defineProperty(K,"HlsHandler",{get:function(){K.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead.");return xg},configurable:!0});K.VhsSourceHandler=ve;Object.defineProperty(K,"HlsSourceHandler",{get:function(){K.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead.");
return ve},configurable:!0});K.Vhs=Va;Object.defineProperty(K,"Hls",{get:function(){K.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead.");return Va},configurable:!0});K.use||(K.registerComponent("Hls",Va),K.registerComponent("Vhs",Va));K.options.vhs=K.options.vhs||{};K.options.hls=K.options.hls||{};K.registerPlugin?K.registerPlugin("reloadSourceOnError",ok):K.plugin("reloadSourceOnError",ok);return K});(function(G,N){"undefined"!==typeof window&&window.videojs?N(window.videojs):"function"===typeof define&&define.amd?define("videojs-hotkeys",["video.js"],function(xb){return N(xb.default||xb)}):"undefined"!==typeof module&&module.exports&&(module.exports=N(require("video.js")))})(this,function(G){"undefined"!==typeof window&&(window.videojs_hotkeys={version:"0.2.27"});(G.registerPlugin||G.plugin)("hotkeys",function(N){function xb(X){null!=X&&"function"===typeof X.then&&X.then(null,function(va){})}
var ha=this,ma=ha.el(),Ka=document;N=(G.mergeOptions||G.util.mergeOptions)({volumeStep:.1,seekStep:5,enableMute:!0,enableVolumeScroll:!0,enableHoverScroll:!1,enableFullscreen:!0,enableNumbers:!0,enableJogStyle:!1,alwaysCaptureHotkeys:!1,captureDocumentHotkeys:!1,documentHotkeysFocusElementFilter:function(){return!1},enableModifiersForNumbers:!0,enableInactiveFocus:!0,skipInitialFocus:!1,playPauseKey:function(X){return 32===X.which||179===X.which},rewindKey:function(X){return 37===X.which||177===X.which},
forwardKey:function(X){return 39===X.which||176===X.which},volumeUpKey:function(X){return 38===X.which},volumeDownKey:function(X){return 40===X.which},muteKey:function(X){return 77===X.which},fullscreenKey:function(X){return 70===X.which},customKeys:{}},N||{});var Ga=N.volumeStep,ja=N.seekStep,Wa=N.enableMute,Nb=N.enableVolumeScroll,Qa=N.enableHoverScroll,Uc=N.enableFullscreen,Tb=N.enableNumbers,Ob=N.enableJogStyle,dc=N.alwaysCaptureHotkeys,rc=N.captureDocumentHotkeys,xa=N.documentHotkeysFocusElementFilter,
Ub=N.enableModifiersForNumbers,rb=N.enableInactiveFocus,Pb=N.skipInitialFocus,sb=G.VERSION;ma.hasAttribute("tabIndex")||ma.setAttribute("tabIndex","-1");ma.style.outline="none";if((dc||!ha.autoplay())&&!Pb)ha.one("play",function(){ma.focus()});if(rb)ha.on("userinactive",function(){var X=function(){clearTimeout(va)},va=setTimeout(function(){ha.off("useractive",X);var ib=Ka.activeElement,Aa=ma.querySelector(".vjs-control-bar");ib&&ib.parentElement==Aa&&ma.focus()},10);ha.one("useractive",X)});ha.on("play",
function(){var X=ma.querySelector(".iframeblocker");X&&""===X.style.display&&(X.style.display="block",X.style.bottom="39px")});var Vb=function(X){var va=X.which,ib=X.preventDefault.bind(X),Aa=ha.duration();if(ha.controls()){var yb=Ka.activeElement;if(dc||rc&&xa(yb)||yb==ma||yb==ma.querySelector(".vjs-tech")||yb==ma.querySelector(".vjs-control-bar")||yb==ma.querySelector(".iframeblocker"))switch(xd(X,ha)){case 1:ib();(dc||rc)&&X.stopPropagation();ha.paused()?xb(ha.play()):ha.pause();break;case 2:var tb=
!ha.paused();ib();tb&&ha.pause();X=ha.currentTime()-("function"===typeof ja?ja(X):ja);0>=X&&(X=0);ha.currentTime(X);tb&&xb(ha.play());break;case 3:tb=!ha.paused();ib();tb&&ha.pause();X=ha.currentTime()+("function"===typeof ja?ja(X):ja);X>=Aa&&(X=tb?Aa-.001:Aa);ha.currentTime(X);tb&&xb(ha.play());break;case 5:ib();Ob?(X=ha.currentTime()-1,1>=ha.currentTime()&&(X=0),ha.currentTime(X)):ha.volume(ha.volume()-Ga);break;case 4:ib();Ob?(X=ha.currentTime()+1,X>=Aa&&(X=Aa),ha.currentTime(X)):ha.volume(ha.volume()+
Ga);break;case 6:Wa&&ha.muted(!ha.muted());break;case 7:Uc&&(ha.isFullscreen()?ha.exitFullscreen():ha.requestFullscreen());break;default:for(tb in(47<va&&59>va||95<va&&106>va)&&(Ub||!(X.metaKey||X.ctrlKey||X.altKey))&&Tb&&(Aa=48,95<va&&(Aa=96),Aa=va-Aa,ib(),ha.currentTime(ha.duration()*Aa*.1)),N.customKeys)(Aa=N.customKeys[tb])&&Aa.key&&Aa.handler&&Aa.key(X)&&(ib(),Aa.handler(ha,N,X))}}},sc=!1;rb=ma.querySelector(".vjs-volume-menu-button")||ma.querySelector(".vjs-volume-panel");null!=rb&&(rb.onmouseover=
function(){sc=!0},rb.onmouseout=function(){sc=!1});rb=function(X){var va=Qa?0:Ka.activeElement;ha.controls()&&(dc||va==ma||va==ma.querySelector(".vjs-tech")||va==ma.querySelector(".iframeblocker")||va==ma.querySelector(".vjs-control-bar")||sc)&&Nb&&(X=window.event||X,va=Math.max(-1,Math.min(1,X.wheelDelta||-X.detail)),X.preventDefault(),1==va?ha.volume(ha.volume()+Ga):-1==va&&ha.volume(ha.volume()-Ga))};var xd=function(X,va){if(N.playPauseKey(X,va))return 1;if(N.rewindKey(X,va))return 2;if(N.forwardKey(X,
va))return 3;if(N.volumeUpKey(X,va))return 4;if(N.volumeDownKey(X,va))return 5;if(N.muteKey(X,va))return 6;if(N.fullscreenKey(X,va))return 7};ha.on("keydown",Vb);ha.on("dblclick",function(X){null!=sb&&"7.1.0">=sb&&ha.controls()&&(X=X.relatedTarget||X.toElement||Ka.activeElement,(X==ma||X==ma.querySelector(".vjs-tech")||X==ma.querySelector(".iframeblocker"))&&Uc&&(ha.isFullscreen()?ha.exitFullscreen():ha.requestFullscreen()))});ha.on("mousewheel",rb);ha.on("DOMMouseScroll",rb);rc&&document.addEventListener("keydown",
function(X){Vb(X)});return this})});/*
 @name videojs-seek-buttons @version 1.6.0 @license Apache-2.0 */
!function(G,N){"object"==typeof exports&&"undefined"!=typeof module?module.exports=N(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],N):(G=G||self).videojsSeekButtons=N(G.videojs)}(this,function(G){var N=(G=G&&G.hasOwnProperty("default")?G.default:G).getComponent("Button"),xb={forwardIndex:1,backIndex:1},ha=G.registerPlugin||G.plugin,ma=function(Ka){var Ga=this;this.ready(function(){var ja=G.mergeOptions(xb,Ka);Ga.addClass("vjs-seek-buttons");ja.forward&&0<ja.forward&&
(Ga.controlBar.seekForward=Ga.controlBar.addChild("seekButton",{direction:"forward",seconds:ja.forward},ja.forwardIndex));ja.back&&0<ja.back&&(Ga.controlBar.seekBack=Ga.controlBar.addChild("seekButton",{direction:"back",seconds:ja.back},ja.backIndex));!0})};ma.VERSION="1.6.0";N=function(Ka){function Ga(Wa,Nb){var Qa;return"forward"===(Qa=Ka.call(this,Wa,Nb)||this).options_.direction?Qa.controlText(Qa.localize("Seek forward {{seconds}} seconds").replace("{{seconds}}",Qa.options_.seconds)):"back"===
Qa.options_.direction&&Qa.controlText(Qa.localize("Seek back {{seconds}} seconds").replace("{{seconds}}",Qa.options_.seconds)),Qa}Ga.prototype=Object.create(Ka.prototype);Ga.prototype.constructor=Ga;Ga.__proto__=Ka;var ja=Ga.prototype;return ja.buildCSSClass=function(){return"vjs-seek-button skip-"+this.options_.direction+" skip-"+this.options_.seconds+" "+Ka.prototype.buildCSSClass.call(this)},ja.handleClick=function(){var Wa=this.player_.currentTime();"forward"===this.options_.direction?this.player_.currentTime(Wa+
this.options_.seconds):"back"===this.options_.direction&&this.player_.currentTime(Wa-this.options_.seconds)},Ga}(N);return G.registerComponent("SeekButton",N),ha("seekButtons",ma),ma});