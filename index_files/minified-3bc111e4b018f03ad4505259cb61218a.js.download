(function(g,n,a,u){var p={textTrackSettings:!1,controlBar:{volumePanel:{inline:!1},children:[{name:"playToggle"},{name:"currentTimeDisplay"},{name:"progressControl"},{name:"volumePanel"},{name:"fullscreenToggle"}]}},q=function(){var f=a(".vi20 .dynamic-social-media .post-overlay-mask").first(),c=a(".vi20 .dynamic-social-media .post-overlay"),d;a('.vi20 .dynamic-social-media a[data-target\x3d"post-overlay"]').on("click",function(){d=a(this);f.show().animate({opacity:1},300,function(){a("body, html").css({overflow:"hidden"})});
d.parents(".post-container").next().show().animate({top:"50vh"},300,function(){var b=a(this).find(".img-carousel");b.length&&b.get(0).slick.setPosition();a(this).find("a[href]").first().focus()});return!1});c.find(".close-btn").on("click",function(){a(this).parents(".post-overlay").animate({top:"120vh"},300,function(){var b=a(this);b.find("video").length&&videojs(b.find("video")[0]).pause();b.hide()});f.animate({opacity:0},300,function(){a("body, html").css({overflow:"visible"});f.hide();d.length&&
d[0].focus()})});c.find("a[href],button").on("keydown",function(b){var e=a(this).parents(".post-overlay").find("a[href]:visible,button:visible").last();a(this).hasClass("close-btn")&&9==b.which&&b.shiftKey&&(b.preventDefault(),e.focus());9==b.which&&!b.shiftKey&&a(this).is(e)&&(b.preventDefault(),a(this).parents(".post-overlay").find(".close-btn").focus())});a(n).on("keyup",function(b){27===b.keyCode&&a(".vi20 .dynamic-social-media .post-overlay .close-btn:visible").click()})},h=function(){if("undefined"===
typeof videojs)var f=setTimeout(function(){h()},30);else{"undefined"!==typeof f&&(clearTimeout(f),f=null);var c=0;a(".vi20 .dynamic-social-media video.video-js").each(function(d){d=a(this);var b=d.parents(".crt-post").data("video-params");b=a.extend({sources:[{type:"video/mp4",src:b.src}],poster:b.thumbnail},p);var e=videojs(d[0].id,b);e.aspectRatio("1:1");e.ready(function(){this.hotkeys({alwaysCaptureHotkeys:!0})});e.seekButtons({back:10});e.on("error",function(){4===e.error().code&&100>c&&setTimeout(function(){e.error(null);
e.currentTime(0);e.src(e.currentSource());e.play();c++},500)})})}},r=function(){a(".vi20 .dynamic-social-media .feed-container .carousel-buttons .left-btn").on("click",function(){var c=a(this),d=c.parents(".feed-container");d.find(".crt-feed .post-container.stacked").last().removeClass("stacked");d.find(".crt-feed .post-container").not(".stacked").each(function(b,e){a(e).animate({left:"+\x3d"+a(e).find(".crt-post").innerWidth()},{duration:300,easing:"easeOutQuint"},function(){})});c.next(".right-btn").prop("disabled",
!1);1==d.find(".crt-feed .post-container.stacked").length&&c.prop("disabled",!0);c=d.find(".crt-feed .post-container.stacked").last().find(".title-block")[0].id;a(".left-btn").attr("data-link-event","leftCard:"+c)});a(".vi20 .dynamic-social-media .feed-container .carousel-buttons .right-btn").on("click",function(){var c=a(this),d=a(this).parents(".feed-container"),b=d.find(".crt-feed .post-container").length,e=c.parents(".side-by-side-data").length&&1<b?!0:!1;d.find(".crt-feed .post-container").not(".stacked").each(function(v,
k){a(k).animate({left:"-\x3d"+a(k).find(".crt-post").innerWidth()},{duration:300,easing:"easeOutQuint"},function(){})});d.find(".crt-feed .post-container.stacked").last().next().next(".post-container").addClass("stacked");c.prev(".left-btn").prop("disabled",!1);var l=1;if(768>g.innerWidth||e&&1024<=g.innerWidth)l=0;d.find(".crt-feed .post-container.stacked").length==b-l&&c.prop("disabled",!0);c=d.find(".crt-feed .post-container.stacked").last().find(".title-block")[0].id;a(".right-btn").attr("data-link-event",
"rightCard:"+c)});var f=a(".vi20 .dynamic-social-media .feed-container .crt-feed");f.on("swipeleft",function(){0==a(".vi20 .dynamic-social-media .post-overlay:visible").length&&a(this).parent(".feed-container").find(".carousel-buttons:visible .right-btn:enabled").click()});f.on("swiperight",function(){0==a(".vi20 .dynamic-social-media .post-overlay:visible").length&&a(this).parent(".feed-container").find(".carousel-buttons:visible .left-btn:enabled").click()})},t=function(){var f,c=a(g).width();a(g).on("resize",
function(d){clearTimeout(f);f=setTimeout(function(){a(g).width()!=c&&(c=a(g).width(),$container=a(".vi20 .dynamic-social-media .feed-container"),$allTiles=$container.find(".crt-feed .post-container"),$allTiles.not(":first-child").removeClass("stacked"),$allTiles.css("left",""),$container.find(".carousel-buttons .right-btn").prop("disabled",!1),$container.find(".carousel-buttons .left-btn").prop("disabled",!0))},500)})},m=function(){if("undefined"===typeof a.fn.slick)var f=setTimeout(function(){m()},
30);else"undefined"!==typeof f&&(clearTimeout(f),f=null),a(".vi20 .dynamic-social-media .post-overlay .img-carousel").slick({dots:!0,arrows:!0,infinite:!0,speed:500,fade:!0,cssEase:"linear"})};a(function(){a(".vi20 .dynamic-social-media").length&&(r(),t(),h(),m(),q())})})(window,document,jQuery);